import{s as pe,k as R,l as ue,m as ve,d,o as q,i as x,j as O,p as be,y as H,e as p,t as G,c as v,a as b,b as J,f as g,g as n,u as ye,h as K,A as Q,D as X}from"../chunks/scheduler.Dg_Xn4WQ.js";import{S as we,i as Ie,t as z,a as $,c as ke,f as Y,b as Ee,d as Se,m as De,e as Ve,g as Me}from"../chunks/index.gNonUo3Z.js";import{g as Z}from"../chunks/entry.C1o6s8Km.js";import{p as Ce}from"../chunks/stores.C9kw2blP.js";import{d as ee}from"../chunks/relativeTime.BDz4fsXT.js";import{g as fe,W as Le,m as Be}from"../chunks/index.C2zJs1dP.js";import{l as je,b as Ne,d as Ue}from"../chunks/index.bquoJ5FE.js";import{g as Ae,c as Pe}from"../chunks/index.PGXp80Wq.js";import{M as Te}from"../chunks/Messages.D1_5Ykrn.js";import{t as We}from"../chunks/Toaster.svelte_svelte_type_style_lang.CM0nbnqF.js";import"../chunks/Modal.DLh1UrlN.js";import"../chunks/updater.B0HmoELl.js";import"../chunks/marked.esm._0_gBwjO.js";import{g as Oe}from"../chunks/index.ttVds5UM.js";import{g as Re}from"../chunks/index.BGh32guZ.js";import"../chunks/FileSaver.min.CimDdHIv.js";import"../chunks/postcss.BqrOJvLs.js";function me(s){let f,a,i,c,t,o,u,M,w,k,h=ee(s[4].chat.timestamp).format("LLL")+"",D,C,E,_,r,L,B,j,N,S,e,I,U=s[10].t("Clone Chat")+"",A,V,F,se;function ge(l){s[15](l)}function he(l){s[16](l)}function _e(l){s[17](l)}let P={className:"h-full flex pt-4 pb-8",user:s[5],chatId:s[8],readOnly:!0,selectedModels:s[3],processing:ze,bottomPadding:s[12].length>0,sendPrompt:Fe,continueResponse:He,regenerateResponse:Ge};return s[0]!==void 0&&(P.history=s[0]),s[7]!==void 0&&(P.messages=s[7]),s[2]!==void 0&&(P.autoScroll=s[2]),r=new Te({props:P}),H.push(()=>Y(r,"history",ge)),H.push(()=>Y(r,"messages",he)),H.push(()=>Y(r,"autoScroll",_e)),{c(){f=p("div"),a=p("div"),i=p("div"),c=p("div"),t=p("div"),o=p("div"),u=G(s[6]),M=R(),w=p("div"),k=p("div"),D=G(h),C=R(),E=p("div"),_=p("div"),Ee(r.$$.fragment),N=R(),S=p("div"),e=p("div"),I=p("button"),A=G(U),this.h()},l(l){f=v(l,"DIV",{class:!0});var m=b(f);a=v(m,"DIV",{class:!0});var y=b(a);i=v(y,"DIV",{class:!0,id:!0});var T=b(i);c=v(T,"DIV",{class:!0});var te=b(c);t=v(te,"DIV",{class:!0});var W=b(t);o=v(W,"DIV",{class:!0});var ae=b(o);u=J(ae,s[6]),ae.forEach(d),M=q(W),w=v(W,"DIV",{class:!0});var oe=b(w);k=v(oe,"DIV",{class:!0});var le=b(k);D=J(le,h),le.forEach(d),oe.forEach(d),W.forEach(d),te.forEach(d),C=q(T),E=v(T,"DIV",{class:!0});var re=b(E);_=v(re,"DIV",{class:!0});var ie=b(_);Se(r.$$.fragment,ie),ie.forEach(d),re.forEach(d),T.forEach(d),N=q(y),S=v(y,"DIV",{class:!0});var ne=b(S);e=v(ne,"DIV",{class:!0});var ce=b(e);I=v(ce,"BUTTON",{class:!0});var de=b(I);A=J(de,U),de.forEach(d),ce.forEach(d),ne.forEach(d),y.forEach(d),m.forEach(d),this.h()},h(){g(o,"class","text-2xl font-semibold line-clamp-1"),g(k,"class","text-gray-400"),g(w,"class","flex text-sm justify-between items-center mt-1"),g(t,"class","px-3"),g(c,"class","pt-5 px-2 w-full max-w-5xl mx-auto"),g(_,"class",""),g(E,"class","h-full w-full flex flex-col py-2"),g(i,"class","flex flex-col w-full flex-auto overflow-auto h-0"),g(i,"id","messages-container"),g(I,"class","px-4 py-2 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"),g(e,"class","pb-5"),g(S,"class","absolute bottom-0 right-0 left-0 flex justify-center w-full bg-gradient-to-b from-transparent to-white dark:to-gray-900"),g(a,"class","flex flex-col flex-auto justify-center relative"),g(f,"class","h-screen max-h-[100dvh] w-full flex flex-col text-gray-700 dark:text-gray-100 bg-white dark:bg-gray-900")},m(l,m){x(l,f,m),n(f,a),n(a,i),n(i,c),n(c,t),n(t,o),n(o,u),n(t,M),n(t,w),n(w,k),n(k,D),n(i,C),n(i,E),n(E,_),De(r,_,null),n(a,N),n(a,S),n(S,e),n(e,I),n(I,A),V=!0,F||(se=ye(I,"click",s[13]),F=!0)},p(l,m){(!V||m&64)&&K(u,l[6]),(!V||m&16)&&h!==(h=ee(l[4].chat.timestamp).format("LLL")+"")&&K(D,h);const y={};m&32&&(y.user=l[5]),m&256&&(y.chatId=l[8]),m&8&&(y.selectedModels=l[3]),!L&&m&1&&(L=!0,y.history=l[0],Q(()=>L=!1)),!B&&m&128&&(B=!0,y.messages=l[7],Q(()=>B=!1)),!j&&m&4&&(j=!0,y.autoScroll=l[2],Q(()=>j=!1)),r.$set(y),(!V||m&1024)&&U!==(U=l[10].t("Clone Chat")+"")&&K(A,U)},i(l){V||(z(r.$$.fragment,l),V=!0)},o(l){$(r.$$.fragment,l),V=!1},d(l){l&&d(f),Ve(r),F=!1,se()}}}function qe(s){let f,a,i,c;document.title=f=`
		`+(s[6]?`${s[6].length>30?`${s[6].slice(0,30)}...`:s[6]} | ${s[9]}`:`${s[9]}`)+`
	`;let t=s[1]&&me(s);return{c(){a=R(),t&&t.c(),i=ue()},l(o){ve("svelte-1123lr8",document.head).forEach(d),a=q(o),t&&t.l(o),i=ue()},m(o,u){x(o,a,u),t&&t.m(o,u),x(o,i,u),c=!0},p(o,[u]){(!c||u&576)&&f!==(f=`
		`+(o[6]?`${o[6].length>30?`${o[6].slice(0,30)}...`:o[6]} | ${o[9]}`:`${o[9]}`)+`
	`)&&(document.title=f),o[1]?t?(t.p(o,u),u&2&&z(t,1)):(t=me(o),t.c(),z(t,1),t.m(i.parentNode,i)):t&&(Me(),$(t,1,1,()=>{t=null}),ke())},i(o){c||(z(t),c=!0)},o(o){$(t),c=!1},d(o){o&&(d(a),d(i)),t&&t.d(o)}}}let ze="";const Fe=()=>{},He=()=>{},Ge=()=>{};function Je(s,f,a){let i,c,t,o;O(s,fe,e=>a(8,i=e)),O(s,Ce,e=>a(14,c=e)),O(s,Le,e=>a(9,t=e));const u=be("i18n");O(s,u,e=>a(10,o=e)),ee.extend(je);let M=!1,w=!0,k=[""],h=null,D=null,C="",E=[],_=[],r={messages:{},currentId:null};const L=async()=>{if(await Be.set(await Oe(localStorage.token)),await fe.set(c.params.id),a(4,h=await Ae(localStorage.token,i).catch(async e=>(await Z("/"),null))),h){a(5,D=await Re(localStorage.token,h.user_id).catch(I=>(console.error(I),null)));const e=h.chat;return e?(console.log(e),a(3,k=((e==null?void 0:e.models)??void 0)!==void 0?e.models:[e.models??""]),a(0,r=((e==null?void 0:e.history)??void 0)!==void 0?e.history:Ue(e.messages)),a(6,C=e.title),a(2,w=!0),await X(),_.length>0&&a(0,r.messages[_.at(-1).id].done=!0,r),await X(),!0):null}},B=async()=>{if(!h)return;const e=await Pe(localStorage.token,h.id).catch(I=>(We.error(`${I}`),null));e&&Z(`/c/${e.id}`)};function j(e){r=e,a(0,r)}function N(e){_=e,a(7,_),a(0,r)}function S(e){w=e,a(2,w)}return s.$$.update=()=>{s.$$.dirty&1&&a(7,_=Ne(r,r.currentId)),s.$$.dirty&16384&&c.params.id&&(async()=>await L()?(await X(),a(1,M=!0)):await Z("/"))()},[r,M,w,k,h,D,C,_,i,t,o,u,E,B,c,j,N,S]}class ds extends we{constructor(f){super(),Ie(this,f,Je,qe,pe,{})}}export{ds as component};
//# sourceMappingURL=35.CgxLIOej.js.map
