(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[350],{94799:function(e,t,r){Promise.resolve().then(r.bind(r,32459))},97500:function(e,t,r){"use strict";async function i(e,t){let{arg:r}=t,i=await fetch(""+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!(i.status>=200&&i.status<300))throw Error(await i.text());let l=await i.json();if(!i.ok)throw Error(l.message);return l}r.d(t,{_i:function(){return l},gz:function(){return a},hw:function(){return s},sj:function(){return n},wG:function(){return i}});let l=async function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let i=await fetch(""+t[0],t[1]);if(!i.ok)throw Error(await i.text());return i.json()},n=async(e,t)=>{let r=await fetch(""+e,t);if(!r.ok)throw Error(await r.text());return r};async function s(e,t){let{arg:r}=t,i=await fetch("".concat("").concat(e,"/").concat(r),{method:"DELETE"});if(!i.ok)throw Error(await i.text());return i}async function a(e,t){let{arg:r}=t,i=await fetch("".concat("").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!i.ok)throw Error(await i.text());return i}},21659:function(e,t,r){"use strict";r.d(t,{Bf:function(){return a},JB:function(){return o},ZP:function(){return s}});var i=r(85323),l=r(97500),n=r(2265);function s(){let{data:e,error:t,isLoading:r}=(0,i.ZP)("/v1/streamers",l._i);return{isLoading:r,streamers:e}}function a(){let{data:e,error:t,isLoading:r}=(0,i.ZP)("/v1/users",l._i),[s,a]=(0,n.useState)([]);return(0,n.useEffect)(()=>{if(!e||0===e.length)return;let t=async e=>{try{var t;let r=await (0,l._i)("/bili/space/myinfo?user=".concat(e.value),void 0),i=await (0,l.sj)("/bili/proxy?url=".concat(null===(t=r.data)||void 0===t?void 0:t.face)),n=await i.blob();return{...e,name:r.data.name,face:URL.createObjectURL(n)}}catch(i){console.error(i);let t=await (0,l.sj)("/bili/proxy?url=https://i0.hdslb.com/bfs/face/member/noface.jpg"),r=await t.blob();return{...e,name:"Cookie已失效",face:URL.createObjectURL(r)}}};Promise.all(e.map(t)).then(a)},[e]),{isLoading:r,isError:t,biliUsers:s}}function o(){var e;let{data:t,error:r,isLoading:n}=(0,i.ZP)("/bili/archive/pre",l._i);return{isLoading:n,isError:r,typeTree:null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.typelist.map(e=>({label:e.name,value:e.id,children:e.children}))}}},32459:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var i=r(57437),l=r(88797),n=r(67050),s=r(49241),a=r(62146),o=r(23298),c=r(84747),d=r(2265),u=r(21659),h=r(97349),m=r(97500),x=r(85323),p=e=>{let{children:t,entity:r,onOk:n}=e,{Paragraph:s,Title:o,Text:c}=l.Typography,u="该项为必填项",[p,f]=(0,d.useState)(!1),g=p?{}:{WebkitMaskImage:"linear-gradient(to bottom, black 0%, rgba(0, 0, 0, 1) 60%, rgba(0, 0, 0, 0.2) 80%, transparent 100%)"},v=(0,i.jsxs)("div",{className:"semi-form-field-extra",children:["流程无报错结束时触发，将按自定义顺序执行操作。默认",(0,i.jsx)(c,{type:"danger",children:"删除"}),"视频文件,若要保留文件请设置为 mv。示例：",(0,i.jsx)("br",{}),(0,i.jsx)("code",{children:"rm"})," 删除文件，为默认操作",(0,i.jsx)("br",{}),(0,i.jsx)("code",{children:"mv = backup/"})," 移动文件到backup目录下",(0,i.jsx)("br",{}),(0,i.jsx)("code",{children:"run = echo hello!"})," 使用当前运行用户在 shell 执行任意命令，",(0,i.jsx)(c,{type:"danger",children:"注意风险。"}),"视频文件路径作为标准输入传入"]}),j=()=>{f(!p)},y={position:"absolute",left:0,right:0,textAlign:"center",bottom:p?0:-10,fontWeight:700,cursor:"pointer"},b=(0,d.useRef)(),{data:w,error:k,isLoading:Z}=(0,x.ZP)("/v1/upload/streamers",m._i),[C,O]=(0,d.useState)(!1),E=()=>{O(!0)},_=async()=>{var e;let t=await (null===(e=b.current)||void 0===e?void 0:e.validate());await n(t),O(!1)},F=d.Children.map(t,e=>{if(d.isValidElement(e))return d.cloneElement(e,{onClick:()=>{var t,r;E(),null===(t=(r=e.props).onClick)||void 0===t||t.call(r)}})}),R=null==w?void 0:w.map(e=>({value:e.id,label:e.template_name}));return(0,i.jsxs)(i.Fragment,{children:[F,(0,i.jsx)(l.u_,{title:"录播管理",visible:C,onOk:_,style:{width:600},onCancel:()=>{O(!1)},bodyStyle:{overflow:"auto",maxHeight:"calc(100vh - 320px)",paddingLeft:10,paddingRight:10},children:(0,i.jsxs)(l.Form,{initValues:r,getFormApi:e=>b.current=e,children:[(0,i.jsx)(l.Form.Input,{field:"remark",label:"录播备注",trigger:"blur",rules:[{required:!0,message:u}]}),(0,i.jsx)(l.Form.Input,{field:"url",label:"直播链接",trigger:"blur",rules:[{required:!0,message:u}]}),(0,i.jsx)(l.Form.Select,{showClear:!0,field:"upload_id",label:{text:"投稿模板",optional:!0},style:{width:176},optionList:R}),(0,i.jsx)(l.OF,{field:"postprocessor",initValue:void 0===r?[{cmd:"rm"}]:void 0,children:e=>{let{add:t,arrayFields:r}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.Form.Slot,{label:{text:"后处理"},labelPosition:"left",children:(0,i.jsx)(l.zx,{icon:(0,i.jsx)(a.Z,{}),onClick:t,theme:"light",children:"添加行"})}),r.map((e,t)=>{var n,s;let{field:a,key:o,remove:c}=e;return(0,i.jsxs)("div",{style:{display:"flex"},children:[(0,i.jsxs)(l.Form.Select,{field:"".concat(a,".cmd"),label:"操作",rules:[{required:!0,message:u}],noLabel:!0,children:[(0,i.jsx)(l.Form.Select.Option,{value:"run",children:"run（运行）"}),(0,i.jsx)(l.Form.Select.Option,{value:"mv",children:"mv（移动到）"}),(0,i.jsx)(l.Form.Select.Option,{value:"rm",children:"rm（删除文件）"})]}),(null===(s=b.current)||void 0===s?void 0:null===(n=s.getValue(a))||void 0===n?void 0:n.cmd)!=="rm"?(0,i.jsx)(l.Form.Input,{field:"".concat(a,".value"),label:"=",labelPosition:"inset",rules:[{required:!0,message:u}],style:{width:300,marginRight:16}}):null,(0,i.jsx)(l.zx,{type:"danger",theme:"borderless",icon:(0,i.jsx)(h.Z,{}),onClick:c,disabled:r.length<=1,style:{margin:12}})]},o)}),(0,i.jsxs)("div",{style:{position:"relative"},children:[(0,i.jsx)(l.zF,{isOpen:p,collapseHeight:60,style:{...g},children:v}),(0,i.jsxs)("a",{onClick:j,style:{...y},children:["+ Show ",p?"Less":"More"]})]})]})}}),(0,i.jsx)(l.Form.Input,{field:"format",label:"视频格式",placeholder:"flv",style:{width:176},helpText:"视频保存格式。不支持stream-gears下载器和Youtube平台。"}),(0,i.jsx)(l.UO,{keepDOM:!0,children:(0,i.jsxs)(l.UO.Panel,{header:"更多设置",itemKey:"processors",children:[(0,i.jsx)(l.Form.Input,{field:"filename_prefix",label:{text:"文件名模板",optional:!0},placeholder:"{streamer}%Y-%m-%dT%H_%M_%S"}),(0,i.jsx)(l.Form.Input,{field:"time_range",extraText:(0,i.jsx)("div",{style:{fontSize:"14px"},children:"格式：'01:00:00-02:00:00'（时:分:秒-时:分:秒）"}),label:"录制时间范围",placeholder:"01:00:00-02:00:00",style:{width:176}}),(0,i.jsx)(l.OF,{field:"preprocessor",children:e=>{let{add:t,arrayFields:r}=e;return(0,i.jsxs)(l.Form.Section,{text:"下载前处理",children:[(0,i.jsx)("div",{className:"semi-form-field-extra",children:"下载直播前触发，将按自定义顺序执行自定义操作，仅支持shell指令"}),(0,i.jsx)(l.zx,{icon:(0,i.jsx)(a.Z,{}),onClick:t,theme:"light",children:"添加行"}),r.map((e,t)=>{let{field:r,key:n,remove:s}=e;return(0,i.jsxs)("div",{style:{width:1e3,display:"flex"},children:[(0,i.jsx)(l.Form.Input,{field:"".concat(r,"[run]"),label:"run = ",labelPosition:"inset",rules:[{required:!0,message:u}],style:{width:400,marginRight:16}}),(0,i.jsx)(l.zx,{type:"danger",theme:"borderless",icon:(0,i.jsx)(h.Z,{}),onClick:s,style:{margin:12}})]},n)})]})}}),(0,i.jsx)(l.OF,{field:"segment_processor",children:e=>{let{add:t,arrayFields:r}=e;return(0,i.jsxs)(l.Form.Section,{text:"分段时后处理",children:[(0,i.jsx)("div",{className:"semi-form-field-extra",children:"分段时触发，将按自定义顺序执行自定义操作，仅支持shell指令"}),(0,i.jsx)(l.zx,{icon:(0,i.jsx)(a.Z,{}),onClick:t,theme:"light",children:"添加行"}),r.map((e,t)=>{let{field:r,key:n,remove:s}=e;return(0,i.jsxs)("div",{style:{width:1e3,display:"flex"},children:[(0,i.jsx)(l.Form.Input,{field:"".concat(r,"[run]"),label:"run = ",labelPosition:"inset",rules:[{required:!0,message:u}],style:{width:400,marginRight:16}}),(0,i.jsx)(l.zx,{type:"danger",theme:"borderless",icon:(0,i.jsx)(h.Z,{}),onClick:s,style:{margin:12}})]},n)})]})}}),(0,i.jsx)(l.OF,{field:"downloaded_processor",children:e=>{let{add:t,arrayFields:r}=e;return(0,i.jsxs)(l.Form.Section,{text:"下载后处理",children:[(0,i.jsx)("div",{className:"semi-form-field-extra",children:"准备上传直播时触发，将按自定义顺序执行自定义操作，仅支持shell指令，如果对上传的视频进行修改，需要保证和filename_prefix命名规则一致，会自动检测上传"}),(0,i.jsx)(l.zx,{icon:(0,i.jsx)(a.Z,{}),onClick:t,theme:"light",children:"添加行"}),r.map((e,t)=>{let{field:r,key:n,remove:s}=e;return(0,i.jsxs)("div",{style:{width:1e3,display:"flex"},children:[(0,i.jsx)(l.Form.Input,{field:"".concat(r,"[run]"),label:"run = ",labelPosition:"inset",rules:[{required:!0,message:u}],style:{width:400,marginRight:16}}),(0,i.jsx)(l.zx,{type:"danger",theme:"borderless",icon:(0,i.jsx)(h.Z,{}),onClick:s,style:{margin:12}})]},n)})]})}}),(0,i.jsx)(l.OF,{field:"opt_args",children:e=>{let{add:t,arrayFields:r}=e;return(0,i.jsxs)(l.Form.Section,{text:"ffmpeg参数",children:[(0,i.jsx)("div",{className:"semi-form-field-extra",children:'如："-ss"、"00:00:16"，每个参数需单独一行'}),(0,i.jsx)(l.zx,{icon:(0,i.jsx)(a.Z,{}),onClick:t,theme:"light",children:"添加行"}),r.map((e,t)=>{let{field:r,key:n,remove:s}=e;return(0,i.jsxs)("div",{style:{width:1e3,display:"flex"},children:[(0,i.jsx)(l.Form.Input,{field:r,label:"参数".concat(t+1),labelPosition:"left",rules:[{required:!0,message:u}]}),(0,i.jsx)(l.zx,{type:"danger",theme:"borderless",icon:(0,i.jsx)(h.Z,{}),onClick:s,style:{margin:12}})]},n)})]})}})]})})]})})]})},f=r(65582);function g(){let{Header:e,Content:t}=l.Layout,{Text:r}=l.Typography,{streamers:d,isLoading:h}=(0,u.ZP)(),{trigger:x}=(0,f.Z)("/v1/streamers",m.hw),{trigger:g}=(0,f.Z)("/v1/streamers",m.gz),{trigger:v}=(0,f.Z)("/v1/streamers",m.wG),j=async e=>{await x(e)},y=e=>((null==e?void 0:e.postprocessor)&&(e.postprocessor=e.postprocessor.map(e=>{if("rm"===e)return{cmd:"rm"};if("object"==typeof e&&!e.cmd){let[t,r]=Object.entries(e)[0];return{cmd:t,value:r}}return e})),e),b=null==d?void 0:d.map(e=>{let t;switch(e.status){case"Working":t=(0,i.jsx)(l.Vp,{color:"red",children:"直播中"});break;case"Idle":t=(0,i.jsx)(l.Vp,{color:"green",children:"空闲"});break;case"Pending":t=(0,i.jsx)(l.Vp,{color:"grey",children:"未知"});break;case"Inspecting":t=(0,i.jsx)(l.Vp,{color:"indigo",children:"检测中"});break;case"OutOfSchedule":t=(0,i.jsx)(l.Vp,{color:"green",children:"非录播时间"})}return{...y(e),status:t}}),w=async e=>{(null==e?void 0:e.postprocessor)&&(e.postprocessor=e.postprocessor.map(e=>{let{cmd:t,value:r}=e;return"rm"===t?"rm":{[t]:r}}));try{await v(e)}catch(e){throw l.P_.error({title:"创建失败",content:(0,i.jsx)(l.Typography.Paragraph,{style:{maxWidth:450},children:e.message}),style:{width:"min-content"}}),e}},k=async e=>{delete e.status,(null==e?void 0:e.postprocessor)&&(e.postprocessor=e.postprocessor.map(e=>{let{cmd:t,value:r}=e;return"rm"===t?"rm":{[t]:r}}));try{await g(e)}catch(e){throw l.P_.error({title:"更新失败",content:(0,i.jsx)(l.Typography.Paragraph,{style:{maxWidth:450},children:e.message}),style:{width:"min-content"}}),e}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e,{style:{backgroundColor:"var(--semi-color-bg-1)",position:"sticky",top:0,zIndex:1},children:(0,i.jsxs)("nav",{style:{display:"flex",paddingLeft:"25px",paddingRight:"25px",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",boxShadow:"0 1px 2px 0 rgb(0 0 0 / 0.05)"},children:[(0,i.jsxs)("div",{style:{display:"flex",gap:10,justifyContent:"center",alignItems:"center",flexWrap:"wrap"},children:[(0,i.jsx)(n.Z,{size:"large",style:{backgroundColor:"rgba(var(--semi-green-4), 1)",borderRadius:"var(--semi-border-radius-large)",color:"var(--semi-color-bg-0)",padding:"6px"}}),(0,i.jsx)("h4",{children:"录播管理"})]}),(0,i.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center",gap:6},children:[(0,i.jsx)(l.zx,{theme:"borderless",icon:(0,i.jsx)(s.Z,{size:"large"}),style:{color:"var(--semi-color-text-2)"},onClick:()=>window.location.href="/static/ds_update.log"}),(0,i.jsx)(p,{onOk:w,children:(0,i.jsx)(l.zx,{icon:(0,i.jsx)(a.Z,{}),theme:"solid",style:{marginRight:10},children:"新建"})})]})]})}),(0,i.jsx)(t,{style:{padding:"24px",backgroundColor:"var(--semi-color-bg-0)"},children:(0,i.jsx)("main",{children:(0,i.jsx)(l.aV,{grid:{gutter:12,xs:24,sm:24,md:12,lg:8,xl:6,xxl:4},dataSource:b,renderItem:e=>(0,i.jsx)(l.aV.Item,{children:(0,i.jsxs)(l.Card,{shadows:"hover",style:{margin:"9px 0px",width:"100%"},bodyStyle:{},children:[(0,i.jsx)("div",{style:{position:"absolute",right:20,top:9},children:e.status}),(0,i.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,i.jsx)("h3",{style:{color:"var(--semi-color-text-0)",fontWeight:500,maxWidth:"60%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.remark})}),(0,i.jsx)(r,{style:{width:"101%"},ellipsis:{showTooltip:!0},type:"tertiary",children:e.url}),(0,i.jsx)("div",{style:{margin:"0",display:"flex",padding:"0 0 32px 0px",justifyContent:"flex-end"},children:(0,i.jsxs)(l.hE,{theme:"borderless",style:{position:"absolute",right:20,bottom:15},children:[(0,i.jsx)(p,{onOk:k,entity:e,children:(0,i.jsx)(l.zx,{theme:"borderless",icon:(0,i.jsx)(o.Z,{})})}),(0,i.jsx)("span",{className:"semi-button-group-line semi-button-group-line-borderless semi-button-group-line-primary"}),(0,i.jsx)(l.gn,{title:"确定是否要删除？",content:"此操作将不可逆",onConfirm:async()=>await j(e.id),children:(0,i.jsx)(l.zx,{theme:"borderless",icon:(0,i.jsx)(c.Z,{})})})]})})]})})})})})]})}},84747:function(e,t,r){"use strict";var i=r(2265);let l=(0,r(87565).A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 5V4h4v1h-4ZM8 5V3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2h4a1 1 0 1 1 0 2h-1v14a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V7H4a1 1 0 0 1 0-2h4Zm7 2H7v13h10V7h-2ZM9 9.5c0-.28.22-.5.5-.5h1c.28 0 .5.22.5.5v7a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-7Zm4 0c0-.28.22-.5.5-.5h1c.28 0 .5.22.5.5v7a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-7Z",fill:"currentColor"}))},"delete_stroked");t.Z=l},23298:function(e,t,r){"use strict";var i=r(2265);let l=(0,r(87565).A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.14 4.41 19.73 3a2 2 0 0 0-2.83 0l-1.41 1.41-.71.71L8.3 11.6a1 1 0 0 0-.28.53l-.6 3.43a1 1 0 0 0 1.16 1.16l3.43-.6a1 1 0 0 0 .53-.28l6.47-6.47.7-.7 1.42-1.42a2 2 0 0 0 0-2.83Zm-2.12 2.13.7-.71-1.4-1.42-.71.71 1.41 1.42Zm-1.41 1.41-1.42-1.41-6.24 6.24-.3 1.72 1.71-.3 6.25-6.25ZM2 5a1 1 0 0 1 1-1h7a1 1 0 1 1 0 2H4v14h14v-6a1 1 0 1 1 2 0v7a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V5Z",fill:"currentColor"}))},"edit_2_stroked");t.Z=l},97349:function(e,t,r){"use strict";var i=r(2265);let l=(0,r(87565).A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23a11 11 0 1 0 0-22 11 11 0 0 0 0 22ZM6.5 10.5h11a1.5 1.5 0 0 1 0 3h-11a1.5 1.5 0 0 1 0-3Z",fill:"currentColor"}))},"minus_circle");t.Z=l},62146:function(e,t,r){"use strict";var i=r(2265);let l=(0,r(87565).A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23a11 11 0 1 0 0-22 11 11 0 0 0 0 22Zm7-11.12a1.5 1.5 0 0 1-1.47 1.52l-4 .07.07 4a1.5 1.5 0 0 1-3 .06l-.07-4-4 .07a1.5 1.5 0 0 1-.06-3l4-.07-.07-4a1.5 1.5 0 1 1 3-.06l.07 4 4-.07A1.5 1.5 0 0 1 19 11.88Z",fill:"currentColor"}))},"plus_circle");t.Z=l},67050:function(e,t,r){"use strict";var i=r(2265);let l=(0,r(87565).A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 2a2 2 0 0 0-2 2v16c0 1.1.9 2 2 2h7a1 1 0 1 0 0-2H4V4h16v10a1 1 0 1 0 2 0V4a2 2 0 0 0-2-2H4Zm5.5 5.13A1 1 0 0 0 8 8v8a1 1 0 0 0 1.5.87l7-4a1 1 0 0 0 0-1.74l-7-4ZM13.98 12 10 14.28V9.72L13.98 12Zm.52 5a.5.5 0 0 0-.5.5v1c0 .28.22.5.5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm0 3a.5.5 0 0 0-.5.5v1c0 .28.22.5.5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm2.5-2.5c0-.28.22-.5.5-.5h4c.28 0 .5.22.5.5v1a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-1Zm.5 2.5a.5.5 0 0 0-.5.5v1c0 .28.22.5.5.5h4a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-4Z",fill:"currentColor"}))},"video_list_stroked");t.Z=l},65582:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var i=r(2265),l=r(62827),n=r(85323),s=r(60951);let a=s.I?e=>{e()}:i.startTransition,o=e=>{let[,t]=(0,i.useState)({}),r=(0,i.useRef)(!1),l=(0,i.useRef)(e),n=(0,i.useRef)({data:!1,error:!1,isValidating:!1}),a=(0,i.useCallback)(e=>{let i=!1,s=l.current;for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&s[t]!==e[t]&&(s[t]=e[t],n.current[t]&&(i=!0));i&&!r.current&&t({})},[]);return(0,s.v)(()=>(r.current=!1,()=>{r.current=!0})),[l,n.current,a]},c=(0,l.xD)(n.ZP,()=>(e,t,r={})=>{let{mutate:n}=(0,l.kY)(),c=(0,i.useRef)(e),d=(0,i.useRef)(t),u=(0,i.useRef)(r),h=(0,i.useRef)(0),[m,x,p]=o({data:s.U,error:s.U,isMutating:!1}),f=m.current,g=(0,i.useCallback)(async(e,t)=>{let[r,i]=(0,s.s)(c.current);if(!d.current)throw Error("Can’t trigger the mutation: missing fetcher.");if(!r)throw Error("Can’t trigger the mutation: missing key.");let l=(0,s.m)((0,s.m)({populateCache:!1,throwOnError:!0},u.current),t),o=(0,s.p)();h.current=o,p({isMutating:!0});try{let t=await n(r,d.current(i,{arg:e}),(0,s.m)(l,{throwOnError:!0}));return h.current<=o&&(a(()=>p({data:t,isMutating:!1,error:void 0})),null==l.onSuccess||l.onSuccess.call(l,t,r,l)),t}catch(e){if(h.current<=o&&(a(()=>p({error:e,isMutating:!1})),null==l.onError||l.onError.call(l,e,r,l),l.throwOnError))throw e}},[]),v=(0,i.useCallback)(()=>{h.current=(0,s.p)(),p({data:s.U,error:s.U,isMutating:!1})},[]);return(0,s.v)(()=>{c.current=e,d.current=t,u.current=r}),{trigger:g,reset:v,get data(){return x.data=!0,f.data},get error(){return x.error=!0,f.error},get isMutating(){return x.isMutating=!0,f.isMutating}}})}},function(e){e.O(0,[308,385,251,157,440,326,152,797,323,971,117,744],function(){return e(e.s=94799)}),_N_E=e.O()}]);