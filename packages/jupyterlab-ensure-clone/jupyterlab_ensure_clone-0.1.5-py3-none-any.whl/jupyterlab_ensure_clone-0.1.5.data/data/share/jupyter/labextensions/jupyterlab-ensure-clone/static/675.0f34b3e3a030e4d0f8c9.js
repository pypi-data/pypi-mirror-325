"use strict";(self.webpackChunkjupyterlab_ensure_clone=self.webpackChunkjupyterlab_ensure_clone||[]).push([[675],{675:(e,t,r)=>{r.r(t),r.d(t,{default:()=>c});var n=r(593),a=r(209),o=r(256),s=r(310),i=r(421);async function p(e="",t={}){const r=i.ServerConnection.makeSettings(),n=s.URLExt.join(r.baseUrl,"jupyterlab-ensure-clone",e);let a;try{a=await i.ServerConnection.makeRequest(n,t,r)}catch(e){throw new i.ServerConnection.NetworkError(e)}let o=await a.text();if(o.length>0)try{o=JSON.parse(o)}catch(e){console.log("Not a JSON response body.",a)}if(!a.ok)throw new i.ServerConnection.ResponseError(a,o.message||o);return o}const l={id:"jupyterlab-ensure-clone:plugin",description:"Ensure a git repo is cloned on startup.",autoStart:!0,requires:[n.ISettingRegistry],activate:async(e,t)=>{console.log(`JupyterLab extension ${l.id} is activated!`);const r=(await t.load(l.id)).composite.private,n=new u(r);let o=r,s=0;for(;;)try{await p("",{method:"POST",body:JSON.stringify(o)});break}catch(e){s++;const t=s<2?r.title:"Error ensuring clone, try again?";for(;o=await(0,a.showDialog)({title:t,body:n}),!o.button.accept;)if(confirm("You may be missing functionality if you cancel. Are you sure?"))return;o=o.value,o.repoUrl=o.repoUrl||r.repoUrl,o.targetDir=o.targetDir||r.targetDir,o.updateScript=o.updateScript||r.updateScript}}};class u extends o.Widget{constructor(e){super(),this.addClass("jp-LoginForm"),e.helpText&&(this.node.appendChild(document.createElement("p")).textContent=e.helpText),this.repoUrlInput=this.createInput({placeholder:"Repo URL"}),this.targetDirInput=this.createInput({placeholder:"Target directory"}),this.usernameInput=this.createInput({placeholder:"Username"}),this.passwordInput=this.createInput({placeholder:"Password",type:"password"}),e.repoUrl||this.node.appendChild(this.repoUrlInput),e.targetDir||this.node.appendChild(this.targetDirInput),e.needCredentials&&(this.node.appendChild(this.usernameInput),this.node.appendChild(this.passwordInput))}createInput({placeholder:e="",type:t="text"}){const r=document.createElement("input");return r.placeholder=e,r.type=t,r.className="jp-mod-styled jp-Input",r.style.marginBottom="10px",r}getValue(){return{repoUrl:this.repoUrlInput.value,targetDir:this.targetDirInput.value,username:this.usernameInput.value,password:this.passwordInput.value}}}const c=l}}]);