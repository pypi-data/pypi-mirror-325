{
  "manifest_version": "2",
  "task_list": [
    {
      "name": "FAIM IPA OME-Zarr Converter",
      "category": "Conversion",
      "modality": "HCS",
      "tags": [
        "Molecular Devices",
        "Image Xpress",
        "MD"
      ],
      "docs_info": "### Purpose\n- Converts **2D and 3D images from MD Molecular Devices** systems into OME-Zarr format, creating OME-Zarr HCS plates and combining all fields of view in a well into a single image.\n- Saves Fractal **region-of-interest (ROI) tables** for both individual fields of view and the entire well.\n- Handles overlapping fields of view by either fusing images or saving them in grid tiles (depending on the `tile_alignment` option).\n\n### Limitations\n- The `image_dir` needs to be set to the the parent folder containing the following sub-folders: YYYY-MM-DD / Project_ID / Actual image files (potentially in ZStep folders). If it is run directly from the folder containing the images, it will fail.\n",
      "executable_non_parallel": "convert_ome_zarr.py",
      "meta_non_parallel": {
        "cpus_per_task": 8,
        "mem": 32000
      },
      "args_schema_non_parallel": {
        "additionalProperties": false,
        "properties": {
          "zarr_urls": {
            "items": {
              "type": "string"
            },
            "title": "Zarr Urls",
            "type": "array",
            "description": "List of paths or urls to the individual OME-Zarr image to be processed. Not used by the converter task. (standard argument for Fractal tasks, managed by Fractal server)."
          },
          "zarr_dir": {
            "title": "Zarr Dir",
            "type": "string",
            "description": "path of the directory where the new OME-Zarrs will be created. (standard argument for Fractal tasks, managed by Fractal server)."
          },
          "image_dir": {
            "title": "Image Dir",
            "type": "string",
            "description": "Path to the folder containing the images to be converted."
          },
          "mode": {
            "enum": [
              "Stack Acquisition",
              "Single Plane Acquisition",
              "Mixed Acquisition"
            ],
            "title": "Mode",
            "type": "string",
            "description": "Choose conversion mode. Choose whether you have 3D data (StackAcquisition), 2D data (Single Plane Acquisition) or mixed (Mixed Acquisition)."
          },
          "zarr_name": {
            "default": "Plate",
            "title": "Zarr Name",
            "type": "string",
            "description": "Name of the zarr plate file that will be created"
          },
          "tile_alignment": {
            "default": "GridAlignment",
            "enum": [
              "StageAlignment",
              "GridAlignment"
            ],
            "title": "Tile Alignment",
            "type": "string",
            "description": "Choose whether tiles are placed into the OME-Zarr as a grid or whether they are placed based on the position of field of views in the metadata (using fusion for shared areas)."
          },
          "layout": {
            "default": 96,
            "enum": [
              96,
              384
            ],
            "title": "Layout",
            "type": "integer",
            "description": "Plate layout for the Zarr file. Valid options are 96 and 384"
          },
          "num_levels": {
            "default": 5,
            "title": "Num Levels",
            "type": "integer",
            "description": "Number of pyramid levels to build in an OME-Zarr. More levels are useful for large plates to allow easier plate visualization, but will also lead to more files being created."
          },
          "order_name": {
            "default": "example-order",
            "title": "Order Name",
            "type": "string",
            "description": "Name of the order"
          },
          "barcode": {
            "default": "example-barcode",
            "title": "Barcode",
            "type": "string",
            "description": "Barcode of the plate"
          },
          "overwrite": {
            "default": false,
            "title": "Overwrite",
            "type": "boolean",
            "description": "Whether to overwrite the zarr file if it already exists"
          },
          "binning": {
            "default": 1,
            "title": "Binning",
            "type": "integer",
            "description": "Binning factor to downsample the original image. If set to 2, an image that is 2x2 downsampled in xy will be produced."
          },
          "parallelize": {
            "default": true,
            "title": "Parallelize",
            "type": "boolean",
            "description": "The automatic distribute.Client option often fails to finish when running the task locally. Set parallelize to false to avoid that."
          }
        },
        "required": [
          "zarr_urls",
          "zarr_dir",
          "image_dir",
          "mode"
        ],
        "type": "object",
        "title": "ConvertOmeZarr"
      },
      "docs_link": "https://github.com/fractal-analytics-platform/fractal-faim-ipa"
    }
  ],
  "has_args_schemas": true,
  "args_schema_version": "pydantic_v2"
}
