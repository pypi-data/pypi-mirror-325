import{n as z,r as s,y as R,cq as I,z as U,j as u,bs as k,bF as H,bt as L,bc as B,bu as D,cs as j}from"./index.2EE80u0h.js";import{u as O}from"./uniqueId.BODM2vTk.js";import{u as _,a as q,b as K}from"./useOnInputChange.Ccjd55xn.js";import{a as A}from"./useBasicWidgetState.DQUiM2dz.js";import{I as G}from"./InputInstructions.CypmdrYz.js";import{I as N}from"./input.CxqdG-sh.js";import"./inputUtils.CQWz5UKz.js";import"./FormClearHelper.DpwWkrvV.js";import"./base-input.B5AcLp6p.js";const $=z("div",{target:"e1sommdr0"})(({width:e})=>({position:"relative",width:e}));function rt({disabled:e,element:t,widgetMgr:a,width:n,fragmentId:m}){var g;const[r,l]=s.useState(S(a,t)??null),[i,d]=s.useState(!1),W=s.useCallback(()=>{l(t.default??null),d(!0)},[t.default]),[y,c]=A({getStateFromWidgetMgr:S,getDefaultStateFromProto:w,getCurrStateFromProto:J,updateWidgetMgrState:Q,element:t,widgetMgr:a,fragmentId:m,onFormCleared:W});_(y,r,l,i);const[T,h]=s.useState(!1),o=R(),[b]=s.useState(()=>O("text_input_")),{placeholder:x,formId:f}=t,p=s.useCallback(()=>{d(!1),c({value:r,fromUi:!0})},[r,c]),C=I({formId:f})?a.allowFormEnterToSubmit(f):i,F=T&&n>o.breakpoints.hideWidgetDetails,V=s.useCallback(()=>{i&&p(),h(!1)},[i,p]),v=s.useCallback(()=>{h(!0)},[]),E=q({formId:t.formId,maxChars:t.maxChars,setDirty:d,setUiValue:l,setValueWithSource:c}),P=K(t.formId,p,i,a,m);return U($,{className:"stTextInput","data-testid":"stTextInput",width:n,children:[u(D,{label:t.label,disabled:e,labelVisibility:k((g=t.labelVisibility)==null?void 0:g.value),htmlFor:b,children:t.help&&u(H,{children:u(L,{content:t.help,placement:B.TOP_RIGHT})})}),u(N,{value:r??"",placeholder:x,onBlur:V,onFocus:v,onChange:E,onKeyPress:P,"aria-label":t.label,disabled:e,id:b,type:X(t),autoComplete:t.autocomplete,overrides:{Input:{style:{minWidth:0,"::placeholder":{opacity:"0.7"},lineHeight:o.lineHeights.inputWidget,paddingRight:o.spacing.sm,paddingLeft:o.spacing.sm,paddingBottom:o.spacing.sm,paddingTop:o.spacing.sm}},Root:{props:{"data-testid":"stTextInputRootElement"},style:{height:o.sizes.minElementHeight,borderLeftWidth:o.sizes.borderWidth,borderRightWidth:o.sizes.borderWidth,borderTopWidth:o.sizes.borderWidth,borderBottomWidth:o.sizes.borderWidth}}}}),F&&u(G,{dirty:i,value:r??"",maxLength:t.maxChars,inForm:I({formId:t.formId}),allowEnterToSubmit:C})]})}function S(e,t){return e.getStringValue(t)??null}function w(e){return e.default??null}function J(e){return e.value??null}function Q(e,t,a,n){t.setStringValue(e,a.value,{fromUi:a.fromUi},n)}function X(e){return e.type===j.Type.PASSWORD?"password":"text"}export{rt as default};
