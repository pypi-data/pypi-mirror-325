var Oe=Object.defineProperty;var ve=n=>{throw TypeError(n)};var De=(n,t,e)=>t in n?Oe(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var k=(n,t,e)=>De(n,typeof t!="symbol"?t+"":t,e),Zt=(n,t,e)=>t.has(n)||ve("Cannot "+e);var h=(n,t,e)=>(Zt(n,t,"read from private field"),e?e.call(n):t.get(n)),_=(n,t,e)=>t.has(n)?ve("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),W=(n,t,e,r)=>(Zt(n,t,"write to private field"),r?r.call(n,e):t.set(n,e),e),D=(n,t,e)=>(Zt(n,t,"access private method"),e);import{c as Ut}from"../chunks/dataset.DUSx8dem.js";import{e as y,g as v,p as F,f as T,S as pt,t as U,a as G,c as x,r as w,d as Ct,b as kt,u as re,q as te,s as S,aG as Et,aW as ne,w as j,ay as Rt}from"../chunks/index.Chpxrmiw.js";import{e as I,a as m,t as N,s as qt,b as st,g as Le}from"../chunks/legacy.BFrtrUTY.js";import{p,i as ot,r as q,a as Q,s as lt,l as oe}from"../chunks/index-client.D0CpKjVb.js";import{d as K,f as xt,l as ut,e as le,i as We,j as Jt,B as ge}from"../chunks/index.svelte_svelte_type_style_lang.oHDPoyLK.js";import{s as $}from"../chunks/render.Ar8LJN-r.js";import{u as wt,g as we,a as Fe,b as Nt,c as yt,d as R,m as St,e as Ge,f as Be,h as He,i as ae,A as ye,j as Se,k as Te,l as Ae,E as Re,H as Pe,C as Ve,I as de}from"../chunks/checkbox.DHBbG9-O.js";import{c as ct}from"../chunks/svelte-component.lYzHvHaE.js";import{r as ie}from"../chunks/routes.BJiwio4j.js";import{p as Ye}from"../chunks/stores.C2HJMxTK.js";function Ke(n){return n instanceof Element||n instanceof SVGElement}function me(){}function Pt(n,t,e,r){const o=Array.isArray(t)?t:[t];return o.forEach(a=>n.addEventListener(a,e,r)),()=>{o.forEach(a=>n.removeEventListener(a,e,r))}}function Xe(n,t){return n>=0&&n<t.length}const je="data-separator-root";var Z,ht,tt,et,Mt;class Ue{constructor(t){_(this,Z);_(this,ht);_(this,tt);_(this,et);_(this,Mt,y(()=>({id:h(this,Z).current,role:h(this,et).current?"none":"separator","aria-orientation":we(h(this,tt).current),"aria-hidden":Fe(h(this,et).current),"data-orientation":Nt(h(this,tt).current),[je]:""})));W(this,tt,t.orientation),W(this,et,t.decorative),W(this,Z,t.id),W(this,ht,t.ref),wt({id:h(this,Z),ref:h(this,ht)})}get props(){return v(h(this,Mt))}}Z=new WeakMap,ht=new WeakMap,tt=new WeakMap,et=new WeakMap,Mt=new WeakMap;function qe(n){return new Ue(n)}var Je=N("<div><!></div>");function $e(n,t){F(t,!0);let e=p(t,"id",19,yt),r=p(t,"ref",15,null),o=p(t,"decorative",3,!1),a=p(t,"orientation",3,"horizontal"),i=q(t,["$$slots","$$events","$$legacy","id","ref","child","children","decorative","orientation"]);const u=qe({ref:R.with(()=>r(),c=>r(c)),id:R.with(()=>e()),decorative:R.with(()=>o()),orientation:R.with(()=>a())}),s=y(()=>St(i,u.props));var l=I(),d=T(l);ot(d,()=>t.child,c=>{var f=I(),g=T(f);K(g,()=>t.child,()=>({props:v(s)})),m(c,f)},c=>{var f=Je();let g;var A=x(f);K(A,()=>t.children??pt),w(f),U(()=>g=xt(f,g,{...v(s)})),m(c,f)}),m(n,l),G()}const Qe="data-label-root";var ft,vt,zt;class Ze{constructor(t){_(this,ft);_(this,vt);_(this,zt,y(()=>({[Qe]:"",onmousedown:this.onmousedown})));W(this,ft,t.id),W(this,vt,t.ref),this.onmousedown=this.onmousedown.bind(this),wt({id:h(this,ft),ref:h(this,vt)})}onmousedown(t){t.detail>1&&t.preventDefault()}get props(){return v(h(this,zt))}}ft=new WeakMap,vt=new WeakMap,zt=new WeakMap;function tr(n){return new Ze(n)}var er=N("<label><!></label>");function rr(n,t){F(t,!0);let e=p(t,"id",19,yt),r=p(t,"ref",15,null),o=q(t,["$$slots","$$events","$$legacy","children","child","id","ref","for"]);const a=tr({id:R.with(()=>e()),ref:R.with(()=>r(),l=>r(l))}),i=y(()=>St(o,a.props,{for:t.for}));var u=I(),s=T(u);ot(s,()=>t.child,l=>{var d=I(),c=T(d);K(c,()=>t.child,()=>({props:v(i)})),m(l,d)},l=>{var d=er();let c;var f=x(d);K(f,()=>t.children??pt),w(d),U(()=>c=xt(d,c,{...v(i),for:t.for})),m(l,d)}),m(n,u),G()}function nr(n,t,e){const r={position:"absolute"};return n==="lr"?(r.left=`${t}%`,r.right=`${e}%`):n==="rl"?(r.right=`${t}%`,r.left=`${e}%`):n==="bt"?(r.bottom=`${t}%`,r.top=`${e}%`):(r.top=`${t}%`,r.bottom=`${e}%`),r}function ar(n,t){const e={position:"absolute"};return n==="lr"?(e.left=`${t}%`,e.translate="-50% 0"):n==="rl"?(e.right=`${t}%`,e.translate="50% 0"):n==="bt"?(e.bottom=`${t}%`,e.translate="0 50%"):(e.top=`${t}%`,e.translate="0 -50%"),e}function ir(n,t,e){const r={position:"absolute"};return n==="lr"?(r.left=`${t}%`,r.translate=`${e}% 0`):n==="rl"?(r.right=`${t}%`,r.translate=`${-e}% 0`):n==="bt"?(r.bottom=`${t}%`,r.translate=`0 ${-e}%`):(r.top=`${t}%`,r.translate=`0 ${e}%`),r}function ee(n,t,e,r){const o=(n-(Number.isNaN(t)?0:t))%r;let a=Math.abs(o)*2>=r?n+Math.sign(o)*(r-Math.abs(o)):n-o;Number.isNaN(t)?!Number.isNaN(e)&&a>e&&(a=Math.floor(e/r)*r):a<t?a=t:!Number.isNaN(e)&&a>e&&(a=t+Math.floor((e-t)/r)*r);const i=r.toString(),u=i.indexOf("."),s=u>=0?i.length-u:0;if(s>0){const l=10**s;a=Math.round(a*l)/l}return a}const sr="data-slider-root",be="data-slider-thumb",or="data-slider-range",lr="data-slider-tick";var gt,mt,bt,It,Ot,Dt,Lt,Wt,Ft,Gt,Bt,Ht;class dr{constructor(t){k(this,"id");k(this,"ref");k(this,"value");k(this,"disabled");k(this,"orientation");k(this,"min");k(this,"max");k(this,"step");k(this,"dir");k(this,"autoSort");_(this,gt,Ct(null));_(this,mt,Ct(!1));_(this,bt,Ct(0));_(this,It,y(()=>this.orientation.current==="horizontal"?this.dir.current==="rtl"?"rl":"lr":this.dir.current==="rtl"?"tb":"bt"));k(this,"onValueCommit");_(this,Ot,t=>{const e=this.getAllThumbs();if(!e.length)return;for(const i of e)i.blur();const r=e.map(i=>{if(this.orientation.current==="horizontal"){const{left:u,right:s}=i.getBoundingClientRect();return Math.abs(t.clientX-(u+s)/2)}else{const{top:u,bottom:s}=i.getBoundingClientRect();return Math.abs(t.clientY-(u+s)/2)}}),o=e[r.indexOf(Math.min(...r))],a=e.indexOf(o);return{node:o,idx:a}});k(this,"handlePointerMove",t=>{if(!this.isActive||this.disabled.current)return;t.preventDefault(),t.stopPropagation();const e=this.ref.current,r=this.activeThumb;if(!e||!r)return;r.node.focus();const{left:o,right:a,top:i,bottom:u}=e.getBoundingClientRect(),s=this.direction;s==="lr"?this.applyPosition({clientXY:t.clientX,activeThumbIdx:r.idx,start:o,end:a}):s==="rl"?this.applyPosition({clientXY:t.clientX,activeThumbIdx:r.idx,start:a,end:o}):s==="bt"?this.applyPosition({clientXY:t.clientY,activeThumbIdx:r.idx,start:u,end:i}):s==="tb"&&this.applyPosition({clientXY:t.clientY,activeThumbIdx:r.idx,start:i,end:u})});k(this,"handlePointerDown",t=>{if(t.button!==0||this.disabled.current)return;const e=this.ref.current,r=h(this,Ot).call(this,t);if(!r||!e)return;const o=t.target;!Ke(o)||!e.contains(o)||(t.preventDefault(),this.activeThumb=r,r.node.focus(),this.isActive=!0,this.handlePointerMove(t))});k(this,"handlePointerUp",()=>{this.disabled.current||(this.isActive&&this.onValueCommit.current(te(()=>this.value.current)),this.isActive=!1)});k(this,"getPositionFromValue",t=>{const e=this.min.current,r=this.max.current;return(t-e)/(r-e)*100});k(this,"getAllThumbs",()=>{const t=this.ref.current;return t?Array.from(t.querySelectorAll(`[${be}]`)):[]});k(this,"updateValue",(t,e)=>{const r=this.value.current;if(!r.length){this.value.current.push(t);return}if(r[e]===t)return;const a=[...r];if(!Xe(e,a))return;const i=a[e]>t?-1:1,u=()=>{var g;const c=e+i;a[e]=a[c],a[c]=t;const f=this.getAllThumbs();f.length&&((g=f[c])==null||g.focus(),this.activeThumb={node:f[c],idx:c})};if(this.autoSort.current&&(i===-1&&t<a[e-1]||i===1&&t>a[e+1])){u(),this.value.current=a;return}const s=this.min.current,l=this.max.current,d=this.step.current;a[e]=ee(t,s,l,d),this.value.current=a});_(this,Dt,y(()=>{const t=this.value.current;return Array.from({length:t.length||1},(e,r)=>{const o=te(()=>this.currentThumbIdx);o<t.length&&te(()=>{this.currentThumbIdx=o+1});const a=t[r],i=this.getPositionFromValue(a??0),u=ar(this.direction,i);return{role:"slider","aria-valuemin":this.min.current,"aria-valuemax":this.max.current,"aria-valuenow":a,"aria-disabled":He(this.disabled.current),"aria-orientation":we(this.orientation.current),"data-value":a,tabindex:this.disabled.current?-1:0,style:u,[be]:""}})}));_(this,Lt,y(()=>this.thumbsPropsArr.map((t,e)=>e)));_(this,Wt,y(()=>{const t=this.max.current,e=this.min.current,r=this.step.current,o=t-e;let a=Math.ceil(o/r);o%r==0&&(a+=1);const i=this.value.current;return Array.from({length:a},(u,s)=>{const l=s*(r/o)*100,d=s===0,c=s===a-1,f=d?0:c?-100:-50,g=ir(this.direction,l,f),A=e+s*r,b=i.length===1?A<=i[0]:i[0]<=A&&A<=i[i.length-1];return{"data-disabled":ae(this.disabled.current),"data-orientation":Nt(this.orientation.current),"data-bounded":b?"":void 0,"data-value":A,style:g,[lr]:""}})}));_(this,Ft,y(()=>this.ticksPropsArr.map((t,e)=>e)));_(this,Gt,y(()=>({ticks:this.ticksRenderArr,thumbs:this.thumbsRenderArr})));_(this,Bt,y(()=>{if(!this.disabled.current)return this.orientation.current==="horizontal"?"pan-y":"pan-x"}));_(this,Ht,y(()=>({id:this.id.current,"data-orientation":Nt(this.orientation.current),"data-disabled":ae(this.disabled.current),style:{touchAction:v(h(this,Bt))},[sr]:""})));this.id=t.id,this.ref=t.ref,this.disabled=t.disabled,this.orientation=t.orientation,this.min=t.min,this.max=t.max,this.step=t.step,this.dir=t.dir,this.autoSort=t.autoSort,this.value=t.value,this.onValueCommit=t.onValueCommit,wt({id:this.id,ref:this.ref}),re(()=>Be(Pt(document,"pointerdown",this.handlePointerDown),Pt(document,"pointerup",this.handlePointerUp),Pt(document,"pointermove",this.handlePointerMove),Pt(document,"pointerleave",this.handlePointerUp))),re(()=>{const e=this.step.current,r=this.min.current,o=this.max.current,a=this.value.current,i=s=>ee(s,r,o,e)===s,u=s=>ee(s,r,o,e);a.some(s=>!i(s))&&(this.value.current=a.map(u))})}get activeThumb(){return v(h(this,gt))}set activeThumb(t){kt(h(this,gt),Q(t))}get isActive(){return v(h(this,mt))}set isActive(t){kt(h(this,mt),Q(t))}get currentThumbIdx(){return v(h(this,bt))}set currentThumbIdx(t){kt(h(this,bt),Q(t))}get direction(){return v(h(this,It))}applyPosition({clientXY:t,activeThumbIdx:e,start:r,end:o}){const a=this.min.current,i=this.max.current,s=(t-r)/(o-r)*(i-a)+a;if(s<a)this.updateValue(a,e);else if(s>i)this.updateValue(i,e);else{const l=this.step.current,d=Math.floor((s-a)/l),c=a+d*l+l/2,f=a+(d+1)*l+l/2,g=s>=c&&s<f?(d+1)*l+a:d*l+a;g<=i&&this.updateValue(g,e)}}get thumbsPropsArr(){return v(h(this,Dt))}get thumbsRenderArr(){return v(h(this,Lt))}get ticksPropsArr(){return v(h(this,Wt))}get ticksRenderArr(){return v(h(this,Ft))}get snippetProps(){return v(h(this,Gt))}get props(){return v(h(this,Ht))}}gt=new WeakMap,mt=new WeakMap,bt=new WeakMap,It=new WeakMap,Ot=new WeakMap,Dt=new WeakMap,Lt=new WeakMap,Wt=new WeakMap,Ft=new WeakMap,Gt=new WeakMap,Bt=new WeakMap,Ht=new WeakMap;const cr=[Ae,Te,Se,ye,Pe,Re];var rt,_t,Y,Yt,Kt;class ur{constructor(t,e){_(this,rt);_(this,_t);_(this,Y);_(this,Yt,y(()=>{const t=h(this,Y).value.current,e=t.length>1?h(this,Y).getPositionFromValue(Math.min(...t)??0):0,r=100-h(this,Y).getPositionFromValue(Math.max(...t)??0);return{position:"absolute",...nr(h(this,Y).direction,e,r)}}));_(this,Kt,y(()=>({id:h(this,rt).current,"data-orientation":Nt(h(this,Y).orientation.current),"data-disabled":ae(h(this,Y).disabled.current),style:this.rangeStyles,[or]:""})));W(this,rt,t.id),W(this,_t,t.ref),W(this,Y,e),wt({id:h(this,rt),ref:h(this,_t)})}get rangeStyles(){return v(h(this,Yt))}get props(){return v(h(this,Kt))}}rt=new WeakMap,_t=new WeakMap,Y=new WeakMap,Yt=new WeakMap,Kt=new WeakMap;var nt,at,it,E,Xt,z,L,jt;class hr{constructor(t,e){_(this,z);_(this,nt);_(this,at);_(this,it);_(this,E);_(this,Xt,y(()=>h(this,E).disabled.current||h(this,E).disabled.current));_(this,jt,y(()=>({...h(this,E).thumbsPropsArr[h(this,it).current],id:h(this,nt).current,onkeydown:this.onkeydown})));W(this,nt,t.id),W(this,at,t.ref),W(this,E,e),W(this,it,t.index),wt({id:h(this,nt),ref:h(this,at)}),this.onkeydown=this.onkeydown.bind(this)}onkeydown(t){if(v(h(this,Xt)))return;const e=h(this,at).current;if(!e)return;const r=h(this,E).getAllThumbs();if(!r.length)return;const o=r.indexOf(e);if(h(this,E).currentThumbIdx=o,!cr.includes(t.key))return;t.preventDefault();const a=h(this,E).min.current,i=h(this,E).max.current,s=h(this,E).value.current[o],l=h(this,E).orientation.current,d=h(this,E).direction,c=h(this,E).step.current;switch(t.key){case Pe:D(this,z,L).call(this,a);break;case Re:D(this,z,L).call(this,i);break;case Ae:if(l!=="horizontal")break;if(t.metaKey){const f=d==="rl"?i:a;D(this,z,L).call(this,f)}else d==="rl"&&s<i?D(this,z,L).call(this,s+c):d==="lr"&&s>a&&D(this,z,L).call(this,s-c);break;case Te:if(l!=="horizontal")break;if(t.metaKey){const f=d==="rl"?a:i;D(this,z,L).call(this,f)}else d==="rl"&&s>a?D(this,z,L).call(this,s-c):d==="lr"&&s<i&&D(this,z,L).call(this,s+c);break;case Se:if(t.metaKey){const f=d==="tb"?a:i;D(this,z,L).call(this,f)}else d==="tb"&&s>a?D(this,z,L).call(this,s-c):d!=="tb"&&s<i&&D(this,z,L).call(this,s+c);break;case ye:if(t.metaKey){const f=d==="tb"?i:a;D(this,z,L).call(this,f)}else d==="tb"&&s<i?D(this,z,L).call(this,s+c):d!=="tb"&&s>a&&D(this,z,L).call(this,s-c);break}h(this,E).onValueCommit.current(h(this,E).value.current)}get props(){return v(h(this,jt))}}nt=new WeakMap,at=new WeakMap,it=new WeakMap,E=new WeakMap,Xt=new WeakMap,z=new WeakSet,L=function(t){h(this,E).updateValue(t,h(this,it).current)},jt=new WeakMap;const[fr,Ce]=Ge("Slider.Root");function vr(n){return fr(new dr(n))}function gr(n){return new ur(n,Ce())}function mr(n){return new hr(n,Ce())}var br=N("<span><!></span>");function _r(n,t){F(t,!0);let e=p(t,"id",19,yt),r=p(t,"ref",15,null),o=p(t,"value",31,()=>Q([])),a=p(t,"onValueChange",3,me),i=p(t,"onValueCommit",3,me),u=p(t,"disabled",3,!1),s=p(t,"min",3,0),l=p(t,"max",3,100),d=p(t,"step",3,1),c=p(t,"dir",3,"ltr"),f=p(t,"autoSort",3,!0),g=p(t,"orientation",3,"horizontal"),A=p(t,"controlledValue",3,!1),b=q(t,["$$slots","$$events","$$legacy","children","child","id","ref","value","onValueChange","onValueCommit","disabled","min","max","step","dir","autoSort","orientation","controlledValue"]);const C=vr({id:R.with(()=>e()),ref:R.with(()=>r(),P=>r(P)),value:R.with(()=>o(),P=>{A()||o(P),a()(P)}),onValueCommit:R.with(()=>i()),disabled:R.with(()=>u()),min:R.with(()=>s()),max:R.with(()=>l()),step:R.with(()=>d()),dir:R.with(()=>c()),autoSort:R.with(()=>f()),orientation:R.with(()=>g())}),M=y(()=>St(b,C.props));var O=I(),B=T(O);ot(B,()=>t.child,P=>{var V=I(),H=T(V);K(H,()=>t.child,()=>({props:v(M),...C.snippetProps})),m(P,V)},P=>{var V=br();let H;var X=x(V);K(X,()=>t.children??pt,()=>C.snippetProps),w(V),U(()=>H=xt(V,H,{...v(M)})),m(P,V)}),m(n,O),G()}var pr=N("<span><!></span>");function xr(n,t){F(t,!0);let e=p(t,"ref",15,null),r=p(t,"id",19,yt),o=q(t,["$$slots","$$events","$$legacy","children","child","ref","id"]);const a=gr({id:R.with(()=>r()),ref:R.with(()=>e(),l=>e(l))}),i=y(()=>St(o,a.props));var u=I(),s=T(u);ot(s,()=>t.child,l=>{var d=I(),c=T(d);K(c,()=>t.child,()=>({props:v(i)})),m(l,d)},l=>{var d=pr();let c;var f=x(d);K(f,()=>t.children??pt),w(d),U(()=>c=xt(d,c,{...v(i)})),m(l,d)}),m(n,u),G()}var wr=N("<span><!></span>");function yr(n,t){F(t,!0);let e=p(t,"ref",15,null),r=p(t,"id",19,yt),o=p(t,"disabled",3,!1),a=q(t,["$$slots","$$events","$$legacy","children","child","ref","id","index","disabled"]);const i=mr({id:R.with(()=>r()),ref:R.with(()=>e(),d=>e(d)),index:R.with(()=>t.index),disabled:R.with(()=>o())}),u=y(()=>St(a,i.props));var s=I(),l=T(s);ot(l,()=>t.child,d=>{var c=I(),f=T(c);K(f,()=>t.child,()=>({props:v(u)})),m(d,c)},d=>{var c=wr();let f;var g=x(c);K(g,()=>t.children??pt),w(c),U(()=>f=xt(c,f,{...v(u)})),m(d,c)}),m(n,s),G()}function ke(n,t){F(t,!0);let e=p(t,"ref",15,null),r=q(t,["$$slots","$$events","$$legacy","ref","class"]);var o=I(),a=T(o),i=y(()=>ut("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t.class));ct(a,()=>rr,(u,s)=>{s(u,lt({get ref(){return e()},set ref(l){e(l)},get class(){return v(i)}},()=>r))}),m(n,o),G()}var Sr=N(' <span class="text-sm text-gray-500"> </span>',1),Tr=N('<div class="flex items-center space-x-2 py-1"><!> <!></div>'),Ar=N('<h2 class="mb-2 text-lg font-semibold">Labels</h2> <!>',1);function Rr(n,t){F(t,!0);const e=qt(),r=()=>st(o(),"$annotations",e);let o=p(t,"annotations",19,()=>[]);var a=Ar(),i=S(T(a),2);le(i,1,r,({label_name:u,current_count:s,total_count:l,selected:d})=>u,(u,s)=>{let l=()=>v(s).label_name,d=()=>v(s).current_count,c=()=>v(s).total_count,f=()=>v(s).selected;var g=Tr(),A=x(g);Ve(A,{get id(){return l()},get checked(){return f()},"aria-labelledby":"terms-label",onCheckedChange:()=>t.onToggleAnnotation(l())});var b=S(A,2),C=y(()=>`${l()}-label`);ke(b,{get id(){return v(C)},get for(){return l()},class:"cursor-pointer text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ",children:(M,O)=>{Et();var B=Sr(),P=T(B),V=S(P),H=x(V);w(V),U(()=>{$(P,`${l()??""} `),$(H,`(${d()??""} of ${c()??""})`)}),m(M,B)},$$slots:{default:!0}}),w(g),m(u,g)}),m(n,a),G()}var Pr=N('<div class="disabled flex space-x-2 py-1"><!> <!></div>'),Vr=N("<p>No tag, create a tag</p>"),Cr=N('<h2 class="mb-2 text-lg font-semibold">Tags</h2> <!>',1);function kr(n,t){F(t,!0);const e=qt(),r=()=>st(t.tags,"$tags",e),o=()=>st(t.tagsSelected,"$tagsSelected",e),a=r()?r().filter(s=>t.gridType.includes(s.kind)):[];var i=Cr(),u=S(T(i),2);le(u,17,()=>a,s=>s.tag_id,(s,l)=>{var d=Pr();const c=y(()=>o().has(v(l).tag_id));var f=x(d),g=y(()=>`${v(l).tag_id}-label`);Ve(f,{get id(){return v(l).tag_id},get checked(){return v(c)},get"aria-labelledby"(){return v(g)},onCheckedChange:()=>t.tagSelectionToggle(v(l).tag_id)});var A=S(f,2),b=y(()=>`${v(l).tag_id}-label`);ke(A,{get id(){return v(b)},get for(){return v(l).tag_id},class:"cursor-pointer text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ",children:(C,M)=>{Et();var O=Le();U(()=>$(O,v(l).name)),m(C,O)},$$slots:{default:!0}}),w(d),m(s,d)},s=>{var l=Vr();m(s,l)}),m(n,i),G()}var Er=N('<span class="bg-secondary relative h-2 w-full grow overflow-hidden rounded-full"><!></span> <!>',1);function se(n,t){F(t,!0);let e=p(t,"ref",15,null),r=p(t,"value",31,()=>Q([0])),o=q(t,["$$slots","$$events","$$legacy","ref","value","class"]);var a=I(),i=T(a),u=y(()=>ut("relative flex w-full touch-none select-none items-center",t.class));ct(i,()=>_r,(s,l)=>{l(s,lt({get ref(){return e()},set ref(c){e(c)},get value(){return r()},set value(c){r(c)},get class(){return v(u)}},()=>o,{children:(c,f)=>{let g=()=>f==null?void 0:f().thumbs;var A=Er(),b=T(A),C=x(b);ct(C,()=>xr,(O,B)=>{B(O,{class:"bg-primary absolute h-full"})}),w(b);var M=S(b,2);le(M,17,g,We,(O,B)=>{var P=I(),V=T(P);ct(V,()=>yr,(H,X)=>{X(H,{get index(){return v(B)},class:"border-primary bg-background ring-offset-background focus-visible:ring-ring block size-5 rounded-full border-2 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})}),m(O,P)}),m(c,A)},$$slots:{default:!0}}))}),m(n,a),G()}function Nr(n,t){const e=oe(t,["children","$$slots","$$events","$$legacy"]);de(n,lt({name:"component"},()=>e,{iconNode:[["path",{d:"M15.536 11.293a1 1 0 0 0 0 1.414l2.376 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z"}],["path",{d:"M2.297 11.293a1 1 0 0 0 0 1.414l2.377 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414L6.088 8.916a1 1 0 0 0-1.414 0z"}],["path",{d:"M8.916 17.912a1 1 0 0 0 0 1.415l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.415l-2.377-2.376a1 1 0 0 0-1.414 0z"}],["path",{d:"M8.916 4.674a1 1 0 0 0 0 1.414l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z"}]],children:(o,a)=>{var i=I(),u=T(i);Jt(u,t,"default",{},null),m(o,i)},$$slots:{default:!0}}))}function Mr(n,t){const e=oe(t,["children","$$slots","$$events","$$legacy"]);de(n,lt({name:"grid-3x3"},()=>e,{iconNode:[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M3 9h18"}],["path",{d:"M3 15h18"}],["path",{d:"M9 3v18"}],["path",{d:"M15 3v18"}]],children:(o,a)=>{var i=I(),u=T(i);Jt(u,t,"default",{},null),m(o,i)},$$slots:{default:!0}}))}function Ee(n,t){const e=oe(t,["children","$$slots","$$events","$$legacy"]);de(n,lt({name:"image"},()=>e,{iconNode:[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["circle",{cx:"9",cy:"9",r:"2"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"}]],children:(o,a)=>{var i=I(),u=T(i);Jt(u,t,"default",{},null),m(o,i)},$$slots:{default:!0}}))}var zr=N('<div class="w-300 flex space-x-4"><!> <!> <!></div>');function Ir(n,t){F(t,!0);const e=p(t,"min",3,100),r=p(t,"max",3,1500);var o=zr(),a=x(o);Mr(a,{class:"h-6 w-6"});var i=S(a,2),u=y(()=>[t.width]);se(i,{class:"w-full flex-1",get value(){return v(u)},get min(){return e()},get max(){return r()},step:1,onValueChange:l=>t.onChange(l[0])});var s=S(i,2);Ee(s,{class:"h-6 w-6"}),w(o),m(n,o),G()}var Or=N('<div class="space-y-6"><div class="space-y-2"><h2 class="text-lg font-semibold">Width Filter</h2> <div class="flex justify-between text-sm text-gray-600"><span> </span> <span> </span></div> <div class="relative p-2"><!></div></div> <div class="space-y-2"><h2 class="text-lg font-semibold">Height Filter</h2> <div class="flex justify-between text-sm text-gray-600"><span> </span> <span> </span></div> <div class="relative p-2"><!></div></div></div>');function Dr(n,t){F(t,!0);const e=qt(),r=()=>st(t.dimensions,"$dimensions",e),{min_width:o,max_width:a,min_height:i,max_height:u}=r(),s=J=>{t.onChange({min_width:J[0],max_width:J[1],min_height:i,max_height:u})},l=J=>{t.onChange({min_width:o,max_width:a,min_height:J[0],max_height:J[1]})};var d=Or(),c=x(d),f=S(x(c),2),g=x(f),A=x(g);w(g);var b=S(g,2),C=x(b);w(b),w(f);var M=S(f,2),O=x(M);se(O,{class:"filter-width",min:o,max:a,value:[o,a],onValueChange:s}),w(M),w(c);var B=S(c,2),P=S(x(B),2),V=x(P),H=x(V);w(V);var X=S(V,2),dt=x(X);w(X),w(P);var Tt=S(P,2),At=x(Tt);se(At,{class:"filter-height",min:i,max:u,value:[i,u],onValueChange:l}),w(Tt),w(B),w(d),U(()=>{$(A,`${r().min_width??""}px`),$(C,`${r().max_width??""}px`),$(H,`${r().min_height??""}px`),$(dt,`${r().max_height??""}px`)}),m(n,d),G()}var Lr=N("<!> Samples",1),Wr=N("<!> Annotations",1),Fr=N('<div class="mb-2 text-lg font-semibold">Collections:</div> <div class="flex"><!> <!></div>',1);function Gr(n,t){F(t,!0);var e=Fr(),r=S(T(e),2),o=x(r),a=y(()=>ut("flex-1","px-2",t.gridType=="samples"&&"inline-flex rounded-md bg-muted")),i=y(()=>ie.toSamples(t.datasetId));ge(o,{variant:"ghost",get class(){return v(a)},get href(){return v(i)},"data-sveltekit-noscroll":!0,children:(d,c)=>{var f=Lr(),g=T(f);Ee(g,{class:"size-4"}),Et(),m(d,f)},$$slots:{default:!0}});var u=S(o,2),s=y(()=>ut("flex-1","px-2",t.gridType=="annotations"&&"inline-flex rounded-md bg-muted")),l=y(()=>ie.toAnnotations(t.datasetId));ge(u,{get class(){return v(s)},variant:"ghost",get href(){return v(l)},"data-sveltekit-noscroll":!0,children:(d,c)=>{var f=Wr(),g=T(f);Nr(g,{class:"size-4"}),Et(),m(d,f)},$$slots:{default:!0}}),w(r),m(n,e),G()}const _e=async({dataset_id:n,filtered_labels:t,dimensions:e})=>{const r={data:[],error:void 0};try{const o=await Ut.GET("/api/annotations/count",{params:{query:{dataset_id:n,...t&&{filtered_labels:t},...(e==null?void 0:e.min_width)&&{min_width:e.min_width},...(e==null?void 0:e.max_width)&&{max_width:e.max_width},...(e==null?void 0:e.min_height)&&{min_height:e.min_height},...(e==null?void 0:e.max_height)&&{max_height:e.max_height}}}});if(o.error)throw new Error(JSON.stringify(o.error,null,2));if(!o.data)throw new Error("No annotation counts found");r.data=o.data.map(a=>({label_name:a.label_name,total_count:a.total_count,current_count:a.current_count}))}catch(o){r.error="Error loading annotation counts: "+String(o)}return r},Br=async({dataset_id:n,annotation_labels:t})=>{const e={data:{min_width:0,max_width:0,min_height:0,max_height:0},error:void 0};try{const r=await Ut.GET("/api/samples/dimensions",{params:{query:{dataset_id:n,annotation_labels:t}}});if(r.error)throw new Error(JSON.stringify(r.error,null,2));if(!r.data)throw new Error("No dimension bounds data");e.data=r.data}catch(r){e.error="Error loading dimension bounds: "+String(r)}return e},Hr=async()=>{const n={data:[],error:void 0};try{const t=await Ut.GET("/api/annotation_labels");t.data&&(n.data=t.data)}catch(t){n.error="Error loading annotation labels: "+String(t)}return n},Yr=async({dataset_id:n})=>{const t={data:void 0,error:void 0};try{const e=await Ut.GET("/api/datasets/{dataset_id}/tags",{params:{path:{dataset_id:n}}});if(e.error)throw new Error(JSON.stringify(e.error,null,2));if(!e.data)throw new Error("No data");t.data=e.data}catch(e){t.error="Error loading tags: "+String(e)}return t},Kr=async n=>{const t=j([]),e=j(new Set),r=n?await Yr({dataset_id:n}):null;r&&r.data&&t.set(r.data);const o=a=>{e.update(i=>(i.has(a)?i.delete(a):i.add(a),new Set([...i])))};return{tags:ne(t),tagsSelected:ne(e),tagSelectionToggle:o}};function Xr(){const n=j({width:300,height:Math.round(185.41409147095177)});return{sampleSize:n,updateWidth:e=>{n.set({width:e,height:Math.round(e/1.618)})}}}const pe=(n,t)=>n.map(e=>({...e,selected:t.includes(e.label_name)})),xe=n=>t=>t.includes(n)?t.filter(e=>e!==n):[...t,n],jr=async({params:{dataset_id:n}})=>{const t=j({min_width:0,max_width:0,min_height:0,max_height:0}),e=j([]),r=j([]),o=j([]),a=j(void 0),[i,u,s]=await Promise.all([Hr().then(b=>b.data.reduce((C,M)=>({...C,[M.annotation_label_name]:M.annotation_label_id}),{})),Br({dataset_id:n}).then(({data:b})=>b),Kr(n??void 0),_e({dataset_id:n}).then(({data:b})=>{b&&o.set(pe(b,Rt(e)))})]),{tags:l,tagsSelected:d,tagSelectionToggle:c}=s;t.set(u);const f=async()=>{try{const b=Rt(e),C=await _e({dataset_id:n,filtered_labels:b.length>0?b:void 0,dimensions:Rt(t)});o.update(()=>pe(C.data||[],b))}catch(b){a.set(`Failed to load annotations: ${String(b)}`)}},g=b=>{b&&(t.set(b),f())};return{datasetId:n,annotations:o,toggleAnnotationSelection:b=>{e.update(xe(b)),r.update(xe(i[b])),f()},annotationLabels:i,selectedAnnotations:e,selectedAnnotationsIds:r,tags:l,tagSelectionToggle:c,tagsSelected:d,dimensions:ne(t),updateDimensions:g,error:Rt(a),sampleSize:Xr()}},on=Object.freeze(Object.defineProperty({__proto__:null,load:jr},Symbol.toStringTag,{value:"Module"}));function Vt(n,t){F(t,!0);let e=p(t,"ref",15,null),r=p(t,"orientation",3,"horizontal"),o=q(t,["$$slots","$$events","$$legacy","ref","class","orientation"]);var a=I(),i=T(a),u=y(()=>ut("bg-border shrink-0",r()==="horizontal"?"h-[1px] w-full":"min-h-full w-[1px]",t.class));ct(i,()=>$e,(s,l)=>{l(s,lt({get ref(){return e()},set ref(d){e(d)},get class(){return v(u)},get orientation(){return r()}},()=>o))}),m(n,a),G()}var Ur=N('<div class="flex h-full"><div class="border-grey-200 space-y-6 border-r p-4"><div><!></div> <!> <div><!></div> <!> <div><!></div> <!> <!></div> <div class="flex1 flex flex-grow flex-col space-y-4 p-4"><div class="flex items-center space-x-4"><div class="flex-1"><h1 class="text-lg font-semibold"></h1></div> <div class="w-4/12 px-4"><!></div></div> <!> <div class="samples-content flex flex-1 py-6"><!></div></div></div>');function ln(n,t){F(t,!0);const e=qt(),r=()=>st(Ye,"$page",e),o=()=>st(b,"$bonndedSampleSize",e);let a=r().params.dataset_id;const{dimensions:i,updateDimensions:u,annotations:s,tags:l,tagsSelected:d,tagSelectionToggle:c,toggleAnnotationSelection:f,sampleSize:g}=t.data;let A=Ct("samples");re(()=>{kt(A,Q(r().url.pathname===ie.toAnnotations(a)?"annotations":"samples"))});const b=g.sampleSize;var C=Ur(),M=x(C),O=x(M),B=x(O);Gr(B,{datasetId:a,get gridType(){return v(A)}}),w(O);var P=S(O,2);Vt(P,{});var V=S(P,2),H=x(V);kr(H,{tags:l,tagsSelected:d,tagSelectionToggle:c,get gridType(){return v(A)}}),w(V);var X=S(V,2);Vt(X,{});var dt=S(X,2),Tt=x(dt);Rr(Tt,{annotations:s,onToggleAnnotation:f}),w(dt);var At=S(dt,2);Vt(At,{});var J=S(At,2);ot(J,()=>i,Ie=>{Dr(Ie,{dimensions:i,onChange:u})}),w(M);var ce=S(M,2),$t=x(ce),Qt=x($t),Ne=x(Qt);Ne.textContent=`Dataset: ${a??""}`,w(Qt);var ue=S(Qt,2),Me=x(ue);Ir(Me,{get width(){return o().width},get onChange(){return g.updateWidth}}),w(ue),w($t);var he=S($t,2);Vt(he,{});var fe=S(he,2),ze=x(fe);Jt(ze,t,"default",{},null),w(fe),w(ce),w(C),m(n,C),G()}export{ln as component,on as universal};
