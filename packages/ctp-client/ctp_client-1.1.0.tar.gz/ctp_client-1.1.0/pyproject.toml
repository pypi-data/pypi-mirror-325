[build-system]
requires = ["hatchling", "versioningit"]
build-backend = "hatchling.build"

[project]
name = "ctp-client"
dynamic = ["version"]
description = "ctp-client is a Python client for [Clinical Trials Processor](https://mircwiki.rsna.org/index.php?title=MIRC_CTP)."
readme = "README.md"
license = {text = "Apache 2.0"}
classifiers = [
    "Development Status :: 4 - Beta",
    "Intended Audience :: Developers",
    "Intended Audience :: Education",
    "Intended Audience :: Healthcare Industry",
    "Intended Audience :: Information Technology",
    "Intended Audience :: Science/Research",
    "License :: OSI Approved :: Apache Software License",
    "Natural Language :: English",
    "Operating System :: OS Independent",
    "Programming Language :: Python :: 3 :: Only",
    "Programming Language :: Python :: 3.9",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Topic :: Scientific/Engineering :: Information Analysis",
    "Topic :: System :: Logging",
    "Topic :: Utilities",
]
requires-python = ">= 3.9"
dependencies = [
    "beautifulsoup4==4.12.3",
    "click-log==0.4.0",
    "click-loglevel==0.5.1",
    "click==8.1.3",
    "pydantic==2.10.3",
    "PyYAML==6.0.2",
    "requests>=2.22.0",
    "tabulate==0.9.0",
]

[[project.authors]]
name = "BIGR Imaging Infrastructure Group"
email = "imaging.infrastructure@erasmusmc.nl"

[project.scripts]
ctpy = "ctpy.cli:cli"

[project.urls]
"CI/CD" = "https://gitlab.com/radiology/infrastructure/data-curation-tools/ctp-client/-/pipelines"
Changelog = "https://ctp-client.readthedocs.io/en/latest/changelog.html"
Documentation = "https://ctp-client.readthedocs.io"
Download = "https://gitlab.com/radiology/infrastructure/data-curation-tools/ctp-client/-/archive/master/ctp-client-master.zip"
Homepage = "https://gitlab.com/radiology/infrastructure/data-curation-tools/ctp-client.git"
Issues = "https://gitlab.com/radiology/infrastructure/data-curation-tools/ctp-client/-/issues"

[tool.hatch.version]
source = "versioningit"

[tool.hatch.version.format]
distance = "{base_version}.post{distance}.dev0"

[tool.hatch.version.write]
file = 'ctpy/version.py'
template = """
# This file is automatically generated by versioningit during build stage. Do not edit it manually.
# Configuration is stored in the pyproject.toml file.

version = '{version}'
version_tuple = {version_tuple}
base_version = '{base_version}'  # Latest released version known at build time
git_revision = '{rev}'
git_revision_full = '{revision}'
git_branch = '{branch}'
git_revision_date = '{author_date:%Y-%m-%dT%H:%M:%S}'
build_date = '{build_date:%Y-%m-%dT%H:%M:%S}'
"""

[tool.hatch.build]
artifacts = ["ctpy/version.py"]

[tool.hatch.build.targets.sdist]
include = [
    "/ctpy",
]

[tool.hatch.build.targets.wheel]
  packages = ["/ctpy"]

[tool.hatch.envs.hatch-test]
  default-args = ["ctpy", "-vv"]
  extra-dependencies = [
    "pytest-cov>=4.0.0",
    "pytest-mock>=3.10.0",
    "requests-mock>=1.10.0",
  ]
