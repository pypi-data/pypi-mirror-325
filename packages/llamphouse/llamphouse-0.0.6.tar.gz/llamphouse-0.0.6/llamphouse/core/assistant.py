from typing import List, Optional
from abc import ABC, abstractmethod
import uuid
from .context import Context

class Assistant(ABC):
    def __init__(
        self, 
        model: str, 
        id: Optional[str] = str(uuid.uuid4()),
        name: Optional[str] = None, 
        description: Optional[str] = None, 
        temperature: Optional[float] = 0.7, 
        top_p: Optional[float] = 1.0, 
        instructions: Optional[str] = None,
        tools: Optional[List[str]] = None
    ):
        self.model = model
        self.id = id or str(uuid.uuid4())
        self.object = "assistant"
        self.name = name
        self.description = description
        self.temperature = temperature
        self.top_p = top_p
        self.instructions = instructions
        self.tools = tools or []

    @abstractmethod
    async def run(self, context: Context):
        """
        Abstract method that defines the assistant's behavior.
        This should be overridden by subclasses to process the messages and threads.

        :param thread_id: The ID of the thread to run.
        :param messages: The list of messages for the assistant to process.
        :return: A response generated by the assistant.
        """
        pass