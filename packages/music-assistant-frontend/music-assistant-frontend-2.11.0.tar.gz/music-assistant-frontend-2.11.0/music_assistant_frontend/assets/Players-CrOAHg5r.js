import{x as I,aA as R,r as T,I as a,ah as Y,b as D,c as F,P,w as G,y as o,D as h,n as r,A as n,S as k,J as d,F as O,E as S,z as u,G as m,B as A,K as x,a4 as z,aV as U}from"./index-Dvn4b3kE.js";import{_ as X}from"./ProviderIcon.vue_vue_type_style_index_0_lang-CxRRSRNY.js";import{B as E,L as j}from"./ListItem-CqruFv9t.js";import{C as q}from"./Container-DWavih6c.js";import{e as C}from"./eventbus-CGRXT3Tn.js";import{V as J}from"./VToolbar-Bi9Fkevh.js";import{v as K,w as V}from"./VListItem-XlHdRn90.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VContainer-C3X0IHcx.js";/* empty css              */const H={style:{"margin-bottom":"10px"}},Q={class:"line-clamp-1"},W={class:"line-clamp-1"},ce=I({__name:"Players",setup(Z){const c=R(),l=T([]),B=a.subscribe_multi([Y.PLAYER_CONFIG_UPDATED],()=>{_()});D(B),F(()=>Object.values(a.players).filter(e=>{var t;return e.available&&((t=a.getProvider(e.provider))==null?void 0:t.supported_features.includes(P.SYNC_PLAYERS))}));const _=async function(){l.value=(await a.getPlayerConfigs()).sort((e,t)=>p(e).localeCompare(p(t)))},M=function(e){a.removePlayerConfig(e),l.value=l.value.filter(t=>t.player_id!=e)},v=function(e,t){a.getProvider(t)&&c.push(`/settings/editplayer/${e}`)},N=function(e){c.push(`/settings/editplayer/${e}/dsp`)},$=function(e){c.push("/settings/addgroup")},w=function(e){e.enabled=!e.enabled,a.savePlayerConfig(e.player_id,{enabled:e.enabled})},p=function(e){var t;return e.name||((t=a.players[e.player_id])==null?void 0:t.display_name)||e.default_name||e.player_id},L=function(e,t){var s,b,y,f;const i=[{label:"settings.configure",labelArgs:[],action:()=>{v(t.player_id,t.provider)},icon:"mdi-cog",disabled:!a.getProvider(t.provider)},{label:"open_dsp_settings",labelArgs:[],action:()=>{N(t.player_id)},icon:"mdi-equalizer",hide:((s=a.players[t.player_id])==null?void 0:s.type)===z.GROUP},{label:t.enabled?"settings.disable":"settings.enable",labelArgs:[],action:()=>{w(t)},icon:"mdi-cancel",hide:!a.getProvider(t.provider)},{label:"settings.documentation",labelArgs:[],action:()=>{var g;U(((g=a.getProviderManifest(t.provider))==null?void 0:g.documentation)||"")},icon:"mdi-bookshelf",disabled:!((b=a.getProviderManifest(t.provider))!=null&&b.documentation)},{label:"settings.delete",labelArgs:[],action:()=>{M(t.player_id)},icon:"mdi-delete",hide:!(!((y=a.players[t.player_id])!=null&&y.available)||(f=a.getProvider(t.provider))!=null&&f.supported_features.includes(P.REMOVE_PLAYER))}];C.emit("contextmenu",{items:i,posX:e.clientX,posY:e.clientY})};return G(()=>a.players,e=>{e&&_()},{immediate:!0}),(e,t)=>(o(),h("div",H,[r(J,{density:"compact",class:"titlebar",color:"transparent",style:{height:"55px"}},{title:n(()=>[k(d(e.$t("settings.players")),1)]),append:n(()=>[r(K,{color:"accent",variant:"outlined",onClick:$},{default:n(()=>[k(d(e.$t("settings.add_group_player")),1)]),_:1})]),_:1}),r(q,null,{default:n(()=>[(o(!0),h(O,null,S(l.value,i=>(o(),u(j,{key:i.player_id,"show-menu-btn":"",link:"",onMenu:s=>L(s,i),onClick:s=>v(i.player_id,i.provider)},{prepend:n(()=>{var s;return[r(X,{domain:((s=m(a).getProviderManifest(i.provider))==null?void 0:s.domain)||"",size:40,class:"listitem-media-thumb"},null,8,["domain"])]}),title:n(()=>[A("div",Q,d(p(i)),1)]),subtitle:n(()=>{var s;return[A("div",W,d(((s=m(a).getProviderManifest(i.provider))==null?void 0:s.name)||i.provider),1)]}),append:n(()=>{var s;return[i.enabled?(s=m(a).players[i.player_id])!=null&&s.available?x("",!0):(o(),u(E,{key:1,icon:"",title:e.$t("settings.player_not_available")},{default:n(()=>[r(V,{icon:"mdi-timer-sand"})]),_:1},8,["title"])):(o(),u(E,{key:0,icon:"",title:e.$t("settings.player_disabled")},{default:n(()=>[r(V,{icon:"mdi-cancel"})]),_:1},8,["title"]))]}),_:2},1032,["onMenu","onClick"]))),128))]),_:1})]))}});export{ce as default};
