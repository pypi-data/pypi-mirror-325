import{B as le,L as Ya}from"./ListItem-CqruFv9t.js";import{s as ye,c as $,a as qe,o as ze,w as te,b as Ze,C as xa,u as Oe,d as ma,e as Xa,p as me,m as Ga,f as Je,g as ve,h as ft,i as it,t as ee,j as ht,k as ot,r as A,l as _t,n as c,q as j,T as ja,F as x,v as va,x as F,y as d,z as V,A as y,B as M,D as g,E as ie,G as e,H as t,I as w,M as he,P as Zt,$ as Ue,J as I,K as C,L as Ka,N as Za,O as Ja,Q as pa,R as X,S as N,U as tt,V as dt,W as ct,X as at,Y as G,Z as Be,_ as Z,a0 as we,a1 as _e,a2 as se,a3 as ue,a4 as fe,a5 as lt,a6 as ya,a7 as fa,a8 as el,a9 as tl,aa as ha,ab as al,ac as _a,ad as ll,ae as il,af as ol,ag as Ye,ah as sl,ai as st,aj as nl,ak as Jt,al as ga,am as ba,an as rl,ao as ul,ap as ea,aq as dl,ar as cl,as as ml}from"./index-Dvn4b3kE.js";import{D as vl}from"./constants-BXWEQHoz.js";import{m as gt,a as Se,b as bt,c as wt,d as Ae,u as kt,e as xe,f as Pt,g as Ct,h as pl,t as yl,i as pe,V as Ve,j as fl,k as ce,l as hl,n as _l,o as wa,p as gl,q as ka,r as Pa,s as bl,v as ke,w as U,x as wl,y as kl,z as Pl,A as Cl,M as Il,B as Vl,C as $l}from"./VListItem-XlHdRn90.js";import{u as nt,V as Xe,a as $e}from"./VList-BFxH2oe3.js";import{m as Sl,u as Ca,a as Ql,V as It,f as Tl,b as Ml,s as Bl,c as El,d as ql,e as Ia}from"./VMenu-BxZEtUbH.js";import{m as Vt,u as $t,a as zl,b as Al,c as Ll}from"./layout-BesXh2w9.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{M as Ee,_ as Rl,i as Ge,a as mt,b as Va,g as ta}from"./ItemContextMenu.vue_vue_type_style_index_0_scoped_3a9a25e3_lang-C3noc3qK.js";import{_ as rt}from"./ProviderIcon.vue_vue_type_style_index_0_lang-CxRRSRNY.js";import{e as Ie}from"./eventbus-CGRXT3Tn.js";import{T as Wl,V as vt}from"./Toolbar-XsObLWPI.js";import{V as je}from"./VCard-DDEjK8sh.js";import{V as $a}from"./VDialog-CHkPjb9d.js";import{V as Hl,a as Dl}from"./VInfiniteScroll-DgELJAW0.js";import{V as Sa}from"./VSlider-D6_NZN0T.js";import{M as re,a as pt}from"./marquee_text_sync-BDoUCDrB.js";import{V as Nl}from"./VToolbar-Bi9Fkevh.js";import{V as Fe,a as be}from"./VCardText-CXkKR7ML.js";import{m as Ul,V as aa}from"./VChip-BKGA7XXZ.js";import{V as Fl}from"./VVirtualScroll-DezxvIhI.js";import{V as Ol}from"./VCheckbox-DXoKCkvo.js";import{V as la,a as ia,b as oa,c as Yl}from"./VExpansionPanels-CRDFiEUd.js";import"./VCheckboxBtn-B2R62I44.js";const xl=""+new URL("icon-iUF3LVzp.png",import.meta.url).href;function Xl(a){let{rootEl:i,isSticky:s,layoutItemStyles:o}=a;const n=ye(!1),l=ye(0),u=$(()=>{const p=typeof n.value=="boolean"?"top":n.value;return[s.value?{top:"auto",bottom:"auto",height:void 0}:void 0,n.value?{[p]:qe(l.value)}:{top:o.value.top}]});ze(()=>{te(s,p=>{p?window.addEventListener("scroll",r,{passive:!0}):window.removeEventListener("scroll",r)},{immediate:!0})}),Ze(()=>{window.removeEventListener("scroll",r)});let f=0;function r(){const p=f>window.scrollY?"up":"down",m=i.value.getBoundingClientRect(),h=parseFloat(o.value.top??0),v=window.scrollY-Math.max(0,l.value-h),_=m.height+Math.max(l.value,h)-window.scrollY-window.innerHeight,b=parseFloat(getComputedStyle(i.value).getPropertyValue("--v-body-scroll-y"))||0;m.height<window.innerHeight-h?(n.value="top",l.value=h):p==="up"&&n.value==="bottom"||p==="down"&&n.value==="top"?(l.value=window.scrollY+m.top-b,n.value=!0):p==="down"&&_<=0?(l.value=0,n.value="bottom"):p==="up"&&v<=0&&(b?n.value!=="top"&&(l.value=-v+b+h,n.value="top"):(l.value=m.top+v,n.value="top")),f=window.scrollY}return{isStuck:n,stickyStyles:u}}const Gl=100,jl=20;function sa(a){return(a<0?-1:1)*Math.sqrt(Math.abs(a))*1.41421356237}function na(a){if(a.length<2)return 0;if(a.length===2)return a[1].t===a[0].t?0:(a[1].d-a[0].d)/(a[1].t-a[0].t);let i=0;for(let s=a.length-1;s>0;s--){if(a[s].t===a[s-1].t)continue;const o=sa(i),n=(a[s].d-a[s-1].d)/(a[s].t-a[s-1].t);i+=(n-o)*Math.abs(n),s===a.length-1&&(i*=.5)}return sa(i)*1e3}function Kl(){const a={};function i(n){Array.from(n.changedTouches).forEach(l=>{(a[l.identifier]??(a[l.identifier]=new xa(jl))).push([n.timeStamp,l])})}function s(n){Array.from(n.changedTouches).forEach(l=>{delete a[l.identifier]})}function o(n){var p;const l=(p=a[n])==null?void 0:p.values().reverse();if(!l)throw new Error(`No samples for touch id ${n}`);const u=l[0],f=[],r=[];for(const m of l){if(u[0]-m[0]>Gl)break;f.push({t:m[0],d:m[1].clientX}),r.push({t:m[0],d:m[1].clientY})}return{x:na(f),y:na(r),get direction(){const{x:m,y:h}=this,[v,_]=[Math.abs(m),Math.abs(h)];return v>_&&m>=0?"right":v>_&&m<=0?"left":_>v&&h>=0?"down":_>v&&h<=0?"up":Zl()}}}return{addMovement:i,endTouch:s,getVelocity:o}}function Zl(){throw new Error}function Jl(a){let{el:i,isActive:s,isTemporary:o,width:n,touchless:l,position:u}=a;ze(()=>{window.addEventListener("touchstart",W,{passive:!0}),window.addEventListener("touchmove",D,{passive:!1}),window.addEventListener("touchend",z,{passive:!0})}),Ze(()=>{window.removeEventListener("touchstart",W),window.removeEventListener("touchmove",D),window.removeEventListener("touchend",z)});const f=$(()=>["left","right"].includes(u.value)),{addMovement:r,endTouch:p,getVelocity:m}=Kl();let h=!1;const v=ye(!1),_=ye(0),b=ye(0);let S;function L(B,E){return(u.value==="left"?B:u.value==="right"?document.documentElement.clientWidth-B:u.value==="top"?B:u.value==="bottom"?document.documentElement.clientHeight-B:Me())-(E?n.value:0)}function q(B){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const k=u.value==="left"?(B-b.value)/n.value:u.value==="right"?(document.documentElement.clientWidth-B-b.value)/n.value:u.value==="top"?(B-b.value)/n.value:u.value==="bottom"?(document.documentElement.clientHeight-B-b.value)/n.value:Me();return E?Math.max(0,Math.min(1,k)):k}function W(B){if(l.value)return;const E=B.changedTouches[0].clientX,k=B.changedTouches[0].clientY,P=25,Q=u.value==="left"?E<P:u.value==="right"?E>document.documentElement.clientWidth-P:u.value==="top"?k<P:u.value==="bottom"?k>document.documentElement.clientHeight-P:Me(),R=s.value&&(u.value==="left"?E<n.value:u.value==="right"?E>document.documentElement.clientWidth-n.value:u.value==="top"?k<n.value:u.value==="bottom"?k>document.documentElement.clientHeight-n.value:Me());(Q||R||s.value&&o.value)&&(S=[E,k],b.value=L(f.value?E:k,s.value),_.value=q(f.value?E:k),h=b.value>-20&&b.value<80,p(B),r(B))}function D(B){const E=B.changedTouches[0].clientX,k=B.changedTouches[0].clientY;if(h){if(!B.cancelable){h=!1;return}const Q=Math.abs(E-S[0]),R=Math.abs(k-S[1]);(f.value?Q>R&&Q>3:R>Q&&R>3)?(v.value=!0,h=!1):(f.value?R:Q)>3&&(h=!1)}if(!v.value)return;B.preventDefault(),r(B);const P=q(f.value?E:k,!1);_.value=Math.max(0,Math.min(1,P)),P>1?b.value=L(f.value?E:k,!0):P<0&&(b.value=L(f.value?E:k,!1))}function z(B){if(h=!1,!v.value)return;r(B),v.value=!1;const E=m(B.changedTouches[0].identifier),k=Math.abs(E.x),P=Math.abs(E.y);(f.value?k>P&&k>400:P>k&&P>3)?s.value=E.direction===({left:"right",right:"left",top:"down",bottom:"up"}[u.value]||Me()):s.value=_.value>.5}const H=$(()=>v.value?{transform:u.value==="left"?`translateX(calc(-100% + ${_.value*n.value}px))`:u.value==="right"?`translateX(calc(100% - ${_.value*n.value}px))`:u.value==="top"?`translateY(calc(-100% + ${_.value*n.value}px))`:u.value==="bottom"?`translateY(calc(100% - ${_.value*n.value}px))`:Me(),transition:"none"}:void 0);return Oe(v,()=>{var k,P;const B=((k=i.value)==null?void 0:k.style.transform)??null,E=((P=i.value)==null?void 0:P.style.transition)??null;ma(()=>{var Q,R,Y,ae;(R=i.value)==null||R.style.setProperty("transform",((Q=H.value)==null?void 0:Q.transform)||"none"),(ae=i.value)==null||ae.style.setProperty("transition",((Y=H.value)==null?void 0:Y.transition)||null)}),Xa(()=>{var Q,R;(Q=i.value)==null||Q.style.setProperty("transform",B),(R=i.value)==null||R.style.setProperty("transition",E)})}),{isDragging:v,dragProgress:_,dragStyles:H}}function Me(){throw new Error}const ei=["start","end","left","right","top","bottom"],ti=me({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:a=>ei.includes(a)},sticky:Boolean,...gt(),...Se(),...Sl(),...Ga({mobile:null}),...bt(),...Vt(),...wt(),...Ae({tag:"nav"}),...Je()},"VNavigationDrawer"),Qa=ve()({name:"VNavigationDrawer",props:ti(),emits:{"update:modelValue":a=>!0,"update:rail":a=>!0},setup(a,i){let{attrs:s,emit:o,slots:n}=i;const{isRtl:l}=ft(),{themeClasses:u}=it(a),{borderClasses:f}=kt(a),{backgroundColorClasses:r,backgroundColorStyles:p}=xe(ee(a,"color")),{elevationClasses:m}=Pt(a),{displayClasses:h,mobile:v}=ht(a),{roundedClasses:_}=Ct(a),b=pl(),S=ot(a,"modelValue",null,J=>!!J),{ssrBootStyles:L}=nt(),{scopeId:q}=Ca(),W=A(),D=ye(!1),{runOpenDelay:z,runCloseDelay:H}=Ql(a,J=>{D.value=J}),B=$(()=>a.rail&&a.expandOnHover&&D.value?Number(a.width):Number(a.rail?a.railWidth:a.width)),E=$(()=>yl(a.location,l.value)),k=$(()=>a.persistent),P=$(()=>!a.permanent&&(v.value||a.temporary)),Q=$(()=>a.sticky&&!P.value&&E.value!=="bottom");Oe(()=>a.expandOnHover&&a.rail!=null,()=>{te(D,J=>o("update:rail",!J))}),Oe(()=>!a.disableResizeWatcher,()=>{te(P,J=>!a.permanent&&va(()=>S.value=!J))}),Oe(()=>!a.disableRouteWatcher&&!!b,()=>{te(b.currentRoute,()=>P.value&&(S.value=!1))}),te(()=>a.permanent,J=>{J&&(S.value=!0)}),a.modelValue==null&&!P.value&&(S.value=a.permanent||!v.value);const{isDragging:R,dragProgress:Y}=Jl({el:W,isActive:S,isTemporary:P,width:B,touchless:ee(a,"touchless"),position:E}),ae=$(()=>{const J=P.value?0:a.rail&&a.expandOnHover?Number(a.railWidth):B.value;return R.value?J*Y.value:J}),ne=$(()=>["top","bottom"].includes(a.location)?0:B.value),{layoutItemStyles:de,layoutItemScrimStyles:Pe}=$t({id:a.name,order:$(()=>parseInt(a.order,10)),position:E,layoutSize:ae,elementSize:ne,active:$(()=>S.value||R.value),disableTransitions:$(()=>R.value),absolute:$(()=>a.absolute||Q.value&&typeof ge.value!="string")}),{isStuck:ge,stickyStyles:Ce}=Xl({rootEl:W,isSticky:Q,layoutItemStyles:de}),Le=xe($(()=>typeof a.scrim=="string"?a.scrim:null)),et=$(()=>({...R.value?{opacity:Y.value*.2,transition:"none"}:void 0,...Pe.value}));return _t({VList:{bgColor:"transparent"}}),pe(()=>{const J=n.image||a.image;return c(x,null,[c(a.tag,j({ref:W,onMouseenter:z,onMouseleave:H,class:["v-navigation-drawer",`v-navigation-drawer--${E.value}`,{"v-navigation-drawer--expand-on-hover":a.expandOnHover,"v-navigation-drawer--floating":a.floating,"v-navigation-drawer--is-hovering":D.value,"v-navigation-drawer--rail":a.rail,"v-navigation-drawer--temporary":P.value,"v-navigation-drawer--persistent":k.value,"v-navigation-drawer--active":S.value,"v-navigation-drawer--sticky":Q.value},u.value,r.value,f.value,h.value,m.value,_.value,a.class],style:[p.value,de.value,L.value,Ce.value,a.style,["top","bottom"].includes(E.value)?{height:"auto"}:{}]},q,s),{default:()=>{var Re,We,He;return[J&&c("div",{key:"image",class:"v-navigation-drawer__img"},[n.image?c(fl,{key:"image-defaults",disabled:!a.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:a.image}}},n.image):c(Ve,{key:"image-img",alt:"",cover:!0,height:"inherit",src:a.image},null)]),n.prepend&&c("div",{class:"v-navigation-drawer__prepend"},[(Re=n.prepend)==null?void 0:Re.call(n)]),c("div",{class:"v-navigation-drawer__content"},[(We=n.default)==null?void 0:We.call(n)]),n.append&&c("div",{class:"v-navigation-drawer__append"},[(He=n.append)==null?void 0:He.call(n)])]}}),c(ja,{name:"fade-transition"},{default:()=>[P.value&&(R.value||S.value)&&!!a.scrim&&c("div",j({class:["v-navigation-drawer__scrim",Le.backgroundColorClasses.value],style:[et.value,Le.backgroundColorStyles.value],onClick:()=>{k.value||(S.value=!1)}},q),null)]})])}),{isStuck:ge}}}),Ta=function(){const a=localStorage.getItem("frontend.settings.menu_items"),i=a?a.split(","):vl,s=[];for(const o of i)o==="home"&&s.push({label:"home",icon:"mdi-home-outline",path:"/home",isLibraryNode:!1}),o==="search"&&s.push({label:"search",icon:"mdi-magnify",path:"/search",isLibraryNode:!1}),o==="artists"&&s.push({label:"artists",icon:"mdi-account-outline",path:"/artists",isLibraryNode:!0,hidden:t.libraryArtistsCount===0}),o==="albums"&&s.push({label:"albums",icon:"mdi-album",path:"/albums",isLibraryNode:!0,hidden:t.libraryAlbumsCount===0}),o==="tracks"&&s.push({label:"tracks",icon:"mdi-music-note",path:"/tracks",isLibraryNode:!0,hidden:t.libraryTracksCount===0}),o==="playlists"&&s.push({label:"playlists",icon:"mdi-playlist-play",path:"/playlists",isLibraryNode:!0,hidden:t.libraryPlaylistsCount===0}),o==="podcasts"&&s.push({label:"podcasts",icon:"mdi-podcast",path:"/podcasts",isLibraryNode:!0,hidden:t.libraryPodcastsCount===0}),o==="audiobooks"&&s.push({label:"audiobooks",icon:"mdi-book-play-outline",path:"/audiobooks",isLibraryNode:!0,hidden:t.libraryAudiobooksCount===0}),o==="radios"&&s.push({label:"radios",icon:"mdi-access-point",path:"/radios",isLibraryNode:!0,hidden:t.libraryRadiosCount===0}),o==="browse"&&s.push({label:"browse",icon:"mdi-folder-outline",path:"/browse",isLibraryNode:!0}),o==="settings"&&s.push({label:"settings.settings",icon:"mdi-cog-outline",path:"/settings",isLibraryNode:!0});return s},ai=F({__name:"DrawerNavigation",setup(a){const i=A(!0),s=A(!1),o=Ta();return(n,l)=>(d(),V(Qa,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=u=>i.value=u),app:"",rail:s.value,width:280},{default:y(()=>[c(ce,{style:{height:"55px"},active:!1},{prepend:y(()=>l[2]||(l[2]=[M("img",{class:"logo_icon",size:"40",src:xl},null,-1)])),title:y(()=>l[3]||(l[3]=[M("div",{class:"logo_text"},"Music Assistant",-1)])),_:1}),c(Xe),c($e,{lines:"one",density:"compact",nav:""},{default:y(()=>[(d(!0),g(x,null,ie(e(o).filter(u=>!u.hidden),u=>(d(),V(ce,{key:u.path,nav:"",density:"compact",height:15,title:n.$t(u.label),"prepend-icon":u.icon,to:u.path},null,8,["title","prepend-icon","to"]))),128))]),_:1}),c(le,{nav:"",height:15,width:40,style:{position:"relative",float:"right",right:"10px",top:"20px"},ripple:!1,icon:s.value?"mdi-chevron-right":"mdi-chevron-left",title:n.$t("tooltip.show_menu"),onClick:l[0]||(l[0]=u=>s.value=!s.value)},null,8,["icon","title"])]),_:1},8,["modelValue","rail"]))}}),li=oe(ai,[["__scopeId","data-v-8c634824"]]),ii={class:"media-thumb"},oi={style:{"margin-left":"-10px","padding-right":"5px"}},si=F({__name:"AddToPlaylistDialog",setup(a){const i=A(!1),s=A([]),o=A([]),n=A(),l=A([]);ze(()=>{Ie.on("playlistdialog",async m=>{i.value=!0,l.value=m.items,n.value=m.parentItem,await u()}),Ze(()=>{Ie.off("playlistdialog")})});const u=async function(){s.value=[],o.value=[];const m=await w.getLibraryPlaylists(),h=l.value.length?l.value[0]:void 0;for(const v of m){if(!v.provider_mappings.filter(b=>b.available).length||!v.is_editable||n.value&&n.value.media_type===he.PLAYLIST&&v.item_id===n.value.item_id)continue;const _=w.providers[v.provider_mappings[0].provider_instance];_&&(_.domain=="builtin"||_.is_streaming_provider||h!=null&&h.provider_mappings.filter(b=>b.provider_instance==_.instance_id).length)&&s.value.push(v)}for(const v of Object.values(w.providers))v.supported_features.includes(Zt.PLAYLIST_CREATE)&&v.supported_features.includes(Zt.PLAYLIST_TRACKS_EDIT)&&(v.domain=="builtin"||v.is_streaming_provider||h!=null&&h.provider_mappings.filter(_=>_.provider_instance==v.instance_id).length)&&o.value.push(v.instance_id)},f=async function(m){if(l.value[0].media_type===he.TRACK)w.addPlaylistTracks(m.item_id,l.value.map(v=>v.uri));else if(l.value[0].media_type===he.ALBUM){var h=await w.getAlbumTracks(l.value[0].item_id,l.value[0].provider);w.addPlaylistTracks(m.item_id,h.map(v=>v.uri))}p(),t.activeAlert={type:Ka.INFO,message:Ue("background_task_added"),persistent:!1}},r=async function(m){const h=prompt(Ue("new_playlist_name"));if(!h)return;const v=await w.createPlaylist(h,m);f(v)},p=function(){i.value=!1};return(m,h)=>(d(),V($a,{modelValue:i.value,"onUpdate:modelValue":[h[0]||(h[0]=v=>i.value=v),h[1]||(h[1]=v=>{e(t).dialogActive=v})],fullscreen:"",transition:"dialog-bottom-transition"},{default:y(()=>[c(je,null,{default:y(()=>[c(Wl,{icon:"mdi-playlist-plus",title:e(Ue)("add_playlist"),"menu-items":[{label:"close",icon:"mdi-close",action:p}]},null,8,["title","menu-items"]),c(Xe),h[4]||(h[4]=M("br",null,null,-1)),c($e,null,{default:y(()=>[(d(!0),g(x,null,ie(s.value,v=>(d(),g("div",{key:v.item_id},[c(ce,{onClick:_=>f(v)},{prepend:y(()=>[M("div",ii,[c(Ee,{item:v,size:50},null,8,["item"])])]),title:y(()=>[M("div",null,I(v.name),1)]),subtitle:y(()=>[M("div",null,I(v.owner),1)]),append:y(()=>[v.provider_mappings?(d(),V(rt,{key:0,domain:v.provider_mappings[0].provider_domain,size:20},null,8,["domain"])):C("",!0)]),_:2},1032,["onClick"])]))),128)),h[2]||(h[2]=M("div",{style:{height:"30px"}},null,-1)),c(Xe),h[3]||(h[3]=M("div",{style:{height:"30px"}},null,-1)),(d(!0),g(x,null,ie(o.value,v=>(d(),g("div",{key:v},[c(ce,{onClick:_=>r(v)},{prepend:y(()=>[M("div",oi,[c(rt,{domain:e(w).providers[v].domain,size:50},null,8,["domain"])])]),title:y(()=>[M("div",null,I(e(Ue)("new_playlist")),1)]),subtitle:y(()=>[M("div",null,I(e(Ue)("create_playlist_on",[e(w).providers[v].name])),1)]),append:y(()=>[c(rt,{domain:e(w).providers[v].domain,size:20},null,8,["domain"])]),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),ni=oe(si,[["__scopeId","data-v-a7c53a67"]]),ri=oe(Rl,[["__scopeId","data-v-3a9a25e3"]]),ui=me({scrollable:Boolean,...Se(),...hl(),...Ae({tag:"main"})},"VMain"),di=ve()({name:"VMain",props:ui(),setup(a,i){let{slots:s}=i;const{dimensionStyles:o}=_l(a),{mainStyles:n}=zl(),{ssrBootStyles:l}=nt();return pe(()=>c(a.tag,{class:["v-main",{"v-main--scrollable":a.scrollable},a.class],style:[n.value,l.value,o.value,a.style]},{default:()=>{var u,f;return[a.scrollable?c("div",{class:"v-main__scroller"},[(u=s.default)==null?void 0:u.call(s)]):(f=s.default)==null?void 0:f.call(s)]}})),{}}}),ra=F({__name:"View",setup(a){return(i,s)=>{const o=Za("router-view");return d(),V(di,{id:"cont",class:"overflow-y-auto",style:{height:"0px"}},{default:y(()=>{var n,l,u;return[e(t).navigationMenuStyle=="vertical"&&!e(t).frameless?(d(),V(li,{key:0})):C("",!0),c(o,null,{default:y(({Component:f})=>[(d(),V(Ja(f)))]),_:1}),c(ni),c(ri),c(Hl,{"model-value":e(t).activeAlert!==void 0,color:((n=e(t).activeAlert)==null?void 0:n.type)||"grey",text:(l=e(t).activeAlert)==null?void 0:l.message,"close-on-content-click":"",position:"sticky",timeout:(u=e(t).activeAlert)!=null&&u.persistent?-1:5e3,"z-index":"999999",style:{"z-index":"999999"},"onUpdate:modelValue":s[0]||(s[0]=()=>e(t).activeAlert=void 0)},null,8,["model-value","color","text","timeout"])]}),_:1})}}}),ci=me({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:a=>!a||["horizontal","shift"].includes(a)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...gt(),...Se(),...wa(),...bt(),...wt(),...Vt({name:"bottom-navigation"}),...Ae({tag:"header"}),...gl({selectedClass:"v-btn--selected"}),...Je()},"VBottomNavigation"),mi=ve()({name:"VBottomNavigation",props:ci(),emits:{"update:active":a=>!0,"update:modelValue":a=>!0},setup(a,i){let{slots:s}=i;const{themeClasses:o}=pa(),{borderClasses:n}=kt(a),{backgroundColorClasses:l,backgroundColorStyles:u}=xe(ee(a,"bgColor")),{densityClasses:f}=ka(a),{elevationClasses:r}=Pt(a),{roundedClasses:p}=Ct(a),{ssrBootStyles:m}=nt(),h=$(()=>Number(a.height)-(a.density==="comfortable"?8:0)-(a.density==="compact"?16:0)),v=ot(a,"active",a.active),{layoutItemStyles:_}=$t({id:a.name,order:$(()=>parseInt(a.order,10)),position:$(()=>"bottom"),layoutSize:$(()=>v.value?h.value:0),elementSize:h,active:v,absolute:ee(a,"absolute")});return Pa(a,bl),_t({VBtn:{baseColor:ee(a,"baseColor"),color:ee(a,"color"),density:ee(a,"density"),stacked:$(()=>a.mode!=="horizontal"),variant:"text"}},{scoped:!0}),pe(()=>c(a.tag,{class:["v-bottom-navigation",{"v-bottom-navigation--active":v.value,"v-bottom-navigation--grow":a.grow,"v-bottom-navigation--shift":a.mode==="shift"},o.value,l.value,n.value,f.value,r.value,p.value,a.class],style:[u.value,_.value,{height:qe(h.value)},m.value,a.style]},{default:()=>[s.default&&c("div",{class:"v-bottom-navigation__content"},[s.default()])]})),{}}}),vi={class:"menuButton"},pi={class:"menuButton"},yi={class:"menuButton"},fi=F({__name:"BottomNavigation",props:{height:{}},setup(a){const i=Ta(),s=A(!1);return(o,n)=>(d(),V(mi,{height:o.height,grow:"",elevation:"15",style:{"border-top":"1px solid #20202035"},role:"navigation"},{default:y(()=>[e(X)("tablet")?(d(!0),g(x,{key:0},ie(e(i),l=>(d(),V(ke,{key:l.label,to:l.path,"aria-label":o.$t(l.label),tabindex:"0"},{default:y(()=>[c(U,{size:"xx-large"},{default:y(()=>[N(I(l.icon),1)]),_:2},1024),M("span",vi,I(o.$t(l.label)),1)]),_:2},1032,["to","aria-label"]))),128)):(d(),g(x,{key:1},[(d(!0),g(x,null,ie(e(i).filter(l=>!l.isLibraryNode),l=>(d(),V(ke,{key:l.label,to:l.path,"aria-label":o.$t(l.label),tabindex:"0"},{default:y(()=>[c(U,{size:"xx-large"},{default:y(()=>[N(I(l.icon),1)]),_:2},1024),M("span",pi,I(o.$t(l.label)),1)]),_:2},1032,["to","aria-label"]))),128)),c(It,null,{activator:y(({props:l})=>[c(ke,j(l,{"aria-haspopup":"true","aria-expanded":s.value.toString(),"aria-label":"Open library menu"}),{default:y(()=>[c(U,{size:"xx-large"},{default:y(()=>n[0]||(n[0]=[N("mdi-bookshelf")])),_:1}),M("span",yi,I(o.$t("library")),1)]),_:2},1040,["aria-expanded"])]),default:y(()=>[c($e,null,{default:y(()=>[(d(!0),g(x,null,ie(e(i).filter(l=>l.isLibraryNode),l=>(d(),V(ce,{key:l.label,title:o.$t(l.label),"prepend-icon":l.icon,to:l.path},null,8,["title","prepend-icon","to"]))),128))]),_:1})]),_:1})],64))]),_:1},8,["height"]))}}),hi=oe(fi,[["__scopeId","data-v-5c8e33d1"]]),_i={style:{width:"auto"}},gi={key:0,style:{width:"100%"}},bi=["onClick"],wi={key:0,class:"time-text-row"},ki={class:"text-caption time-text-right"},Pi=F({__name:"PlayerTimeline",props:{showLabels:{type:Boolean,default:!1}},setup(a){const i=A(!1),s=A(!0),o=A(!1),n=A(0),l=A(0),u=$(()=>t.curQueueItem?i.value?`-${tt(t.curQueueItem.duration-r.value)}`:`${tt(r.value)}`:"0:00"),f=$(()=>{var b;if(!t.curQueueItem||!t.curQueueItem.duration||((b=t.curQueueItem.media_item)==null?void 0:b.media_type)==he.RADIO)return"";const _=t.curQueueItem.duration;return tt(_)}),r=$(()=>o.value?(l.value=n.value,n.value):t.activePlayerQueue?t.activePlayerQueue.elapsed_time:0),p=$(()=>{var b,S,L;const _={};return(L=(S=(b=t.curQueueItem)==null?void 0:b.media_item)==null?void 0:S.metadata)!=null&&L.chapters&&t.curQueueItem.media_item.metadata.chapters.forEach(q=>{_[q.start]=q.name}),_});te(r,_=>{o.value||(n.value=_)});const m=function(){o.value=!0},h=()=>{o.value=!1,!o.value&&t.activePlayer&&w.playerCommandSeek(t.activePlayer.player_id,Math.round(l.value))},v=function(_){var b,S,L;if((L=(S=(b=t.curQueueItem)==null?void 0:b.media_item)==null?void 0:S.metadata)!=null&&L.chapters){for(const q of t.curQueueItem.media_item.metadata.chapters)if(q.start==_){w.playMedia(t.curQueueItem.media_item.uri,void 0,void 0,q.position.toString());return}}};return(_,b)=>{var S,L;return d(),g("div",_i,[e(t).activePlayerQueue?(d(),g("div",gi,[c(Sa,{modelValue:n.value,"onUpdate:modelValue":b[0]||(b[0]=q=>n.value=q),disabled:!e(t).curQueueItem||!e(t).curQueueItem.media_item||!e(t).curQueueItem.duration||e(t).curQueueItem.media_item.media_type==e(he).RADIO||((S=e(t).activePlayer)==null?void 0:S.powered)==!1,style:{width:"100%"},min:0,max:(L=e(t).curQueueItem)==null?void 0:L.duration,"hide-details":"","track-size":2,"thumb-size":s.value?0:10,"show-ticks":p.value?"always":!1,ticks:p.value,"tick-size":"4",onTouchstart:b[1]||(b[1]=q=>s.value=!1),onTouchend:b[2]||(b[2]=q=>s.value=!0),onMouseenter:b[3]||(b[3]=q=>s.value=!1),onMouseleave:b[4]||(b[4]=q=>s.value=!0),onStart:m,onEnd:h},{"tick-label":y(({tick:q})=>[_.showLabels&&!s.value&&Object.values(p.value).length<6?(d(),g("a",{key:0,class:"text-caption",onClick:W=>v(q.value)},I(q.label),9,bi)):C("",!0)]),_:1},8,["modelValue","disabled","max","thumb-size","show-ticks","ticks"]),_.showLabels?(d(),g("div",wi,[M("div",{class:"text-caption time-text-left",onClick:b[5]||(b[5]=q=>i.value?i.value=!1:i.value=!0)},I(u.value),1),M("div",ki,I(f.value),1)])):C("",!0)])):C("",!0)])}}}),Ma=oe(Pi,[["__scopeId","data-v-569ce9b1"]]),Ci=F({__name:"ResponsiveIcon",props:{width:{default:void 0},height:{default:void 0},staticWidth:{default:void 0},staticHeight:{default:void 0},maxWidth:{default:void 0},maxHeight:{default:void 0},minWidth:{default:"24px"},minHeight:{default:"24px"},icon:{default:void 0},type:{default:"icon"},color:{default:void 0},disabled:{type:Boolean},badge:{type:Boolean,default:void 0}},emits:["click"],setup(a,{emit:i}){const s=()=>{if(o.value){const l=o.value.offsetWidth,u=o.value.offsetHeight,f=Math.min(l,u);n.value.$el.style.fontSize=`${f}px`}},o=A(),n=A();return ze(()=>{s(),window.addEventListener("resize",s)}),Ze(()=>{window.removeEventListener("resize",s)}),(l,u)=>(d(),g("div",{ref_key:"responsiveIconHolder",ref:o,class:at([l.type=="btn"&&!l.disabled?"responsive-icon-holder-btn":"responsive-icon-holder"]),style:G({width:l.staticWidth?l.staticWidth:l.width,height:l.staticWidth?l.staticWidth:l.height,maxHeight:l.staticHeight?l.staticHeight:l.maxHeight,maxWidth:l.staticWidth?l.staticWidth:l.maxWidth,minHeight:l.staticHeight?l.staticHeight:l.minHeight,minWidth:l.staticWidth?l.staticWidth:l.minWidth}),onClick:u[0]||(u[0]=f=>l.disabled?f.preventDefault():l.$emit("click",f))},[c(vt,{"model-value":l.badge==!0,color:"error",dot:""},{default:y(()=>[l.type==="icon"?(d(),V(U,{key:0,ref_key:"responsiveIcon",ref:n,class:"responsive-icon",color:l.color?l.color:"",icon:l.icon?l.icon:"mdi-check",width:l.staticWidth?l.staticWidth:null,height:l.staticHeight?l.staticHeight:null,disabled:l.disabled},dt({_:2},[ie(l.$slots,(f,r)=>({name:r,fn:y(()=>[ct(l.$slots,r,{},void 0,!0)])}))]),1032,["color","icon","width","height","disabled"])):l.type==="btn"?(d(),V(U,{key:1,ref_key:"responsiveIcon",ref:n,class:"responsive-icon",style:{cursor:"pointer"},color:l.color?l.color:"",icon:l.icon?l.icon:"mdi-check",width:l.staticWidth?l.staticWidth:null,height:l.staticHeight?l.staticHeight:null,disabled:l.disabled},dt({_:2},[ie(l.$slots,(f,r)=>({name:r,fn:y(()=>[ct(l.$slots,r,{},void 0,!0)])}))]),1032,["color","icon","width","height","disabled"])):C("",!0)]),_:3},8,["model-value"])],6))}}),Qe=oe(Ci,[["__scopeId","data-v-2c9253ab"]]),Ba=F({__name:"RepeatBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){return(i,s)=>{var o,n;return i.isVisible&&i.playerQueue?(d(),V(Qe,j({key:0},i.icon,{disabled:!i.playerQueue.active||i.playerQueue.items==0,color:e(Be)((o=i.icon)==null?void 0:o.color,[[i.playerQueue.repeat_mode==e(Z).OFF,null],[i.playerQueue.repeat_mode==e(Z).ALL,"primary"],[i.playerQueue.repeat_mode==e(Z).ONE,"primary"]]),icon:e(Be)((n=i.icon)==null?void 0:n.icon,[[i.playerQueue.repeat_mode==e(Z).OFF,"mdi-repeat-off"],[i.playerQueue.repeat_mode==e(Z).ALL,"mdi-repeat"],[i.playerQueue.repeat_mode==e(Z).ONE,"mdi-repeat-once"],[!0,"mdi-repeat-off"]]),type:"btn",onClick:s[0]||(s[0]=l=>e(w).queueCommandRepeat(i.playerQueue.queue_id||"",e(Be)(null,[[i.playerQueue.repeat_mode==e(Z).OFF,e(Z).ONE],[i.playerQueue.repeat_mode==e(Z).ALL,e(Z).OFF],[i.playerQueue.repeat_mode==e(Z).ONE,e(Z).ALL]])))}),null,16,["disabled","color","icon"])):C("",!0)}}}),Ea=F({__name:"ShuffleBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){return(i,s)=>{var o,n;return i.isVisible&&i.playerQueue?(d(),V(Qe,j({key:0},i.icon,{disabled:!i.playerQueue.active||i.playerQueue.items==0,color:e(Be)((o=i.icon)==null?void 0:o.color,[[i.playerQueue.shuffle_enabled,"primary",""]]),icon:e(Be)((n=i.icon)==null?void 0:n.icon,[[i.playerQueue.shuffle_enabled,"mdi-shuffle"],[i.playerQueue.shuffle_enabled==!1,"mdi-shuffle-disabled"],[!0,"mdi-shuffle"]]),type:"btn",onClick:s[0]||(s[0]=l=>e(w).queueCommandShuffle(i.playerQueue.queue_id,!i.playerQueue.shuffle_enabled))}),null,16,["disabled","color","icon"])):C("",!0)}}}),qa=F({__name:"PlayBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},withCircle:{type:Boolean,default:!0},icon:{default:void 0},iconStyle:{default:"circle"}},setup(a){const i=a,s=$(()=>i.playerQueue?i.playerQueue.items>0:!1),o=$(()=>{var l;return!(!i.player||(l=i.playerQueue)!=null&&l.active||!i.player.current_media)}),n=$(()=>{var l;return((l=i.player)==null?void 0:l.state)==we.PLAYING?"mdi-pause":"mdi-play"});return(l,u)=>l.isVisible&&l.player?(d(),V(Qe,j({key:0},l.icon,{disabled:!s.value&&!o.value,icon:l.iconStyle?`${n.value}-${l.iconStyle}`:n.value,type:"btn",onClick:u[0]||(u[0]=f=>e(w).playerCommandPlayPause(l.player.player_id))}),null,16,["disabled","icon"])):C("",!0)}}),za=F({__name:"PreviousBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){const i=a,s=$(()=>{var n,l;return!((n=i.playerQueue)!=null&&n.active)||!((l=i.playerQueue)!=null&&l.items)||!i.playerQueue.current_index?!1:i.playerQueue.current_index>0}),o=$(()=>{var n;return!i.player||(n=i.playerQueue)!=null&&n.active||!i.player.current_media?!1:i.player.supported_features.includes(_e.NEXT_PREVIOUS)});return(n,l)=>n.isVisible&&n.player?(d(),V(Qe,j({key:0},n.icon,{disabled:!s.value&&!o.value,icon:"mdi-skip-previous-outline",type:"btn",onClick:l[0]||(l[0]=u=>e(w).playerCommandPrevious(n.player.player_id))}),null,16,["disabled"])):C("",!0)}}),Aa=F({__name:"NextBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){const i=a,s=$(()=>{var n;return(n=i.playerQueue)!=null&&n.active?(i.playerQueue.current_index||0)<i.playerQueue.items-1:!1}),o=$(()=>{var n;return!i.player||(n=i.playerQueue)!=null&&n.active||!i.player.current_media?!1:i.player.supported_features.includes(_e.NEXT_PREVIOUS)});return(n,l)=>n.isVisible&&n.player?(d(),V(Qe,j({key:0},n.icon,{disabled:!s.value&&!o.value,icon:"mdi-skip-next-outline",type:"btn",onClick:l[0]||(l[0]=u=>e(w).playerCommandNext(n.player.player_id))}),null,16,["disabled"])):C("",!0)}}),Ii={key:0,class:"player-controls"},Vi={key:0,class:"player-controls-elements"},$i={key:1,class:"player-controls-elements"},Si={key:2},Qi={key:3,class:"player-controls-elements"},Ti={key:4,class:"player-controls-elements"},ua=F({__name:"PlayerControls",props:{visibleComponents:{default:()=>({repeat:{isVisible:!0},shuffle:{isVisible:!0},play:{isVisible:!0},previous:{isVisible:!0},next:{isVisible:!0}})}},setup(a){return(i,s)=>{var o,n,l,u,f;return i.visibleComponents?(d(),g("div",Ii,[i.visibleComponents&&((o=i.visibleComponents.shuffle)!=null&&o.isVisible)?(d(),g("div",Vi,[c(Ea,{"player-queue":e(t).activePlayerQueue,class:"media-controls-item",icon:i.visibleComponents.shuffle.icon},null,8,["player-queue","icon"])])):C("",!0),i.visibleComponents&&((n=i.visibleComponents.previous)!=null&&n.isVisible)?(d(),g("div",$i,[c(za,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item",icon:i.visibleComponents.previous.icon},null,8,["player","player-queue","icon"])])):C("",!0),i.visibleComponents&&((l=i.visibleComponents.play)!=null&&l.isVisible)?(d(),g("div",Si,[c(qa,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","icon-style":i.visibleComponents.play.withCircle?"circle":"",icon:i.visibleComponents.play.icon},null,8,["player","player-queue","icon-style","icon"])])):C("",!0),i.visibleComponents&&((u=i.visibleComponents.next)!=null&&u.isVisible)?(d(),g("div",Qi,[c(Aa,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,icon:i.visibleComponents.next.icon,"static-height":"24px","static-width":"24px"},null,8,["player","player-queue","icon"])])):C("",!0),i.visibleComponents&&((f=i.visibleComponents.repeat)!=null&&f.isVisible)?(d(),g("div",Ti,[c(Ba,{"player-queue":e(t).activePlayerQueue,icon:i.visibleComponents.repeat.icon,"static-height":"24px","static-width":"24px"},null,8,["player-queue","icon"])])):C("",!0)])):C("",!0)}}}),Mi={props:{width:String,height:String,style:String,allowWheel:Boolean},emits:["update:model-value"],setup(a,i){const s=A(!0),o=$(()=>({class:"player-volume",hideDetails:!0,trackSize:2,thumbSize:s.value?0:10,step:2,elevation:0,style:`width: ${a.width}; height:${a.height}; display: inline-grid; ${a.style}`})),n=$(()=>({...o.value,...i}));return{isThumbHidden:s,playerVolumeProps:n,onWheel:({deltaY:u})=>{if(!a.allowWheel)return;const f=n.value.step,r=i.attrs["model-value"],p=u<0?f:-f;i.emit("update:model-value",r+p)}}}};function Bi(a,i,s,o,n,l){return d(),V(Sa,j(o.playerVolumeProps,{onTouchstart:i[0]||(i[0]=u=>o.isThumbHidden=!1),onTouchend:i[1]||(i[1]=u=>o.isThumbHidden=!0),onMouseenter:i[2]||(i[2]=u=>o.isThumbHidden=!1),onMouseleave:i[3]||(i[3]=u=>o.isThumbHidden=!0),onWheel:se(o.onWheel,["prevent"]),onEnd:i[4]||(i[4]=u=>a.$emit("update:model-value",u))}),dt({_:2},[ie(a.$slots,(u,f)=>({name:f,fn:y(()=>[ct(a.$slots,f,{},void 0,!0)])}))]),1040,["onWheel"])}const Ke=oe(Mi,[["render",Bi],["__scopeId","data-v-af51e13c"]]),La=F({__name:"QueueBtn",props:{isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){const i=function(){t.showFullscreenPlayer&&t.showQueueItems?t.showQueueItems=!1:t.showFullscreenPlayer&&!t.showQueueItems?t.showQueueItems=!0:(t.showQueueItems=!0,t.showFullscreenPlayer=!0)};return(s,o)=>{var n;return s.isVisible?(d(),V(Qe,j({key:0},s.icon,{disabled:!e(t).activePlayerId||e(t).showFullscreenPlayer&&!e(t).curQueueItem&&!e(t).showQueueItems,icon:"mdi-playlist-play",color:e(Be)((n=s.icon)==null?void 0:n.color,[[e(t).showFullscreenPlayer&&e(t).showQueueItems,"primary",""]]),type:"btn",onClick:i}),null,16,["disabled","color"])):C("",!0)}}}),Ra=F({__name:"SpeakerBtn",props:{color:{}},setup(a){return(i,s)=>(d(),V(le,{variant:"icon",ripple:!1,icon:"",onClick:s[0]||(s[0]=o=>e(t).showPlayersMenu=!0)},{default:y(()=>{var o;return[c(U,{color:i.color?i.color:"",size:24,icon:(o=e(t).activePlayer)!=null&&o.group_childs.length?"mdi-speaker-multiple":"mdi-speaker"},null,8,["color","icon"])]}),_:1}))}}),Wa=(a,i)=>{const s=[];(a==null?void 0:a.power_control)!=ue&&s.push({label:a.powered?"power_off_player":"power_on_player",labelArgs:[],action:()=>{w.playerCommandPowerToggle(a.player_id)},icon:"mdi-power"}),((a==null?void 0:a.state)=="playing"||(a==null?void 0:a.state)=="paused")&&s.push({label:"stop_playback",labelArgs:[],action:()=>{w.playerCommandStop(a.player_id)},icon:"mdi-stop"});const o=Object.values(w.players).filter(l=>l.player_id!=a.player_id&&l.available&&l.enabled&&(l.can_group_with.includes(a.provider)||l.can_group_with.includes(a.player_id))&&l.supported_features.includes(_e.SET_MEMBERS)&&!l.synced_to);a.supported_features.includes(_e.SET_MEMBERS)&&!a.synced_to&&a.type==fe.PLAYER&&a.group_childs.length==0&&o.length>0&&s.push({label:"sync_player_with",labelArgs:[],icon:"mdi-link-variant",subItems:o.map(l=>({label:l.display_name,labelArgs:[],action:()=>{w.playerCommandGroup(a.player_id,l.player_id)}})).sort((l,u)=>{var f;return l.label.toUpperCase()>((f=u.label)==null?void 0:f.toUpperCase())?1:-1})}),i&&s.push({label:i.shuffle_enabled?"shuffle_disable":"shuffle_enable",labelArgs:[],action:()=>{w.queueCommandShuffleToggle(i.queue_id)},icon:i.shuffle_enabled?"mdi-shuffle-disabled":"mdi-shuffle"}),i&&s.push({label:"select_repeat_mode",labelArgs:[],subItems:[{label:"repeat_mode.off",labelArgs:[],action:()=>{w.queueCommandRepeat(i.queue_id,Z.OFF)},selected:i.repeat_mode==Z.OFF},{label:"repeat_mode.all",labelArgs:[],action:()=>{w.queueCommandRepeat(i.queue_id,Z.ALL)},selected:i.repeat_mode==Z.ALL},{label:"repeat_mode.one",labelArgs:[],action:()=>{w.queueCommandRepeat(i.queue_id,Z.ONE)},selected:i.repeat_mode==Z.ONE}],icon:"mdi-repeat"}),i!=null&&i.items&&s.push({label:"transfer_queue",icon:"mdi-swap-horizontal",subItems:Object.values(w.players).filter(l=>l.player_id!=i.queue_id&&l.player_id!=a.player_id&&l.available&&l.enabled&&!l.synced_to).map(l=>({label:l.display_name,labelArgs:[],action:()=>{w.queueCommandTransfer(i.queue_id,l.player_id),t.activePlayerId=l.player_id}})).sort((l,u)=>{var f;return l.label.toUpperCase()>((f=u.label)==null?void 0:f.toUpperCase())?1:-1})}),i!=null&&i.items&&s.push({label:"queue_clear",labelArgs:[],action:()=>{w.queueCommandClear(i.queue_id)},icon:"mdi-cancel"});const n=a.source_list.filter(l=>!l.passive);return a.supported_features.includes(_e.SELECT_SOURCE)&&!a.synced_to&&n.length>0&&s.push({label:"select_source",labelArgs:[],icon:"mdi-import",subItems:n.map(l=>({label:l.name,labelArgs:[],action:()=>{w.playerCommandGroupSelectSource(a.player_id,l.id)}})).sort((l,u)=>{var f;return l.label.toUpperCase()>((f=u.label)==null?void 0:f.toUpperCase())?1:-1})}),i&&"dont_stop_the_music_enabled"in i&&s.push({label:i.dont_stop_the_music_enabled?"dont_stop_the_music_disable":"dont_stop_the_music_enable",labelArgs:[],action:()=>{w.queueCommandDontStopTheMusicToggle(i.queue_id)},icon:"mdi-all-inclusive"}),s.push({label:"open_player_settings",labelArgs:[],action:()=>{t.showFullscreenPlayer=!1,t.showPlayersMenu=!1,lt.push(`/settings/editplayer/${a.player_id}`)},icon:"mdi-cog-outline"}),a.type!==fe.GROUP&&s.push({label:"open_dsp_settings",labelArgs:[],action:()=>{t.showFullscreenPlayer=!1,t.showPlayersMenu=!1,lt.push(`/settings/editplayer/${a.player_id}/dsp`)},icon:"mdi-equalizer"}),s},St=Symbol.for("vuetify:v-tabs"),Ei=me({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...ya(wl({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),yt=ve()({name:"VTab",props:Ei(),setup(a,i){let{slots:s,attrs:o}=i;const{textColorClasses:n,textColorStyles:l}=kl(a,"sliderColor"),u=A(),f=A(),r=$(()=>a.direction==="horizontal"),p=$(()=>{var h,v;return((v=(h=u.value)==null?void 0:h.group)==null?void 0:v.isSelected.value)??!1});function m(h){var _,b;let{value:v}=h;if(v){const S=(b=(_=u.value)==null?void 0:_.$el.parentElement)==null?void 0:b.querySelector(".v-tab--selected .v-tab__slider"),L=f.value;if(!S||!L)return;const q=getComputedStyle(S).color,W=S.getBoundingClientRect(),D=L.getBoundingClientRect(),z=r.value?"x":"y",H=r.value?"X":"Y",B=r.value?"right":"bottom",E=r.value?"width":"height",k=W[z],P=D[z],Q=k>P?W[B]-D[B]:W[z]-D[z],R=Math.sign(Q)>0?r.value?"right":"bottom":Math.sign(Q)<0?r.value?"left":"top":"center",ae=(Math.abs(Q)+(Math.sign(Q)<0?W[E]:D[E]))/Math.max(W[E],D[E])||0,ne=W[E]/D[E]||0,de=1.5;Ml(L,{backgroundColor:[q,"currentcolor"],transform:[`translate${H}(${Q}px) scale${H}(${ne})`,`translate${H}(${Q/de}px) scale${H}(${(ae-1)/de+1})`,"none"],transformOrigin:Array(3).fill(R)},{duration:225,easing:Bl})}}return pe(()=>{const h=ke.filterProps(a);return c(ke,j({symbol:St,ref:u,class:["v-tab",a.class],style:a.style,tabindex:p.value?0:-1,role:"tab","aria-selected":String(p.value),active:!1},h,o,{block:a.fixed,maxWidth:a.fixed?300:void 0,"onGroup:selected":m}),{...s,default:()=>{var v;return c(x,null,[((v=s.default)==null?void 0:v.call(s))??a.text,!a.hideSlider&&c("div",{ref:f,class:["v-tab__slider",n.value],style:l.value},null)])}})}),Tl({},u)}}),qi=a=>{const{touchstartX:i,touchendX:s,touchstartY:o,touchendY:n}=a,l=.5,u=16;a.offsetX=s-i,a.offsetY=n-o,Math.abs(a.offsetY)<l*Math.abs(a.offsetX)&&(a.left&&s<i-u&&a.left(a),a.right&&s>i+u&&a.right(a)),Math.abs(a.offsetX)<l*Math.abs(a.offsetY)&&(a.up&&n<o-u&&a.up(a),a.down&&n>o+u&&a.down(a))};function zi(a,i){var o;const s=a.changedTouches[0];i.touchstartX=s.clientX,i.touchstartY=s.clientY,(o=i.start)==null||o.call(i,{originalEvent:a,...i})}function Ai(a,i){var o;const s=a.changedTouches[0];i.touchendX=s.clientX,i.touchendY=s.clientY,(o=i.end)==null||o.call(i,{originalEvent:a,...i}),qi(i)}function Li(a,i){var o;const s=a.changedTouches[0];i.touchmoveX=s.clientX,i.touchmoveY=s.clientY,(o=i.move)==null||o.call(i,{originalEvent:a,...i})}function Ri(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:a.left,right:a.right,up:a.up,down:a.down,start:a.start,move:a.move,end:a.end};return{touchstart:s=>zi(s,i),touchend:s=>Ai(s,i),touchmove:s=>Li(s,i)}}function Wi(a,i){var f;const s=i.value,o=s!=null&&s.parent?a.parentElement:a,n=(s==null?void 0:s.options)??{passive:!0},l=(f=i.instance)==null?void 0:f.$.uid;if(!o||!l)return;const u=Ri(i.value);o._touchHandlers=o._touchHandlers??Object.create(null),o._touchHandlers[l]=u,fa(u).forEach(r=>{o.addEventListener(r,u[r],n)})}function Hi(a,i){var l,u;const s=(l=i.value)!=null&&l.parent?a.parentElement:a,o=(u=i.instance)==null?void 0:u.$.uid;if(!(s!=null&&s._touchHandlers)||!o)return;const n=s._touchHandlers[o];fa(n).forEach(f=>{s.removeEventListener(f,n[f])}),delete s._touchHandlers[o]}const Ha={mounted:Wi,unmounted:Hi},Da=Symbol.for("vuetify:v-window"),Na=Symbol.for("vuetify:v-window-group"),Ua=me({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:a=>typeof a=="boolean"||a==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...Se(),...Ae(),...Je()},"VWindow"),da=ve()({name:"VWindow",directives:{Touch:Ha},props:Ua(),emits:{"update:modelValue":a=>!0},setup(a,i){let{slots:s}=i;const{themeClasses:o}=it(a),{isRtl:n}=ft(),{t:l}=el(),u=Pa(a,Na),f=A(),r=$(()=>n.value?!a.reverse:a.reverse),p=ye(!1),m=$(()=>{const z=a.direction==="vertical"?"y":"x",B=(r.value?!p.value:p.value)?"-reverse":"";return`v-window-${z}${B}-transition`}),h=ye(0),v=A(void 0),_=$(()=>u.items.value.findIndex(z=>u.selected.value.includes(z.id)));te(_,(z,H)=>{const B=u.items.value.length,E=B-1;B<=2?p.value=z<H:z===E&&H===0?p.value=!0:z===0&&H===E?p.value=!1:p.value=z<H}),tl(Da,{transition:m,isReversed:p,transitionCount:h,transitionHeight:v,rootRef:f});const b=$(()=>a.continuous||_.value!==0),S=$(()=>a.continuous||_.value!==u.items.value.length-1);function L(){b.value&&u.prev()}function q(){S.value&&u.next()}const W=$(()=>{const z=[],H={icon:n.value?a.nextIcon:a.prevIcon,class:`v-window__${r.value?"right":"left"}`,onClick:u.prev,"aria-label":l("$vuetify.carousel.prev")};z.push(b.value?s.prev?s.prev({props:H}):c(ke,H,null):c("div",null,null));const B={icon:n.value?a.prevIcon:a.nextIcon,class:`v-window__${r.value?"left":"right"}`,onClick:u.next,"aria-label":l("$vuetify.carousel.next")};return z.push(S.value?s.next?s.next({props:B}):c(ke,B,null):c("div",null,null)),z}),D=$(()=>a.touch===!1?a.touch:{...{left:()=>{r.value?L():q()},right:()=>{r.value?q():L()},start:H=>{let{originalEvent:B}=H;B.stopPropagation()}},...a.touch===!0?{}:a.touch});return pe(()=>ha(c(a.tag,{ref:f,class:["v-window",{"v-window--show-arrows-on-hover":a.showArrows==="hover"},o.value,a.class],style:a.style},{default:()=>{var z,H;return[c("div",{class:"v-window__container",style:{height:v.value}},[(z=s.default)==null?void 0:z.call(s,{group:u}),a.showArrows!==!1&&c("div",{class:"v-window__controls"},[W.value])]),(H=s.additional)==null?void 0:H.call(s,{group:u})]}}),[[al("touch"),D.value]])),{group:u}}}),Di=me({...ya(Ua(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),Ni=ve()({name:"VTabsWindow",props:Di(),emits:{"update:modelValue":a=>!0},setup(a,i){let{slots:s}=i;const o=_a(St,null),n=ot(a,"modelValue"),l=$({get(){var u;return n.value!=null||!o?n.value:(u=o.items.value.find(f=>o.selected.value.includes(f.id)))==null?void 0:u.value},set(u){n.value=u}});return pe(()=>{const u=da.filterProps(a);return c(da,j({_as:"VTabsWindow"},u,{modelValue:l.value,"onUpdate:modelValue":f=>l.value=f,class:["v-tabs-window",a.class],style:a.style,mandatory:!1,touch:!1}),s)}),{}}}),Fa=me({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Se(),...Pl(),...El()},"VWindowItem"),ca=ve()({name:"VWindowItem",directives:{Touch:Ha},props:Fa(),emits:{"group:selected":a=>!0},setup(a,i){let{slots:s}=i;const o=_a(Da),n=Cl(a,Na),{isBooted:l}=nt();if(!o||!n)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const u=ye(!1),f=$(()=>l.value&&(o.isReversed.value?a.reverseTransition!==!1:a.transition!==!1));function r(){!u.value||!o||(u.value=!1,o.transitionCount.value>0&&(o.transitionCount.value-=1,o.transitionCount.value===0&&(o.transitionHeight.value=void 0)))}function p(){var b;u.value||!o||(u.value=!0,o.transitionCount.value===0&&(o.transitionHeight.value=qe((b=o.rootRef.value)==null?void 0:b.clientHeight)),o.transitionCount.value+=1)}function m(){r()}function h(b){u.value&&va(()=>{!f.value||!u.value||!o||(o.transitionHeight.value=qe(b.clientHeight))})}const v=$(()=>{const b=o.isReversed.value?a.reverseTransition:a.transition;return f.value?{name:typeof b!="string"?o.transition.value:b,onBeforeEnter:p,onAfterEnter:r,onEnterCancelled:m,onBeforeLeave:p,onAfterLeave:r,onLeaveCancelled:m,onEnter:h}:!1}),{hasContent:_}=ql(a,n.isSelected);return pe(()=>c(Il,{transition:v.value,disabled:!l.value},{default:()=>{var b;return[ha(c("div",{class:["v-window-item",n.selectedClass.value,a.class],style:a.style},[_.value&&((b=s.default)==null?void 0:b.call(s))]),[[ll,n.isSelected.value]])]}})),{groupItem:n}}}),Ui=me({...Fa()},"VTabsWindowItem"),Fi=ve()({name:"VTabsWindowItem",props:Ui(),setup(a,i){let{slots:s}=i;return pe(()=>{const o=ca.filterProps(a);return c(ca,j({_as:"VTabsWindowItem"},o,{class:["v-tabs-window-item",a.class],style:a.style}),s)}),{}}});function Oi(a){return a?a.map(i=>il(i)?i:{text:i,value:i}):[]}const Yi=me({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Ul({mandatory:"force",selectedClass:"v-tab-item--selected"}),...wa(),...Ae()},"VTabs"),xi=ve()({name:"VTabs",props:Yi(),emits:{"update:modelValue":a=>!0},setup(a,i){let{attrs:s,slots:o}=i;const n=ot(a,"modelValue"),l=$(()=>Oi(a.items)),{densityClasses:u}=ka(a),{backgroundColorClasses:f,backgroundColorStyles:r}=xe(ee(a,"bgColor")),{scopeId:p}=Ca();return _t({VTab:{color:ee(a,"color"),direction:ee(a,"direction"),stacked:ee(a,"stacked"),fixed:ee(a,"fixedTabs"),sliderColor:ee(a,"sliderColor"),hideSlider:ee(a,"hideSlider")}}),pe(()=>{const m=aa.filterProps(a),h=!!(o.window||a.items.length>0);return c(x,null,[c(aa,j(m,{modelValue:n.value,"onUpdate:modelValue":v=>n.value=v,class:["v-tabs",`v-tabs--${a.direction}`,`v-tabs--align-tabs-${a.alignTabs}`,{"v-tabs--fixed-tabs":a.fixedTabs,"v-tabs--grow":a.grow,"v-tabs--stacked":a.stacked},u.value,f.value,a.class],style:[{"--v-tabs-height":qe(a.height)},r.value,a.style],role:"tablist",symbol:St},p,s),{default:()=>{var v;return[((v=o.default)==null?void 0:v.call(o))??l.value.map(_=>{var b;return((b=o.tab)==null?void 0:b.call(o,{item:_}))??c(yt,j(_,{key:_.text,value:_.value}),{default:o[`tab.${_.value}`]?()=>{var S;return(S=o[`tab.${_.value}`])==null?void 0:S.call(o,{item:_})}:void 0})})]}}),h&&c(Ni,j({modelValue:n.value,"onUpdate:modelValue":v=>n.value=v,key:"tabs-window"},p),{default:()=>{var v;return[l.value.map(_=>{var b;return((b=o.item)==null?void 0:b.call(o,{item:_}))??c(Fi,{value:_.value},{default:()=>{var S;return(S=o[`item.${_.value}`])==null?void 0:S.call(o,{item:_})}})}),(v=o.window)==null?void 0:v.call(o)]}})])}),{}}}),Xi=["onClick"],Gi={class:"main"},ji={key:0,class:"main-media-details"},Ki={key:0,class:"main-media-details-image"},Zi={class:"main-media-details-track-info"},Ji={key:0},eo={key:0},to={key:0},ao={key:12,style:{margin:"auto","padding-top":"20px"}},lo={key:1,class:"main-queue-items"},io={class:"queue-items-scroll-box"},oo={class:"media-thumb listitem-media-thumb"},so={class:"d-flex"},no={style:{"white-space":"nowrap"},class:"pr-1"},ro={key:0},uo={key:2,class:"main-queue-items"},co={class:"main-media-details-image main-media-details-image-alt"},mo={class:"player-bottom"},vo={class:"row",style:{"margin-left":"5%","margin-right":"5%"}},po={class:"media-controls"},yo={key:0,class:"row",style:{"margin-left":"5%","margin-right":"5%"}},fo={key:1,class:"row",style:{height:"70px",display:"flex","justify-content":"center","align-items":"center","padding-bottom":"15px","padding-top":"15px"}},ho=F({__name:"PlayerFullscreen",props:{colorPalette:{}},setup(a){ol();const{name:i}=ht(),s=a,o=new pt,n=A(-1),l=new pt,u=A([]),f=A(""),r=A(0),p=A(!1),m=$(()=>t.activePlayerQueue?u.value.slice(t.activePlayerQueue.current_index):[]),h=$(()=>t.activePlayerQueue?u.value.slice(0,t.activePlayerQueue.current_index):[]),v=$(()=>{switch(i.value){case"xs":return"1.2em";case"sm":return"1.6em";case"md":return"2em";case"lg":return t.showQueueItems?"1.5em":"2.5em";case"xl":return t.showQueueItems?"1.6em":"3em";case"xxl":return t.showQueueItems?"1.7em":"3.2em";default:return"1.0em."}}),_=$(()=>{switch(i.value){case"xs":return"1.0em";case"sm":return"1.2em";case"md":return"1.7em";case"lg":return t.showQueueItems?"1.0em":"1.6em";case"xl":return t.showQueueItems?"1.2em":"2em";case"xxl":return t.showQueueItems?"1.2em":"2em";default:return"1.0em."}}),b=$(()=>Ye.display.height.value>800),S=function(k){t.showFullscreenPlayer=!1,lt.push({name:k.media_type,params:{itemId:k.item_id,provider:k.provider}})},L=function(k){t.globalSearchTerm=k,lt.push({name:"search"}),t.showFullscreenPlayer=!1},q=function(k,P){var Y,ae,ne,de,Pe,ge,Ce;const Q=u.value.indexOf(P),R=[{label:"play_now",labelArgs:[],action:()=>{D(P,"play_now")},icon:"mdi-play-circle-outline",disabled:Q===((Y=t.activePlayerQueue)==null?void 0:Y.current_index)||Q===((ae=t.activePlayerQueue)==null?void 0:ae.index_in_buffer)},{label:"play_next",labelArgs:[],action:()=>{D(P,"move_next")},icon:"mdi-skip-next-circle-outline",disabled:Q<=(((ne=t.activePlayerQueue)==null?void 0:ne.index_in_buffer)||0)},{label:"queue_move_up",labelArgs:[],action:()=>{D(P,"up")},icon:"mdi-arrow-up",disabled:Q<=(((de=t.activePlayerQueue)==null?void 0:de.index_in_buffer)||0)},{label:"queue_move_down",labelArgs:[],action:()=>{D(P,"down")},icon:"mdi-arrow-down",disabled:Q<=(((Pe=t.activePlayerQueue)==null?void 0:Pe.index_in_buffer)||0)},{label:"queue_delete",labelArgs:[],action:()=>{D(P,"delete")},icon:"mdi-delete",disabled:Q<=(((ge=t.activePlayerQueue)==null?void 0:ge.index_in_buffer)||0)}];((Ce=P==null?void 0:P.media_item)==null?void 0:Ce.media_type)==he.TRACK&&R.push({label:"show_info",labelArgs:[],action:()=>{S(P.media_item)},icon:"mdi-information-outline",disabled:!1}),Ie.emit("contextmenu",{items:R,posX:k.clientX,posY:k.clientY})},W=function(k){t.activePlayer&&Ie.emit("contextmenu",{items:Wa(t.activePlayer,t.activePlayerQueue),posX:k.clientX,posY:k.clientY})},D=function(k,P){var Q,R,Y,ae,ne;!k||!t.activePlayerQueue||(P=="play_now"?w.queueCommandPlayIndex((Q=t.activePlayerQueue)==null?void 0:Q.queue_id,k.queue_item_id):P=="move_next"?w.queueCommandMoveNext((R=t.activePlayerQueue)==null?void 0:R.queue_id,k.queue_item_id):P=="up"?w.queueCommandMoveUp((Y=t.activePlayerQueue)==null?void 0:Y.queue_id,k.queue_item_id):P=="down"?w.queueCommandMoveDown((ae=t.activePlayerQueue)==null?void 0:ae.queue_id,k.queue_item_id):P=="delete"&&w.queueCommandDelete((ne=t.activePlayerQueue)==null?void 0:ne.queue_id,k.queue_item_id))},z=async function(){p.value=!0,u.value=[],await Jt(100),p.value=!1},H=async function({done:k}){var Y;if(!t.activePlayerQueue||t.activePlayerQueue.items==0){k("empty");return}if(u.value.length>=((Y=t.activePlayerQueue)==null?void 0:Y.items)){k("empty");return}const P=u.value.length,Q=(t.activePlayerQueue.current_index||0)+50,R=await w.getPlayerQueueItems(t.activePlayerQueue.queue_id,Q,P);u.value.push(...R),R.length<50?k("empty"):k("ok")};ze(()=>{const k=w.subscribe(sl.QUEUE_ITEMS_UPDATED,P=>{var Q;P.object_id==((Q=t.activePlayerQueue)==null?void 0:Q.queue_id)&&(P.data,z())});Ze(k)});const B=function(k){var Q;if(!((Q=t.curQueueItem)!=null&&Q.media_item))return;if(!t.curQueueItem.media_item.favorite){w.toggleFavorite(t.curQueueItem.media_item);return}const P=[{label:"favorites_remove",labelArgs:[],action:()=>{w.toggleFavorite(t.curQueueItem.media_item)},icon:"mdi-heart"},{label:"add_playlist",labelArgs:[],action:()=>{Ie.emit("playlistdialog",{items:[t.curQueueItem.media_item]})},icon:"mdi-plus-circle-outline"}];Ie.emit("contextmenu",{items:P,posX:k.clientX,posY:k.clientY})},E=function(){p.value=!0,Jt(100).then(()=>{p.value=!1})};return te(()=>t.activePlayerId,k=>{z()},{immediate:!0}),te(()=>s.colorPalette,k=>{!k.darkColor||!k.lightColor?f.value=Ye.theme.current.value.dark?"#000":"#fff":f.value=Ye.theme.current.value.dark?k.darkColor:k.lightColor}),(k,P)=>(d(),V($a,{modelValue:e(t).showFullscreenPlayer,"onUpdate:modelValue":P[12]||(P[12]=Q=>e(t).showFullscreenPlayer=Q),fullscreen:"",scrim:!1,transition:"dialog-bottom-transition","z-index":"9999"},{default:y(()=>[c(je,{color:e(nl)(f.value,70,80)},{default:y(()=>{var Q,R,Y,ae,ne,de,Pe,ge,Ce,Le,et,J,Re,We,He,Qt,Tt,Mt,Bt,Et,qt,zt,At,Lt,Rt,Wt,Ht,Dt,Nt,Ut,Ft,Ot,Yt,xt,Xt,Gt,jt,Kt;return[c(Nl,{class:"v-toolbar-default",color:"transparent"},{prepend:y(()=>[c(le,{icon:"",onClick:P[0]||(P[0]=T=>e(t).showFullscreenPlayer=!1)},{default:y(()=>[c(U,{icon:"mdi-chevron-down"})]),_:1})]),append:y(()=>{var T;return[(T=e(t).activePlayerQueue)!=null&&T.radio_source.length?(d(),V(It,{key:0,scrim:""},{activator:y(({props:O})=>[c(le,j(O,{icon:""}),{default:y(()=>[c(U,{color:"accent",icon:"mdi-radio-tower"})]),_:2},1040)]),default:y(()=>[c(je,{title:k.$t("queue_radio_enabled"),subtitle:k.$t("queue_radio_based_on")},{text:y(()=>{var O;return[(d(!0),g(x,null,ie((O=e(t).activePlayerQueue)==null?void 0:O.radio_source,K=>(d(),g("div",{key:K.uri},[M("a",{onClick:Te=>S(K)},I(K.name),9,Xi)]))),128))]}),_:1},8,["title","subtitle"])]),_:1})):C("",!0),b.value?C("",!0):(d(),V(Ra,{key:1})),c(le,{icon:"",onClick:se(W,["stop"])},{default:y(()=>[c(U,{icon:"mdi-dots-vertical"})]),_:1})]}),_:1}),M("div",Gi,[e(X)("bp7")||!e(t).showQueueItems?(d(),g("div",ji,[k.$vuetify.display.height>600?(d(),g("div",Ki,[((Q=e(t).activePlayer)==null?void 0:Q.powered)!=!1&&((ae=(Y=(R=e(t).curQueueItem)==null?void 0:R.streamdetails)==null?void 0:Y.stream_metadata)!=null&&ae.image_url)?(d(),V(Ve,{key:0,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:e(t).curQueueItem.streamdetails.stream_metadata.image_url},null,8,["src"])):((ne=e(t).activePlayer)==null?void 0:ne.powered)!=!1&&!((de=e(t).curQueueItem)!=null&&de.image)&&((ge=(Pe=e(t).activePlayer)==null?void 0:Pe.current_media)!=null&&ge.image_url)?(d(),V(Ve,{key:1,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:e(t).activePlayer.current_media.image_url},null,8,["src"])):((Ce=e(t).activePlayer)==null?void 0:Ce.powered)!=!1?(d(),V(Ee,{key:2,item:e(t).curQueueItem,thumbnail:!1,style:{"max-width":"100%",width:"auto"},fallback:k.$vuetify.theme.current.dark?e(Ge):e(mt)},null,8,["item","fallback"])):(d(),V(Ve,{key:3,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:k.$vuetify.theme.current.dark?e(Ge):e(mt)},null,8,["src"]))])):C("",!0),M("div",Zi,[((Le=e(t).activePlayer)==null?void 0:Le.powered)==!1?(d(),V(Fe,{key:0,style:G(`font-size: ${v.value};`)},{default:y(()=>{var T;return[N(I((T=e(t).activePlayer)==null?void 0:T.display_name),1)]}),_:1},8,["style"])):(et=e(t).curQueueItem)!=null&&et.media_item?(d(),V(Fe,{key:1,style:G(`font-size: ${v.value};cursor:pointer;`),onClick:P[1]||(P[1]=T=>S(e(t).curQueueItem.media_item))},{default:y(()=>[c(re,{sync:e(o)},{default:y(()=>[N(I(e(t).curQueueItem.media_item.name)+" ",1),"version"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.version?(d(),g("span",Ji,"("+I(e(t).curQueueItem.media_item.version)+")",1)):C("",!0)]),_:1},8,["sync"])]),_:1},8,["style"])):!e(t).activePlayerQueue&&((Re=(J=e(t).activePlayer)==null?void 0:J.current_media)!=null&&Re.title)?(d(),V(Fe,{key:2},{default:y(()=>{var T,O,K,Te;return[(O=(T=e(t).activePlayer)==null?void 0:T.current_media)!=null&&O.artist?(d(),g("div",eo,[c(re,{sync:e(o)},{default:y(()=>{var De,Ne;return[N(I((Ne=(De=e(t).activePlayer)==null?void 0:De.current_media)==null?void 0:Ne.artist),1)]}),_:1},8,["sync"])])):C("",!0),(Te=(K=e(t).activePlayer)==null?void 0:K.current_media)!=null&&Te.title?(d(),g("div",{key:1,style:G(`font-size: ${_.value};`)},[c(re,{sync:e(o)},{default:y(()=>{var De,Ne;return[N(I((Ne=(De=e(t).activePlayer)==null?void 0:De.current_media)==null?void 0:Ne.title),1)]}),_:1},8,["sync"])],4)):C("",!0)]}),_:1})):(d(),V(Fe,{key:3,style:G(`font-size: ${v.value};cursor:pointer;`),onClick:P[2]||(P[2]=T=>e(t).showPlayersMenu=!0)},{default:y(()=>[c(re,{sync:e(o)},{default:y(()=>{var T;return[N(I(((T=e(t).activePlayer)==null?void 0:T.display_name)||k.$t("no_player")),1)]}),_:1},8,["sync"])]),_:1},8,["style"])),((We=e(t).activePlayer)==null?void 0:We.powered)==!1?(d(),V(be,{key:4,class:"text-h6 text-md-h5 text-lg-h4"},{default:y(()=>[N(I(k.$t("off")),1)]),_:1})):C("",!0),(Tt=(Qt=(He=e(t).curQueueItem)==null?void 0:He.streamdetails)==null?void 0:Qt.stream_metadata)!=null&&Tt.title&&((Mt=e(t).activePlayer)==null?void 0:Mt.powered)!=!1?(d(),V(be,{key:5,class:"text-h6 text-md-h5 text-lg-h4",onClick:P[3]||(P[3]=T=>{var O,K,Te;return L(((Te=(K=(O=e(t).curQueueItem)==null?void 0:O.streamdetails)==null?void 0:K.stream_metadata)==null?void 0:Te.artist)+" - "+e(t).curQueueItem.streamdetails.stream_metadata.title)})},{default:y(()=>[c(re,{sync:e(o)},{default:y(()=>{var T,O,K;return[(K=(O=(T=e(t).curQueueItem)==null?void 0:T.streamdetails)==null?void 0:O.stream_metadata)!=null&&K.artist?(d(),g("span",to,I(e(t).curQueueItem.streamdetails.stream_metadata.artist)+" - ",1)):C("",!0),N(I(e(t).curQueueItem.streamdetails.stream_metadata.title),1)]}),_:1},8,["sync"])]),_:1})):C("",!0),(Bt=e(t).curQueueItem)!=null&&Bt.media_item&&"album"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.album&&((Et=e(t).activePlayer)==null?void 0:Et.powered)!=!1?(d(),V(be,{key:6,style:G(`font-size: ${_.value};cursor:pointer;`),onClick:P[4]||(P[4]=T=>S(e(t).curQueueItem.media_item.album))},{default:y(()=>[c(re,{sync:e(o)},{default:y(()=>[N(I(e(t).curQueueItem.media_item.album.name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):C("",!0),(qt=e(t).curQueueItem)!=null&&qt.media_item&&"artists"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.artists.length&&((zt=e(t).activePlayer)==null?void 0:zt.powered)!=!1?(d(),V(be,{key:7,style:G(`font-size: ${_.value};cursor:pointer;`),onClick:P[5]||(P[5]=T=>S(e(t).curQueueItem.media_item.artists[0]))},{default:y(()=>[c(re,{sync:e(o)},{default:y(()=>[N(I(e(t).curQueueItem.media_item.artists[0].name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):C("",!0),(At=e(t).curQueueItem)!=null&&At.media_item&&"podcast"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.podcast?(d(),V(be,{key:8,style:G(`font-size: ${_.value};`)},{default:y(()=>[c(re,{sync:e(o)},{default:y(()=>[N(I(e(t).curQueueItem.media_item.podcast.name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):((Lt=e(t).activePlayer)==null?void 0:Lt.active_source)!=((Rt=e(t).activePlayer)==null?void 0:Rt.player_id)&&((Wt=e(t).activePlayer)!=null&&Wt.active_source)&&((Ht=e(t).activePlayer)==null?void 0:Ht.active_source)in e(w).queues?(d(),V(be,{key:9},{default:y(()=>{var T;return[N(I(k.$t("external_source_active",[(T=e(w).queues[e(t).activePlayer.active_source])==null?void 0:T.display_name])),1)]}),_:1})):((Dt=e(t).activePlayer)==null?void 0:Dt.active_source)!=((Nt=e(t).activePlayer)==null?void 0:Nt.player_id)&&((Ut=e(t).activePlayer)==null?void 0:Ut.powered)!=!1?(d(),V(be,{key:10},{default:y(()=>{var T;return[N(I(k.$t("external_source_active",[(T=e(t).activePlayer)==null?void 0:T.active_source])),1)]}),_:1})):e(t).activePlayerQueue&&e(t).activePlayerQueue.items==0&&((Ft=e(t).activePlayer)==null?void 0:Ft.powered)!=!1?(d(),V(be,{key:11,style:G(`font-size: ${_.value}`)},{default:y(()=>[N(I(k.$t("queue_empty")),1)]),_:1},8,["style"])):C("",!0),((Ot=e(t).activePlayer)==null?void 0:Ot.powered)!=!1?(d(),g("div",ao,[c(Va)])):C("",!0)])])):C("",!0),e(t).showQueueItems?(d(),g("div",lo,[c(xi,{modelValue:r.value,"onUpdate:modelValue":P[6]||(P[6]=T=>r.value=T),"hide-slider":"",density:"compact",onClick:E},{default:y(()=>[c(yt,{value:0},{default:y(()=>{var T,O;return[N(I(k.$t("queue"))+" ",1),c(vt,{color:"grey",content:(((T=e(t).activePlayerQueue)==null?void 0:T.items)||0)-(((O=e(t).activePlayerQueue)==null?void 0:O.current_index)||0),inline:""},null,8,["content"])]}),_:1}),c(yt,{value:1},{default:y(()=>{var T;return[N(I(k.$t("played"))+" ",1),c(vt,{color:"grey",content:(T=e(t).activePlayerQueue)==null?void 0:T.current_index,inline:""},null,8,["content"])]}),_:1})]),_:1},8,["modelValue"]),M("div",io,[p.value?C("",!0):(d(),V(Dl,{key:0,onLoad:H,"empty-text":"",height:"100%"},{default:y(()=>[c(Fl,{"item-height":70,"max-height":"90%",items:r.value==0?m.value:h.value},{default:y(({item:T,index:O})=>[c(Ya,{link:"","show-menu-btn":!0,onClick:se(K=>q(K,T),["stop"]),onMenu:se(K=>q(K,T),["stop"]),onMouseenter:K=>n.value=O,onMouseleave:P[7]||(P[7]=K=>n.value=-1)},{prepend:y(()=>[M("div",oo,[c(Ee,{size:"50",item:T},null,8,["item"])])]),title:y(()=>[c(re,{sync:O==0&&r.value==0?e(o):e(l),disabled:!(O==0&&r.value==0||n.value==O)},{default:y(()=>[N(I(T.name),1)]),_:2},1032,["sync","disabled"])]),subtitle:y(()=>[M("div",so,[M("span",no,I(e(tt)(T.duration))+" | ",1),c(re,{sync:O==0&&r.value==0?e(o):e(l),disabled:!(O==0&&r.value==0||n.value==O)},{default:y(()=>[T.media_item&&"album"in T.media_item&&T.media_item.album?(d(),g("span",ro,I(T.media_item.album.name),1)):C("",!0)]),_:2},1032,["sync","disabled"])])]),_:2},1032,["onClick","onMenu","onMouseenter"])]),_:1},8,["items"])]),_:1}))])])):C("",!0),!e(t).showQueueItems&&k.$vuetify.display.height<=600?(d(),g("div",uo,[M("div",co,[c(Ee,{item:e(t).curQueueItem,thumbnail:!1,style:{"max-width":"100%",width:"auto"}},null,8,["item"])])])):C("",!0)]),M("div",mo,[M("div",vo,[c(Ma,{"show-labels":!0})]),M("div",po,[e(t).activePlayerQueue?(d(),V(Qe,{key:0,disabled:!((Yt=e(t).curQueueItem)!=null&&Yt.media_item),icon:(Xt=(xt=e(t).curQueueItem)==null?void 0:xt.media_item)!=null&&Xt.favorite?"mdi-heart":"mdi-heart-outline",title:k.$t("tooltip.favorite"),type:"btn",class:"media-controls-item","max-height":"30px",onClick:B},null,8,["disabled","icon","title"])):C("",!0),k.$vuetify.display.mdAndUp?(d(),V(Ea,{key:1,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"30px"},null,8,["player-queue"])):C("",!0),c(za,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),c(qa,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"100px"},null,8,["player","player-queue"]),c(Aa,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),k.$vuetify.display.mdAndUp?(d(),V(Ba,{key:2,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"35px"},null,8,["player-queue"])):C("",!0),e(t).activePlayerQueue?(d(),V(La,{key:3,class:"media-controls-item","max-height":"30px"})):C("",!0)]),e(t).activePlayer?(d(),g("div",yo,[c(Ke,{width:"100%","is-powered":((Gt=e(t).activePlayer)==null?void 0:Gt.powered)!=!1,disabled:!e(t).activePlayer||!((jt=e(t).activePlayer)!=null&&jt.available),"model-value":Math.round(((Kt=e(t).activePlayer)==null?void 0:Kt.group_volume)||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus","allow-wheel":!0,"onUpdate:modelValue":P[8]||(P[8]=T=>e(t).activePlayer.group_childs.length>0?e(w).playerCommandGroupVolume(e(t).activePlayerId,T):e(w).playerCommandVolumeSet(e(t).activePlayerId,T)),"onClick:prepend":P[9]||(P[9]=T=>e(t).activePlayer.group_childs.length>0?e(w).playerCommandGroupVolumeDown(e(t).activePlayerId):e(w).playerCommandVolumeDown(e(t).activePlayerId)),"onClick:append":P[10]||(P[10]=T=>e(t).activePlayer.group_childs.length>0?e(w).playerCommandGroupVolumeUp(e(t).activePlayerId):e(w).playerCommandVolumeUp(e(t).activePlayerId))},null,8,["is-powered","disabled","model-value"])])):C("",!0),b.value?(d(),g("div",fo,[c(ke,{class:"responsive-icon-holder-btn",variant:"outlined",onClick:P[11]||(P[11]=T=>e(t).showPlayersMenu=!0)},{default:y(()=>{var T;return[c(U,{icon:((T=e(t).activePlayer)==null?void 0:T.icon)||"mdi-speaker"},null,8,["icon"]),N(" "+I(e(t).activePlayer?e(st)(e(t).activePlayer):""),1)]}),_:1})])):C("",!0)])]}),_:1},8,["color"])]),_:1},8,["modelValue"]))}}),_o=oe(ho,[["__scopeId","data-v-9b1101dc"]]),go={key:0},bo={key:2},wo={key:3,class:"icon-thumb"},ko={key:0},Po={key:2},Co={key:3},Io={key:4},Vo={key:0,class:"pl-4"},$o={key:0},So={key:1},Qo={key:2},To={key:3},Mo={key:4,class:"line-clamp-1"},Bo={key:0},Eo={key:5,class:"line-clamp-1"},qo={key:6},zo={key:7,class:"line-clamp-1"},Ao={key:8,class:"line-clamp-1"},Lo={key:0},Ro=F({__name:"PlayerTrackDetails",props:{showOnlyArtist:{type:Boolean,default:!1},showQualityDetailsBtn:{type:Boolean,default:!0},colorPalette:{},primaryColor:{default:""}},setup(a){const i=new pt,s=a,o=$(()=>{var n,l;return(l=(n=t.activePlayerQueue)==null?void 0:n.current_item)==null?void 0:l.streamdetails});return(n,l)=>(d(),g(x,null,[c(ce,{style:{height:"auto",width:"fit-content",margin:"0px",padding:"0px"},lines:"two"},{prepend:y(()=>{var u,f,r,p,m,h,v,_,b,S,L,q,W,D;return[M("div",{class:"media-thumb player-media-thumb",style:G(`cursor: pointer;height: ${e(X)({breakpoint:"phone"})?50:64}px; width: ${e(X)({breakpoint:"phone"})?50:64}px; `),onClick:l[0]||(l[0]=z=>e(t).showFullscreenPlayer=!0)},[((u=e(t).activePlayer)==null?void 0:u.powered)!=!1&&((p=(r=(f=e(t).curQueueItem)==null?void 0:f.streamdetails)==null?void 0:r.stream_metadata)!=null&&p.image_url)?(d(),g("div",go,[c(Ve,{class:"media-thumb",style:{"border-radius":"4px"},size:"55",src:e(t).curQueueItem.streamdetails.stream_metadata.image_url},null,8,["src"])])):((m=e(t).activePlayer)==null?void 0:m.powered)!=!1&&((h=e(t).curQueueItem)!=null&&h.media_item||(v=e(t).curQueueItem)!=null&&v.image)?(d(),V(Ee,{key:1,item:((_=e(t).curQueueItem)==null?void 0:_.media_item)||e(t).curQueueItem,fallback:e(Ge)},null,8,["item","fallback"])):((b=e(t).activePlayer)==null?void 0:b.powered)!=!1&&((L=(S=e(t).activePlayer)==null?void 0:S.current_media)!=null&&L.image_url)?(d(),g("div",bo,[c(Ve,{class:"media-thumb",style:{"border-radius":"4px"},size:"55",src:e(t).activePlayer.current_media.image_url},null,8,["src"])])):(d(),g("div",wo,[c(U,{size:"35",icon:((q=e(t).activePlayer)==null?void 0:q.type)==e(fe).PLAYER&&((W=e(t).activePlayer)!=null&&W.group_childs.length)?"mdi-speaker-multiple":((D=e(t).activePlayer)==null?void 0:D.icon)||"mdi-speaker",style:{display:"table-cell",opacity:"0.8"}},null,8,["icon"])]))],4)]}),title:y(()=>{var u,f,r,p,m,h;return[M("div",{style:G({cursor:"pointer",color:n.primaryColor})},[((u=e(t).activePlayer)==null?void 0:u.powered)==!1?(d(),g("div",{key:0,onClick:l[1]||(l[1]=v=>e(t).showPlayersMenu=!0)},I((f=e(t).activePlayer)==null?void 0:f.display_name),1)):(r=e(t).curQueueItem)!=null&&r.media_item?(d(),g("div",{key:1,onClick:l[2]||(l[2]=v=>e(t).showFullscreenPlayer=!0)},[c(re,{sync:e(i)},{default:y(()=>[N(I(e(t).curQueueItem.media_item.name)+" ",1),"version"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.version?(d(),g("span",ko,"("+I(e(t).curQueueItem.media_item.version)+")",1)):C("",!0)]),_:1},8,["sync"])])):e(t).curQueueItem?(d(),g("div",Po,I(e(t).curQueueItem.name),1)):!e(t).activePlayerQueue&&((m=(p=e(t).activePlayer)==null?void 0:p.current_media)!=null&&m.title)?(d(),g("div",Co,I(e(t).activePlayer.current_media.title),1)):e(t).activePlayer?(d(),g("div",Io,I((h=e(t).activePlayer)==null?void 0:h.display_name),1)):(d(),g("div",{key:5,onClick:l[3]||(l[3]=v=>e(t).showPlayersMenu=!0)},I(n.$t("no_player")),1))],4)]}),append:y(()=>{var u;return[(u=o.value)!=null&&u.audio_format.content_type&&!e(X)({breakpoint:"phone"})&&n.showQualityDetailsBtn?(d(),g("div",Vo,[c(Va)])):C("",!0)]}),subtitle:y(()=>{var u;return[M("div",{style:G({cursor:"pointer",color:n.primaryColor}),class:"line-clamp-1",onClick:l[4]||(l[4]=f=>e(t).showFullscreenPlayer=!0)},[c(re,{sync:e(i)},{default:y(()=>{var f,r,p,m,h,v,_,b,S,L,q,W,D,z,H,B,E,k,P,Q;return[((f=e(t).activePlayer)==null?void 0:f.powered)==!1?(d(),g("div",$o,I(n.$t("off")),1)):e(t).curQueueItem&&((r=e(t).curQueueItem.media_item)==null?void 0:r.media_type)==e(he).TRACK&&"album"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.album&&!s.showOnlyArtist?(d(),g("div",So,I(e(ga)(e(t).curQueueItem.media_item.artists))+" • "+I(e(t).curQueueItem.media_item.album.name),1)):(p=e(t).curQueueItem)!=null&&p.media_item&&"artists"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.artists.length>0?(d(),g("div",Qo,I(e(t).curQueueItem.media_item.artists[0].name),1)):(m=e(t).curQueueItem)!=null&&m.media_item&&"podcast"in e(t).curQueueItem.media_item&&((h=e(t).curQueueItem.media_item.podcast)!=null&&h.name)?(d(),g("div",To,I(e(t).curQueueItem.media_item.podcast.name),1)):(b=(_=(v=e(t).curQueueItem)==null?void 0:v.streamdetails)==null?void 0:_.stream_metadata)!=null&&b.title?(d(),g("div",Mo,[(q=(L=(S=e(t).curQueueItem)==null?void 0:S.streamdetails)==null?void 0:L.stream_metadata)!=null&&q.artist?(d(),g("span",Bo,I(e(t).curQueueItem.streamdetails.stream_metadata.artist)+" - ",1)):C("",!0),N(I((D=(W=e(t).curQueueItem)==null?void 0:W.streamdetails)==null?void 0:D.stream_metadata.title),1)])):(H=(z=e(t).curQueueItem)==null?void 0:z.media_item)!=null&&H.metadata.description?(d(),g("div",Eo,I(e(ba)(e(t).curQueueItem.media_item.metadata.description,100)),1)):!e(t).activePlayerQueue&&((B=e(t).activePlayer)!=null&&B.active_source)&&((k=(E=e(t).activePlayer)==null?void 0:E.current_media)!=null&&k.artist)?(d(),g("div",qo,I(e(t).activePlayer.current_media.artist),1)):!e(t).activePlayerQueue&&((P=e(t).activePlayer)!=null&&P.active_source)?(d(),g("div",zo,I(n.$t("external_source_active",[(Q=e(t).activePlayer)==null?void 0:Q.active_source])),1)):e(t).activePlayerQueue&&e(t).activePlayerQueue.items==0?(d(),g("div",Ao,I(n.$t("queue_empty")),1)):C("",!0)]}),_:1},8,["sync"]),e(t).activePlayer&&((u=e(t).activePlayer)==null?void 0:u.powered)!=!1?(d(),g("div",Lo,I(e(st)(e(t).activePlayer)),1)):C("",!0)],4)]}),_:1}),c(_o,{"show-fullscreen":e(t).showFullscreenPlayer,"color-palette":n.colorPalette},null,8,["show-fullscreen","color-palette"])],64))}}),Wo={key:1,class:"text-caption volumecaption"},Ho={key:0,class:"text-caption volumecaption"},Do=F({__name:"VolumeControl",props:{player:{},showSyncControls:{type:Boolean},showSubPlayers:{type:Boolean},showHeadingRow:{type:Boolean},showVolumeControl:{type:Boolean},allowWheel:{type:Boolean}},setup(a){const i=a,s=A([]),o=A([]),n=A(void 0),l=$(()=>i.player.group_childs.length>0),u=function(r){var m,h;const p=[];for(const v of r.group_childs){const _=(m=w)==null?void 0:m.players[v];_.volume_control!=ue&&_&&_.available&&!p.includes(_)&&p.push(_)}if(i.showSyncControls&&r.supported_features.includes(_e.SET_MEMBERS))for(const v of Object.values((h=w)==null?void 0:h.players))v.player_id!=r.player_id&&(!r.can_group_with.includes(v.player_id)&&!r.can_group_with.includes(v.provider)||v.available&&(v.active_group&&v.active_group!=r.player_id||v.active_source&&v.state==we.PLAYING&&![r.player_id,v.player_id].includes(v.active_source)||p.includes(v)||p.push(v)));return p.sort((v,_)=>v.display_name.toUpperCase()>_.display_name.toUpperCase()?1:-1),p},f=async function(r,p){const m=i.player.player_id;p?(o.value.includes(r)&&(o.value=o.value.filter(h=>h!=r)),s.value.includes(r)||s.value.push(r),w.players[m].group_childs.push(r)):(s.value.includes(r)&&(s.value=s.value.filter(h=>h!=r)),o.value.includes(r)||o.value.push(r),w.players[m].group_childs=w.players[m].group_childs.filter(h=>h!=r)),n.value!=null&&clearTimeout(n.value),n.value=setTimeout(async()=>{o.value.length>0&&w.playerCommandUnGroupMany(o.value).catch(async()=>{w.players[m]=await w.getPlayer(m)}).finally(()=>{o.value=[]}),s.value.length>0&&w.playerCommandGroupMany(m,s.value).catch(async()=>{w.players[m]=await w.getPlayer(m)}).finally(()=>{s.value=[]})},1e3)};return(r,p)=>(d(),V($e,{style:{overflow:"hidden",padding:"0"},lines:"two"},{default:y(()=>[r.showHeadingRow?(d(),V(ce,{key:0,class:"volumesliderrow heading",link:!1,style:G(r.player.powered==!1?"opacity: 0.6":"opacity: 1")},{prepend:y(()=>[c(U,{size:25,icon:r.player.icon,style:{"margin-left":"6px",opacity:"0.6"}},null,8,["icon"])]),default:y(()=>[M("h5",null,I(e(st)(r.player,27)),1)]),append:y(()=>[c(le,{class:"powerbtn",variant:"icon",onClick:p[0]||(p[0]=se(m=>e(w).playerCommandPowerToggle(r.player.player_id),["stop"]))},{default:y(()=>[c(U,{size:25,icon:"mdi-power"})]),_:1})]),_:1},8,["style"])):C("",!0),r.showVolumeControl&&(r.player.volume_control!=e(ue)||r.player.group_childs.length)?(d(),V(ce,{key:1,class:"volumesliderrow",link:!1,style:G(r.player.powered==!1?"opacity: 0.35":"opacity: 0.75")},{prepend:y(()=>[c(le,{icon:"",style:{height:"25px"},disabled:r.player.type==e(fe).GROUP||r.player.group_childs.length>0||r.player.mute_control==e(ue),onClick:p[1]||(p[1]=se(m=>e(w).playerCommandMuteToggle(r.player.player_id),["stop"]))},{default:y(()=>[c(U,{size:25,icon:r.player.volume_muted?"mdi-volume-mute":"mdi-volume-medium"},null,8,["icon"])]),_:1},8,["disabled"])]),default:y(()=>[r.player.volume_control!=e(ue)||r.player.group_childs.length?(d(),V(Ke,{key:0,color:"secondary",width:"100%","is-powered":r.player.powered!=!1,disabled:!r.player.available,"model-value":Math.round(r.player.group_childs.length?r.player.group_volume:r.player.volume_level||0),onClick:p[2]||(p[2]=se(()=>{},["stop"])),"onUpdate:modelValue":p[3]||(p[3]=m=>r.player.group_childs.length>0?e(w).playerCommandGroupVolume(r.player.player_id,m):e(w).playerCommandVolumeSet(r.player.player_id,m))},null,8,["is-powered","disabled","model-value"])):C("",!0)]),append:y(()=>[l.value&&!r.showSubPlayers?(d(),V(U,{key:0,class:"expandbtn"},{default:y(()=>p[7]||(p[7]=[N(" mdi-chevron-down ")])),_:1})):(d(),g("div",Wo,I(Math.round(r.player.group_childs.length?r.player.group_volume:r.player.volume_level||0)),1))]),_:1},8,["style"])):C("",!0),r.showSubPlayers&&(r.player.group_childs.length>0||r.showSyncControls)&&u(r.player).length>0?(d(),g("div",{key:2,onClick:p[6]||(p[6]=se(()=>{},["stop"]))},[c(Xe,{style:{"margin-top":"10px","margin-bottom":"15px"}}),(d(!0),g(x,null,ie(u(r.player),m=>(d(),g("div",{key:m.player_id},[c(ce,{class:"volumesliderrow",link:!1,style:G(m.powered!=!1||r.showSyncControls?"opacity: 0.75":"opacity: 0.4"),onClick:p[4]||(p[4]=se(()=>{},["stop"]))},{prepend:y(()=>[c(U,{size:30,icon:m.icon,style:{"margin-left":"6px",opacity:"0.6"}},null,8,["icon"])]),default:y(()=>[M("h6",null,I(e(ba)(m.display_name,27)),1)]),append:y(()=>[r.showSyncControls?(d(),V(Ol,{key:0,ripple:!1,disabled:m.player_id==r.player.player_id,"model-value":r.player.group_childs.includes(m.player_id)||m.player_id==r.player.player_id,size:"22",class:"checkbox","onUpdate:modelValue":h=>f(m.player_id,h)},null,8,["disabled","model-value","onUpdate:modelValue"])):C("",!0)]),_:2},1032,["style"]),m.volume_control!=e(ue)?(d(),V(ce,{key:0,class:"volumesliderrow",link:!1,style:G(m.powered==!1?"opacity: 0.4":"opacity: 0.75"),onClick:p[5]||(p[5]=se(()=>{},["stop"]))},{prepend:y(()=>[c(le,{icon:"",disabled:!m.available||m.mute_control==e(ue),style:{height:"25px"},onClick:h=>e(w).playerCommandMuteToggle(m.player_id)},{default:y(()=>[c(U,{size:25,icon:m.volume_muted?"mdi-volume-mute":"mdi-volume-medium"},null,8,["icon"])]),_:2},1032,["disabled","onClick"])]),default:y(()=>[m.volume_control!=e(ue)?(d(),V(Ke,{key:0,color:"secondary",width:"100%","is-powered":m.powered!=!1,disabled:!m.available,"allow-wheel":r.allowWheel,"model-value":Math.round(m.volume_level||0),"onUpdate:modelValue":h=>e(w).playerCommandVolumeSet(m.player_id,h)},null,8,["is-powered","disabled","allow-wheel","model-value","onUpdate:modelValue"])):C("",!0)]),append:y(()=>[m.volume_control!=e(ue)?(d(),g("div",Ho,I(m.volume_level),1)):C("",!0)]),_:2},1032,["style"])):C("",!0),p[8]||(p[8]=M("div",{style:{height:"14px"}},null,-1))]))),128))])):C("",!0)]),_:1}))}}),Oa=oe(Do,[["__scopeId","data-v-17d656c6"]]),No={key:0},Uo={key:0},Fo={class:"text-caption"},Oo={key:1},Yo=F({__name:"VolumeBtn",props:{volumeSize:{default:"150px"},responsiveVolumeSize:{type:Boolean,default:!0},isVisible:{type:Boolean,default:!0},color:{default:""}},setup(a){const i=a,s=A(!1);return(o,n)=>i.isVisible&&e(t).activePlayer?(d(),g("div",No,[c(It,{modelValue:s.value,"onUpdate:modelValue":n[1]||(n[1]=l=>s.value=l),class:"volume-control-dialog","close-on-content-click":!1,location:"top",scrim:o.$vuetify.theme.current.dark?"rgba(0,0,0,.75)":"rgba(0,0,0,.85)"},{activator:y(({props:l})=>{var u,f;return[e(X)("bp6")||!o.responsiveVolumeSize?(d(),g("div",Uo,[c(Ke,{style:"margin-right: 0px; margin-left: 0px;",width:o.volumeSize,"is-powered":!0,"model-value":e(t).activePlayer.group_childs.length>0?Math.round(((u=e(t).activePlayer)==null?void 0:u.group_volume)||0):Math.round(((f=e(t).activePlayer)==null?void 0:f.volume_level)||0),"allow-wheel":!0,"onUpdate:modelValue":n[0]||(n[0]=r=>{var p,m;return e(t).activePlayer.group_childs.length>0?e(w).playerCommandGroupVolume(((p=e(t).activePlayer)==null?void 0:p.player_id)||"",r):e(w).playerCommandVolumeSet(((m=e(t).activePlayer)==null?void 0:m.player_id)||"",r)})},{prepend:y(()=>[c(le,j({variant:"icon",size:"48",ripple:!1},{...l}),{default:y(()=>{var r,p;return[c(U,{color:i.color?o.color:"",size:24,icon:"mdi-volume-high"},null,8,["color"]),M("div",Fo,I(e(t).activePlayer.group_childs.length>0?Math.round(((r=e(t).activePlayer)==null?void 0:r.group_volume)||0):Math.round(((p=e(t).activePlayer)==null?void 0:p.volume_level)||0)),1)]}),_:2},1040)]),_:2},1032,["width","model-value"])])):(d(),g("div",Oo,[c(le,j({...l},{size:"48",variant:"icon"}),{default:y(()=>{var r,p;return[c(U,{color:i.color?o.color:"",icon:"mdi-volume-high"},null,8,["color"]),M("div",{class:"text-caption",style:G({color:i.color?o.color:""})},I(e(t).activePlayer.group_childs.length>0?Math.round(((r=e(t).activePlayer)==null?void 0:r.group_volume)||0):Math.round(((p=e(t).activePlayer)==null?void 0:p.volume_level)||0)),5)]}),_:2},1040)]))]}),default:y(()=>[c(je,{"min-width":300,style:{overflow:"hidden","padding-top":"20px","padding-bottom":"20px","padding-right":"20px"}},{default:y(()=>[e(t).activePlayer?(d(),V(Oa,{key:0,player:e(t).activePlayer,"show-sub-players":!0,"show-sync-controls":!1,"show-heading-row":!0,"show-volume-control":!0,"allow-wheel":!0,style:{"margin-left":"18px"}},null,8,["player"])):C("",!0)]),_:1})]),_:1},8,["modelValue","scrim"])])):C("",!0)}}),xo=oe(Yo,[["__scopeId","data-v-f4084555"]]),Xo=F({__name:"PlayerExtendedControls",props:{queue:{default:()=>({isVisible:!0,showQueueDialog:!1})},player:{default:()=>({isVisible:!0})},volume:{default:()=>({isVisible:!0,volumeSize:"150px",responsiveVolumeSize:!1})}},setup(a){return(i,s)=>(d(),g(x,null,[i.player&&i.player.isVisible?(d(),V(Ra,{key:0,color:i.player.color},null,8,["color"])):C("",!0),i.queue&&i.queue.isVisible?(d(),V(La,{key:1,color:i.player.color,style:{"padding-left":"15px","padding-right":"20px"}},null,8,["color"])):C("",!0),i.volume&&i.volume.isVisible?(d(),V(xo,{key:2,color:i.volume.color,"volume-size":i.volume.volumeSize,"responsive-volume-size":i.volume.responsiveVolumeSize},null,8,["color","volume-size","responsive-volume-size"])):C("",!0)],64))}}),Go=["data-floating"],jo=["data-mobile"],Ko={class:"mediacontrols-left"},Zo={class:"mediacontrols-bottom-center"},Jo={class:"mediacontrols-bottom-right"},es={key:0,class:"volume-slider"},ts=F({__name:"Player",props:{useFloatingPlayer:{type:Boolean}},setup(a){rl(l=>({"7138c534":n.value})),pa();const{mobile:i}=ht({mobileBreakpoint:576}),s=A({0:"",1:"",2:"",3:"",4:"",5:"",lightColor:"",darkColor:""}),o=new Image;o.src=Ye.theme.current.value.dark?Ge:mt,o.crossOrigin="Anonymous",o.addEventListener("load",function(){s.value=ul(o)});const n=$(()=>Ye.theme.current.value.dark?s.value&&s.value.darkColor?s.value.darkColor+"26":"CCCCCC26":s.value&&s.value.lightColor?s.value.lightColor+"26":"CCCCCC26");return te(()=>{var l;return(l=t.curQueueItem)==null?void 0:l.queue_item_id},()=>{var l;(l=t.curQueueItem)!=null&&l.media_item?o.src=ta(t.curQueueItem.media_item,ea.THUMB)||"":t.curQueueItem?o.src=ta(t.curQueueItem,ea.THUMB)||"":o.src=""}),(l,u)=>{var f,r,p,m,h,v,_,b,S,L,q;return d(),g(x,null,[M("div",{class:"mediacontrols-bg","data-floating":l.useFloatingPlayer},null,8,Go),M("div",{class:"mediacontrols","data-mobile":e(i)},[M("div",Ko,[c(Ro,{"show-quality-details-btn":!!e(X)("bp8"),"show-only-artist":!e(X)("bp7"),"color-palette":s.value,"primary-color":l.$vuetify.theme.current.dark?"#fff":"#000"},null,8,["show-quality-details-btn","show-only-artist","color-palette","primary-color"])]),M("div",Zo,[c(ua,{"visible-components":{repeat:{isVisible:e(X)("bp3")},shuffle:{isVisible:e(X)("bp3")},play:{isVisible:!0,icon:{staticWidth:"50px",staticHeight:"50px"},withCircle:l.useFloatingPlayer},previous:{isVisible:e(X)("bp3")},next:{isVisible:e(X)("bp3")}}},null,8,["visible-components"]),e(X)("bp6")?(d(),V(Ma,{key:0,color:l.$vuetify.theme.current.dark?s.value.lightColor||"#fff":s.value.darkColor||"#000","is-progress-bar":!1,disabled:!((f=e(t).activePlayerQueue)!=null&&f.active)||((m=(p=(r=e(t).activePlayerQueue)==null?void 0:r.current_item)==null?void 0:p.media_item)==null?void 0:m.media_type)!==e(he).TRACK},null,8,["color","disabled"])):C("",!0)]),M("div",Jo,[M("div",null,[c(Xo,{queue:{isVisible:e(X)("bp3"),color:l.$vuetify.theme.current.dark?"#fff":"#000"},player:{isVisible:!0,color:l.$vuetify.theme.current.dark?"#fff":"#000"},volume:{isVisible:!e(i)&&(((h=e(t).activePlayer)==null?void 0:h.volume_control)!=e(ue)||((v=e(t).activePlayer)==null?void 0:v.group_childs.length)>0),color:l.$vuetify.theme.current.dark?"#fff":"#000"}},null,8,["queue","player","volume"]),c(ua,{style:{"padding-right":"5px"},"visible-components":{repeat:{isVisible:!1},shuffle:{isVisible:!1},play:{isVisible:e(X)({breakpoint:"bp3",condition:"lt"}),withCircle:!1,icon:{staticWidth:"40px",staticHeight:"40px",color:l.$vuetify.theme.current.dark?"#fff":"#000"}},previous:{isVisible:!1},next:{isVisible:!1}}},null,8,["visible-components"])])])],8,jo),e(i)&&(((_=e(t).activePlayer)==null?void 0:_.volume_control)!=e(ue)||((b=e(t).activePlayer)==null?void 0:b.group_childs.length)>0)?(d(),g("div",es,[c(Ke,{width:"100%",color:"secondary","is-powered":((S=e(t).activePlayer)==null?void 0:S.powered)!=!1,disabled:!e(t).activePlayer||!((L=e(t).activePlayer)!=null&&L.available),"model-value":Math.round(((q=e(t).activePlayer)==null?void 0:q.group_volume)||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus","onUpdate:modelValue":u[0]||(u[0]=W=>e(t).activePlayer.group_childs.length>0?e(w).playerCommandGroupVolume(e(t).activePlayerId,W):e(w).playerCommandVolumeSet(e(t).activePlayerId,W)),"onClick:prepend":u[1]||(u[1]=W=>e(t).activePlayer.group_childs.length>0?e(w).playerCommandGroupVolumeDown(e(t).activePlayerId):e(w).playerCommandVolumeDown(e(t).activePlayerId)),"onClick:append":u[2]||(u[2]=W=>e(t).activePlayer.group_childs.length>0?e(w).playerCommandGroupVolumeUp(e(t).activePlayerId):e(w).playerCommandVolumeUp(e(t).activePlayerId))},null,8,["is-powered","disabled","model-value"])])):C("",!0)],64)}}}),as=oe(ts,[["__scopeId","data-v-a149b404"]]),ls=me({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...gt(),...Se(),...bt(),...Vt(),...wt(),...Ae({tag:"footer"}),...Je()},"VFooter"),is=ve()({name:"VFooter",props:ls(),setup(a,i){let{slots:s}=i;const o=A(),{themeClasses:n}=it(a),{backgroundColorClasses:l,backgroundColorStyles:u}=xe(ee(a,"color")),{borderClasses:f}=kt(a),{elevationClasses:r}=Pt(a),{roundedClasses:p}=Ct(a),m=ye(32),{resizeRef:h}=Vl(_=>{_.length&&(m.value=_[0].target.clientHeight)}),v=$(()=>a.height==="auto"?m.value:parseInt(a.height,10));return Oe(()=>a.app,()=>{const _=$t({id:a.name,order:$(()=>parseInt(a.order,10)),position:$(()=>"bottom"),layoutSize:v,elementSize:$(()=>a.height==="auto"?void 0:v.value),active:$(()=>a.app),absolute:ee(a,"absolute")});ma(()=>{o.value=_.layoutItemStyles.value})}),pe(()=>c(a.tag,{ref:h,class:["v-footer",n.value,l.value,f.value,r.value,p.value,a.class],style:[u.value,a.app?o.value:{height:qe(a.height)},a.style]},s)),{}}}),os=F({__name:"Footer",setup(a){const i=$(()=>t.navigationMenuStyle=="horizontal"),s=$(()=>t.navigationMenuStyle!="horizontal"?0:t.isInStandaloneMode?100:80),o=$(()=>i.value?s.value+5:0);return(n,l)=>(d(),g(x,null,[i.value?(d(),g("div",{key:0,class:at(n.$vuetify.theme.current.dark?"gradient-dark":"gradient-light"),style:G(`
      position: fixed;
      width: 100%;
      height: ${s.value+(e(X)("bp3")?100:70)}px;
      bottom: 0px;
      z-index: 999;
    `)},null,6)):C("",!0),e(t).navigationMenuStyle=="horizontal"?(d(),V(hi,{key:1,height:s.value},null,8,["height"])):C("",!0),c(is,{bottom:"",fixed:"",class:at(`d-flex flex-column ${i.value?"mediacontrols-player-float":"mediacontrols-player-default"}`),style:G(`bottom: ${o.value}px;`),elevation:"10",app:""},{default:y(()=>[c(as,{"use-floating-player":i.value},null,8,["use-floating-player"])]),_:1},8,["class","style"])],64))}}),ss={class:"player-media-thumb"},ns={key:1},rs={key:2,class:"icon-thumb"},us={style:{"margin-bottom":"3px"}},ds={key:0,style:{"font-size":"0.85rem","font-weight":"500","white-space":"nowrap"}},cs={key:0},ms={key:0},vs={key:1},ps={key:2},ys={class:"v-list-item-subtitle",style:{"white-space":"nowrap"}},fs={key:0},hs={key:1},_s={key:2},gs={key:3},bs={key:0},ws={key:4},ks={key:5},Ps={key:6},Cs=F({__name:"PlayerCard",props:{player:{},showVolumeControl:{type:Boolean},showMenuButton:{type:Boolean},showSubPlayers:{type:Boolean},showSyncControls:{type:Boolean}},setup(a){const i=a,s=$(()=>{if(i.player&&i.player.active_source&&i.player.active_source in w.queues)return w.queues[i.player.active_source];if(i.player&&!i.player.active_source&&i.player.player_id in w.queues)return w.queues[i.player.player_id]}),o=$(()=>{if(s.value&&s.value.active)return s.value.current_item}),n=function(l){Ie.emit("contextmenu",{items:Wa(i.player,s.value),posX:l.clientX,posY:l.clientY})};return(l,u)=>(d(),V(je,{flat:"",class:at(["panel-item",{"panel-item-selected":l.player.player_id==e(t).activePlayerId,"panel-item-idle":l.player.state==e(we).IDLE,"panel-item-off":l.player.powered==!1}]),ripple:!1,disabled:!l.player.available},{default:y(()=>[c(ce,{class:"panel-item-details",flat:"",ripple:!1},{prepend:y(()=>{var f,r,p,m;return[M("div",ss,[l.player.powered!=!1&&((f=o.value)!=null&&f.media_item)||(r=o.value)!=null&&r.image?(d(),V(Ee,{key:0,class:"media-thumb",size:"55",item:((p=o.value)==null?void 0:p.media_item)||o.value,fallback:e(Ge)},null,8,["item","fallback"])):l.player.powered!=!1&&!s.value&&((m=l.player.current_media)!=null&&m.image_url)?(d(),g("div",ns,[c(Ve,{class:"media-thumb",size:"55",src:l.player.current_media.image_url},null,8,["src"])])):(d(),g("div",rs,[c(U,{size:"35",icon:l.player.type==e(fe).PLAYER&&l.player.group_childs.length?"mdi-speaker-multiple":l.player.icon,style:{display:"table-cell",opacity:"0.8"}},null,8,["icon"])]))])]}),title:y(()=>[M("div",us,I(e(st)(l.player,27)),1)]),subtitle:y(()=>{var f,r,p,m,h,v,_;return[l.player.powered!=!1?(d(),g("div",ds,[(f=o.value)!=null&&f.media_item?(d(),g("div",cs,[N(I((r=o.value)==null?void 0:r.media_item.name)+" ",1),"version"in((p=o.value)==null?void 0:p.media_item)&&((m=o.value)!=null&&m.media_item.version)?(d(),g("span",ms,"("+I((h=o.value)==null?void 0:h.media_item.version)+")",1)):C("",!0)])):o.value?(d(),g("div",vs,I((v=o.value)==null?void 0:v.name),1)):!s.value&&((_=l.player.current_media)!=null&&_.title)?(d(),g("div",ps,I(l.player.current_media.title),1)):C("",!0)])):C("",!0)]}),default:y(()=>{var f,r,p,m,h,v,_,b,S,L,q,W,D,z,H,B,E,k,P,Q,R,Y;return[M("div",ys,[l.player.powered==!1?(d(),g("div",fs,I(l.$t("off")),1)):(f=o.value)!=null&&f.media_item&&((p=(r=o.value)==null?void 0:r.media_item)==null?void 0:p.media_type)==e(he).TRACK&&"album"in((m=o.value)==null?void 0:m.media_item)&&((h=o.value)!=null&&h.media_item.album)?(d(),g("div",hs,I(e(ga)((v=o.value)==null?void 0:v.media_item.artists))+" • "+I((_=o.value)==null?void 0:_.media_item.album.name),1)):(b=o.value)!=null&&b.media_item&&"artists"in((S=o.value)==null?void 0:S.media_item)&&((L=o.value)==null?void 0:L.media_item.artists.length)>0?(d(),g("div",_s,I((q=o.value)==null?void 0:q.media_item.artists[0].name),1)):(D=(W=o.value)==null?void 0:W.streamdetails)!=null&&D.stream_metadata?(d(),g("div",gs,[(B=(H=(z=o.value)==null?void 0:z.streamdetails)==null?void 0:H.stream_metadata)!=null&&B.artist?(d(),g("span",bs,I(o.value.streamdetails.stream_metadata.artist)+" - ",1)):C("",!0),N(I((k=(E=o.value)==null?void 0:E.streamdetails)==null?void 0:k.stream_metadata.title),1)])):(Q=(P=o.value)==null?void 0:P.media_item)!=null&&Q.metadata.description?(d(),g("div",ws,I((R=o.value)==null?void 0:R.media_item.metadata.description),1)):!s.value&&l.player.active_source?(d(),g("div",ks,I(l.$t("external_source_active",[l.player.active_source])),1)):((Y=s.value)==null?void 0:Y.items)==0?(d(),g("div",Ps,I(l.$t("queue_empty")),1)):C("",!0)])]}),append:y(()=>{var f;return[l.player.state==e(we).PAUSED||l.player.state==e(we).PLAYING||(f=s.value)!=null&&f.items?(d(),V(le,{key:0,variant:"icon",class:"player-command-btn",onClick:u[0]||(u[0]=se(r=>{e(w).playerCommandPlayPause(l.player.player_id),e(t).activePlayerId=l.player.player_id},["stop"]))},{default:y(()=>[c(U,{size:e(X)({breakpoint:"phone"})?"30":"32",icon:l.player.state==e(we).PLAYING?"mdi-pause":"mdi-play"},null,8,["size","icon"])]),_:1})):C("",!0),l.player.power_control!=e(ue)?(d(),V(le,{key:1,variant:"icon",class:"player-command-btn",onClick:u[1]||(u[1]=se(r=>{e(w).playerCommandPowerToggle(l.player.player_id),e(t).activePlayerId=l.player.player_id},["stop"]))},{default:y(()=>[c(U,{size:e(X)({breakpoint:"phone"})?"30":"32"},{default:y(()=>u[2]||(u[2]=[N("mdi-power")])),_:1},8,["size"])]),_:1})):C("",!0),l.showMenuButton?(d(),V(le,{key:2,variant:"icon",class:"player-command-btn",style:{"margin-right":"-5px"},onClick:se(n,["stop"])},{default:y(()=>[c(U,{size:e(X)({breakpoint:"phone"})?"30":"32"},{default:y(()=>u[3]||(u[3]=[N("mdi-dots-vertical")])),_:1},8,["size"])]),_:1})):C("",!0)]}),_:1}),l.showVolumeControl?(d(),V(Oa,{key:0,player:l.player,"show-sync-controls":l.showSyncControls,"show-heading-row":!1,"show-sub-players":l.showSubPlayers,"show-volume-control":l.player.powered!=!1,"allow-wheel":!1},null,8,["player","show-sync-controls","show-sub-players","show-volume-control"])):C("",!0)]),_:1},8,["class","disabled"]))}}),ut=oe(Cs,[["__scopeId","data-v-e4f7edc6"]]),Is={style:{float:"right","margin-right":"-20px"}},Vs=F({__name:"PlayerSelect",setup(a){const i=A(!1),s=A(null),o=$(()=>Object.values(w.players).filter(r=>l(r,!1,!1,!1)).sort((r,p)=>{var m;return r.display_name.toUpperCase()>((m=p.display_name)==null?void 0:m.toUpperCase())?1:-1}));te(()=>t.activePlayerId,r=>{r&&localStorage.setItem("mass.LastPlayerId",r)}),te(()=>w.players,r=>{r&&!t.activePlayer&&u()},{deep:!0}),te(()=>w.state,r=>{r.value!=dl.CONNECTED&&(t.activePlayerId=void 0)},{deep:!0});function n(r,p=!1){t.activePlayerId==r.player_id?i.value=!i.value:(i.value=!1,t.activePlayerId=r.player_id),p&&(t.showPlayersMenu=!1)}ze(()=>{u()});const l=function(r,p=!0,m=!1,h=!1){return!(!r.enabled||!h&&r.hidden||!p&&!r.available||r.synced_to&&!m||!m&&r.type==fe.PLAYER&&r.active_group)},u=function(){if(t.activePlayer&&l(t.activePlayer,!1,!1,!1))return;const r=f();r&&(t.activePlayerId=r.player_id)},f=function(){const r=localStorage.getItem("mass.LastPlayerId");if(r&&r in w.players&&l(w.players[r],!1,!1,!1))return w.players[r]};return(r,p)=>(d(),g(x,null,[c(Ia,{modelValue:e(t).showPlayersMenu,"onUpdate:modelValue":p[0]||(p[0]=m=>e(t).showPlayersMenu=m)},null,8,["modelValue"]),e(t).showPlayersMenu?(d(),V(Qa,{key:0,modelValue:e(t).showPlayersMenu,"onUpdate:modelValue":p[3]||(p[3]=m=>e(t).showPlayersMenu=m),location:"right",app:"",clipped:"",temporary:"",touchless:"",width:500,style:{"z-index":"99999"},"z-index":"99999"},{default:y(()=>[M("div",null,[c(Fe,{class:"title",style:{"padding-top":"20px","padding-bottom":"20px"}},{default:y(()=>[M("b",null,I(r.$t("players")),1),M("div",Is,[c(le,{variant:"icon",to:{name:"playersettings"}},{default:y(()=>[c(U,{size:"30"},{default:y(()=>p[4]||(p[4]=[N("mdi-cog-outline")])),_:1})]),_:1}),c(le,{variant:"icon",onClick:p[1]||(p[1]=m=>e(t).showPlayersMenu=!1)},{default:y(()=>[c(U,{size:"30"},{default:y(()=>p[5]||(p[5]=[N("mdi-window-close")])),_:1})]),_:1})])]),_:1}),c(Xe),c($e,{flat:"",style:{margin:"10px 5px 15px 5px"}},{default:y(()=>[(d(!0),g(x,null,ie(o.value.filter(m=>{var h;return[e(we).PLAYING,e(we).PAUSED].includes(m.state)||((h=e(w).queues[m.player_id])==null?void 0:h.items)>0&&m.powered!=!1}),m=>(d(),V(ut,{id:m.player_id,key:m.player_id,player:m,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":i.value&&m.player_id==e(t).activePlayerId,"show-sync-controls":m.supported_features.includes(e(_e).SET_MEMBERS),onClick:h=>n(m)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1}),c(Yl,{modelValue:s.value,"onUpdate:modelValue":p[2]||(p[2]=m=>s.value=m),variant:"accordion",flat:"",class:"expansion"},{default:y(()=>[c(la,{style:{padding:"0"}},{default:y(()=>[c(ia,null,{default:y(()=>[M("h3",null,I(r.$t("all_players")),1)]),_:1}),c(oa,{style:{padding:"0"}},{default:y(()=>[c($e,{flat:"",style:{margin:"-20px 3px 5px 3px"}},{default:y(()=>[(d(!0),g(x,null,ie(o.value.filter(m=>m.type!=e(fe).GROUP),m=>(d(),V(ut,{id:m.player_id,key:m.player_id,player:m,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":i.value&&m.player_id==e(t).activePlayerId,"show-sync-controls":m.supported_features.includes(e(_e).SET_MEMBERS),onClick:h=>n(m)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1})]),_:1})]),_:1}),o.value.filter(m=>m.type==e(fe).GROUP).length?(d(),V(la,{key:0,style:{padding:"0"}},{default:y(()=>[c(ia,null,{default:y(()=>[M("h3",null,I(r.$t("all_groups")),1)]),_:1}),c(oa,{style:{padding:"0"}},{default:y(()=>[c($e,{flat:"",style:{margin:"-20px 3px 5px 3px"}},{default:y(()=>[(d(!0),g(x,null,ie(o.value.filter(m=>m.type==e(fe).GROUP),m=>(d(),V(ut,{id:m.player_id,key:m.player_id,player:m,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":i.value&&m.player_id==e(t).activePlayerId,"show-sync-controls":m.supported_features.includes(e(_e).SET_MEMBERS),onClick:h=>n(m)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1})]),_:1})]),_:1})):C("",!0)]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])):C("",!0)],64))}}),$s=oe(Vs,[["__scopeId","data-v-994fda09"]]);function Ss(a={}){const{immediate:i=!1,onNeedRefresh:s,onOfflineReady:o,onRegistered:n,onRegisteredSW:l,onRegisterError:u}=a;let f,r,p;const m=async(v=!0)=>{await r,p==null||p()};async function h(){if("serviceWorker"in navigator){if(f=await cl(async()=>{const{Workbox:v}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:v}},[],import.meta.url).then(({Workbox:v})=>new v("./sw.js",{scope:"./",type:"classic"})).catch(v=>{u==null||u(v)}),!f)return;p=()=>{f==null||f.messageSkipWaiting()};{let v=!1;const _=()=>{v=!0,f==null||f.addEventListener("controlling",b=>{b.isUpdate&&window.location.reload()}),s==null||s()};f.addEventListener("installed",b=>{typeof b.isUpdate>"u"?typeof b.isExternal<"u"&&b.isExternal?_():!v&&(o==null||o()):b.isUpdate||o==null||o()}),f.addEventListener("waiting",_)}f.register({immediate:i}).then(v=>{l?l("./sw.js",v):n==null||n(v)}).catch(v=>{u==null||u(v)})}}return r=h(),m}function Qs(a={}){const{immediate:i=!0,onNeedRefresh:s,onOfflineReady:o,onRegistered:n,onRegisteredSW:l,onRegisterError:u}=a,f=A(!1),r=A(!1);return{updateServiceWorker:Ss({immediate:i,onNeedRefresh(){f.value=!0,s==null||s()},onOfflineReady(){r.value=!0,o==null||o()},onRegistered:n,onRegisteredSW:l,onRegisterError:u}),offlineReady:r,needRefresh:f}}const Ts={key:0,class:"pwa-toast",role:"alert"},Ms={class:"message"},Bs={key:0},Es={key:1},qs=F({__name:"ReloadPrompt",setup(a){const{offlineReady:i,needRefresh:s,updateServiceWorker:o}=Qs(),n=async()=>{i.value=!1,s.value=!1};return(l,u)=>e(i)||e(s)?(d(),g("div",Ts,[M("div",Ms,[e(i)?(d(),g("span",Bs," App ready to work offline ")):(d(),g("span",Es," New content available, click on reload button to update. "))]),e(s)?(d(),g("button",{key:0,onClick:u[0]||(u[0]=f=>e(o)())},"Reload")):C("",!0),M("button",{onClick:n},"Close")])):C("",!0)}}),zs=me({...Se(),...Al({fullHeight:!0}),...Je()},"VApp"),As=ve()({name:"VApp",props:zs(),setup(a,i){let{slots:s}=i;const o=it(a),{layoutClasses:n,getLayoutItem:l,items:u,layoutRef:f}=Ll(a),{rtlClasses:r}=ft();return pe(()=>{var p;return c("div",{ref:f,class:["v-application",o.themeClasses.value,n.value,r.value,a.class],style:[a.style]},[c("div",{class:"v-application__wrap"},[(p=s.default)==null?void 0:p.call(s)])])}),{getLayoutItem:l,items:u,theme:o}}}),Ls=F({__name:"Default",setup(a){const i=ml();return te([()=>i.query.player,()=>Object.keys(w.players).length],([s])=>{var l;if(!s)return;const o=s.toString().toLowerCase(),n=(l=Object.values(w.players).find(u=>u.player_id.toLowerCase()===o||u.display_name.toLowerCase()===o))==null?void 0:l.player_id;n&&(t.activePlayerId=n)},{immediate:!0}),te(()=>i.query.showFullscreenPlayer,s=>{t.showFullscreenPlayer=!!s},{immediate:!0}),te(()=>i.query.frameless,s=>{s&&(t.frameless=!0)},{immediate:!0}),(s,o)=>(d(),g(x,null,[e(t).connected?(d(),V(As,{key:0},{default:y(()=>[e(t).frameless?(d(),V(ra,{key:0})):(d(),g(x,{key:1},[c($s),c(os),c(ra)],64))]),_:1})):(d(),V(Ia,{key:1,class:"centeredoverlay",persistent:"","model-value":!e(t).connected},{default:y(()=>[M("div",null,[c($l,{color:"primary",indeterminate:"",size:"64"})])]),_:1},8,["model-value"])),e(t).isInStandaloneMode?(d(),V(qs,{key:2})):C("",!0)],64))}}),un=oe(Ls,[["__scopeId","data-v-33a00054"]]);export{un as default};
