import{I as V,_ as g}from"./ProviderDetails.vue_vue_type_script_setup_true_lang-g1x4dXOC.js";import{c as I}from"./ItemContextMenu.vue_vue_type_style_index_0_scoped_3a9a25e3_lang-C3noc3qK.js";import{x as C,r as D,c as x,y as a,D as p,n as u,z as d,A as r,K as c,F as h,E as A,G as y,S as w,J as _,B as E,U as T,I as b,w as B,o as M,ah as N,b as $}from"./index-Dvn4b3kE.js";import{C as L}from"./Container-DWavih6c.js";import{T as S}from"./Toolbar-XsObLWPI.js";import{V as U,a as F}from"./VList-BFxH2oe3.js";import{k as z}from"./VListItem-XlHdRn90.js";import{b as G}from"./VChip-BKGA7XXZ.js";import"./ProviderIcon.vue_vue_type_style_index_0_lang-CxRRSRNY.js";import"./VMenu-BxZEtUbH.js";import"./marquee_text_sync-BDoUCDrB.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VCard-DDEjK8sh.js";import"./VCardText-CXkKR7ML.js";import"./VDialog-CHkPjb9d.js";import"./layout-BesXh2w9.js";import"./ListItem-CqruFv9t.js";import"./eventbus-CGRXT3Tn.js";import"./VContainer-C3X0IHcx.js";/* empty css              */import"./VToolbar-Bi9Fkevh.js";const H={style:{"margin-bottom":"10px"}},J={style:{"margin-left":"15px"}},K={key:0},P=C({__name:"Chapters",props:{itemDetails:{}},setup(f){const i=f,s=D(!1),e=function(){s.value=!s.value},v=x(()=>[{label:"tooltip.collapse_expand",icon:s.value?"mdi-chevron-up":"mdi-chevron-down",action:e,overflowAllowed:!1}]),n=function(t){!i.itemDetails||!I(i.itemDetails)||b.playMedia(i.itemDetails.uri,void 0,void 0,t.position.toString())};return(t,l)=>(a(),p("section",H,[u(S,{title:t.$t("chapters"),"menu-items":v.value,onTitleClicked:e},null,8,["title","menu-items"]),u(U),s.value?(a(),d(L,{key:0},{default:r(()=>[u(F,null,{default:r(()=>{var m,k;return[(a(!0),p(h,null,A((k=(m=t.itemDetails)==null?void 0:m.metadata)==null?void 0:k.chapters,o=>(a(),d(z,{key:o.position,disabled:!y(I)(t.itemDetails),onClick:j=>n(o)},{prepend:r(()=>[u(G,null,{default:r(()=>[w(_(o.position),1)]),_:2},1024)]),title:r(()=>[E("div",J,_(o.name),1)]),append:r(()=>[o.end?(a(),p("span",K,_(y(T)(o.end-o.start)),1)):c("",!0)]),_:2},1032,["disabled","onClick"]))),128))]}),_:1})]),_:1})):c("",!0)]))}}),ce=C({__name:"AudiobookDetails",props:{itemId:{},provider:{}},setup(f){const i=f,s=D(!1),e=D(),v=async function(){e.value=await b.getAudiobook(i.itemId,i.provider)};return B(()=>i.itemId,n=>{n&&v()},{immediate:!0}),M(()=>{const n=b.subscribe(N.MEDIA_ITEM_UPDATED,t=>{var m;const l=t.data;((m=e.value)==null?void 0:m.uri)==l.uri&&(s.value=!0)});$(n)}),(n,t)=>{var l;return a(),p(h,null,[u(V,{item:e.value},null,8,["item"]),e.value&&((l=e.value.metadata)!=null&&l.chapters)?(a(),d(P,{key:0,"item-details":e.value},null,8,["item-details"])):c("",!0),e.value?(a(),d(g,{key:1,"item-details":e.value},null,8,["item-details"])):c("",!0)],64)}}});export{ce as default};
