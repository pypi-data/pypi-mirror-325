(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1451],{95372:function(e){e.exports=function(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return -1}},56632:function(e,t,n){var r=n(89278),i=n(80068),a=n(50098);e.exports=function(e){return function(t,n,s){var o=Object(t);if(!i(t)){var l=r(n,3);t=a(t),n=function(e){return l(o[e],e,o)}}var c=e(t,n,s);return c>-1?o[l?t[c]:c]:void 0}}},64925:function(e,t,n){var r=n(56632)(n(66259));e.exports=r},66259:function(e,t,n){var r=n(95372),i=n(89278),a=n(47991),s=Math.max;e.exports=function(e,t,n){var o=null==e?0:e.length;if(!o)return -1;var l=null==n?0:a(n);return l<0&&(l=s(o+l,0)),r(e,i(t,3),l)}},94919:function(e,t,n){var r=n(91936),i=1/0;e.exports=function(e){return e?(e=r(e))===i||e===-i?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}},47991:function(e,t,n){var r=n(94919);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},66857:function(e,t,n){"use strict";var r=n(24246),i=n(74588),a=n(19310);t.Z=e=>{let{selectedTaxonomies:t,showDisabled:n=!1,...s}=e,{getDataCategoryDisplayNameProps:o,getDataCategories:l}=(0,a.Z)(),c=(n?l():l().filter(e=>e.active)).filter(e=>!t.includes(e.fides_key)).map(e=>{let{name:t,primaryName:n}=o(e.fides_key);return{value:e.fides_key,name:t,primaryName:n,description:e.description||""}});return(0,r.jsx)(i.l,{options:c,...s})}},74588:function(e,t,n){"use strict";n.d(t,{l:function(){return l}});var r=n(24246),i=n(78670),a=n(55372),s=n.n(a);let o=e=>{let{data:t}=e;return(0,r.jsxs)(i.jqI,{gap:12,title:"".concat(t.primaryName||"").concat(t.primaryName?": ":"").concat(t.name," - ").concat(t.description),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:t.primaryName||t.name}),t.primaryName&&": ".concat(t.name)]}),(0,r.jsx)("em",{children:t.description})]})},l=e=>{let{options:t,...n}=e,a=null==t?void 0:t.map(e=>({...e,className:s().option}));return(0,r.jsx)(i.WPr,{options:a,autoFocus:!0,showSearch:!0,variant:"borderless",optionRender:o,dropdownStyle:{minWidth:"500px"},className:"w-full p-0","data-testid":"taxonomy-select",...n})}},19310:function(e,t,n){"use strict";var r=n(24246),i=n(64925),a=n.n(i),s=n(27378),o=n(44296),l=n(91650),c=n(79851),u=n(47411);let d=()=>{let{isLoading:e}=(0,c.fd)(),t=(0,o.C)(c.U3),{isLoading:n}=(0,u.MO)(),r=(0,o.C)(u.qb),{isLoading:i}=(0,l.te)();return{dataUses:t,dataSubjects:(0,o.C)(l.ZL),dataCategories:r,isLoading:e||n||i}};t.Z=()=>{let{dataUses:e,dataCategories:t,dataSubjects:n,isLoading:i}=d(),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.split(".").slice(0,t).join(".")},l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=t(e);if(!r)return{};let i=t(o(e,n)),a=!!r.parent_key;return{name:r.name||void 0,primaryName:a&&(null==i?void 0:i.name)!==r.name&&(null==i?void 0:i.name)||void 0}},c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,{name:i,primaryName:a}=l(e,t,n);return i?a?(0,r.jsxs)(s.Fragment,{children:[(0,r.jsxs)("strong",{children:[a,":"]})," ",i]},e):(0,r.jsx)("strong",{children:i},e):e},u=t=>a()(e,{fides_key:t}),f=e=>a()(t,{fides_key:e}),p=e=>a()(n,{fides_key:e});return{getDataUses:()=>e,getDataUseByKey:u,getDataUseDisplayName:e=>c(e,u,1),getDataUseDisplayNameProps:e=>l(e,u,1),getDataCategories:()=>t,getDataCategoryByKey:f,getDataCategoryDisplayName:e=>c(e,f,2),getDataCategoryDisplayNameProps:e=>l(e,f,2),getDataSubjects:()=>n,getDataSubjectByKey:p,getDataSubjectDisplayName:e=>{let t=p(e);return t?t.name:e},getPrimaryKey:o,isLoading:i}}},52104:function(e,t,n){"use strict";var r=n(24246),i=n(78670);n(27378),t.Z=e=>{let{children:t,onClick:n,closeButton:a,...s}=e;return(0,r.jsxs)(i.kCb,{fontSize:"xs",px:1.5,h:"20px",borderWidth:"1px",borderColor:"gray.200",borderRadius:"sm",gap:1,_hover:n?{bg:"gray.100"}:void 0,...s,children:[(0,r.jsx)(i.kCb,{alignItems:"center",gap:1.5,as:n?"button":void 0,onClick:n,children:t}),a]})}},67690:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(24246),i=n(78670),a=n(27378),s=n(66857),o=n(19310);let l=(0,i.IUT)({displayName:"SparkleIcon",viewBox:"0 0 18 18",path:(0,r.jsx)("path",{fill:"currentColor",d:"M9.53604 15.8107C9.81449 15.8107 10.0158 15.6256 10.0681 15.3471C10.7648 11.6208 11.1324 11.0552 14.8315 10.559C15.1373 10.518 15.3337 10.303 15.3337 10.0245C15.3337 9.74611 15.1373 9.53357 14.8315 9.49254C11.1609 8.99636 10.6349 8.45671 10.0681 4.71568C10.0246 4.42354 9.81449 4.22717 9.53604 4.22717C9.28 4.22717 9.05872 4.41234 9.01768 4.70447C8.34835 8.43318 7.95089 8.99143 4.24063 9.49254C3.94849 9.53357 3.74963 9.74611 3.74963 10.0245C3.74963 10.303 3.94849 10.5155 4.24063 10.559C7.91753 11.0847 8.446 11.5836 9.01768 15.3359C9.04995 15.6256 9.26003 15.8107 9.53604 15.8107ZM3.62366 7.96543C3.82881 7.96543 3.9954 7.81253 4.03397 7.60739C4.40352 5.74358 4.25772 5.75481 6.22471 5.41918C6.44356 5.38938 6.58033 5.21404 6.58033 5.0089C6.58033 4.81497 6.44109 4.63717 6.22471 4.5986C4.26265 4.27148 4.40105 4.26655 4.03397 2.43529C3.9954 2.22768 3.84249 2.06358 3.62366 2.06358C3.41604 2.06358 3.26314 2.21648 3.21335 2.43529C2.84873 4.25179 2.9896 4.25179 1.02259 4.5986C0.814976 4.63963 0.666992 4.81497 0.666992 5.0089C0.666992 5.23894 0.814976 5.38938 1.05241 5.41918C2.98714 5.74249 2.84626 5.73868 3.21335 7.58252C3.26314 7.80132 3.40483 7.96543 3.62366 7.96543ZM8.03377 3.9032C8.17054 3.9032 8.27749 3.80747 8.30485 3.6707C8.5461 2.4508 8.47882 2.4732 9.75105 2.22703C9.89903 2.19969 9.9923 2.09273 9.9923 1.95599C9.9923 1.81922 9.89656 1.71472 9.74858 1.68738C8.46759 1.43874 8.52367 1.43874 8.30485 0.254909C8.27749 0.106937 8.18175 0 8.03377 0C7.897 0 7.80126 0.106939 7.76269 0.257375C7.50393 1.43874 7.60488 1.43874 6.31652 1.68738C6.16851 1.71472 6.08647 1.81922 6.08647 1.95599C6.08647 2.10396 6.16851 2.19723 6.33265 2.22703C7.60488 2.43956 7.50393 2.45079 7.76269 3.64827C7.80126 3.80747 7.897 3.9032 8.03377 3.9032Z"})});var c=n(1051),u=n(74473),d=n(52104),f=n(6111);let p=e=>{let{onClick:t}=e;return(0,r.jsx)(i.wpx,{onClick:t,icon:(0,r.jsx)(i.Two,{boxSize:2}),size:"small",type:"text",className:"max-h-4 max-w-4","aria-label":"Remove category"})};var v=e=>{var t,n,v;let{resource:m}=e,[g,x]=(0,a.useState)(!1),{getDataCategoryDisplayName:C}=(0,o.Z)(),[h]=(0,f.NA)(),_=(null===(t=m.classifications)||void 0===t?void 0:t.length)?m.classifications[0].label:null,j=null!==(v=m.user_assigned_data_categories)&&void 0!==v?v:[],y=!_&&!(null==j?void 0:j.length),b=null===(n=m.sub_field_urns)||void 0===n?void 0:n.length,N=e=>{h({staged_resource_urn:m.urn,monitor_config_id:m.monitor_config_id,user_assigned_data_categories:[...j,e]})},Z=e=>{var t;h({staged_resource_urn:m.urn,monitor_config_id:m.monitor_config_id,user_assigned_data_categories:null!==(t=null==j?void 0:j.filter(t=>t!==e))&&void 0!==t?t:[]})},k=!g&&!!j.length,D=!g&&!!_&&!j.length;return(0,r.jsxs)(u.Z,{children:[y&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{"data-testid":"no-classifications",children:"None"}),!b&&(0,r.jsx)(c.Z,{onClick:()=>x(!0),"aria-label":"Add category"})]}),k&&(0,r.jsxs)(r.Fragment,{children:[j.map(e=>(0,r.jsx)(d.Z,{"data-testid":"user-classification-".concat(e),closeButton:(0,r.jsx)(p,{onClick:()=>Z(e)}),children:C(e)},e)),(0,r.jsx)(c.Z,{onClick:()=>x(!0),"aria-label":"Add category"})]}),D&&(0,r.jsxs)(d.Z,{onClick:()=>x(!0),cursor:"pointer","data-testid":"classification-".concat(_),children:[(0,r.jsx)(l,{mt:.5}),C(_),(0,r.jsx)(i.dY8,{})]}),g&&(0,r.jsx)(i.xuv,{className:"select-wrapper",position:"absolute",zIndex:10,top:"0",left:"0",width:"100%",height:"max",bgColor:"#fff",children:(0,r.jsx)(s.Z,{selectedTaxonomies:j,onChange:e=>{x(!1),N(e)},onBlur:()=>x(!1),open:!0})})]})}},61934:function(e,t,n){"use strict";var r=n(24246),i=n(78670);t.Z=e=>{let{type:t}=e;return(0,r.jsx)(i.kCb,{align:"center",h:"full",children:!!t&&(0,r.jsx)(i.Cts,{fontSize:"xs",fontWeight:"normal",children:t})})}},1051:function(e,t,n){"use strict";var r=n(24246),i=n(78670);t.Z=e=>(0,r.jsx)(i.wpx,{size:"small",icon:(0,r.jsx)(i.PJP.mm_,{}),className:" max-h-5 max-w-5","data-testid":"taxonomy-add-btn",...e})},74473:function(e,t,n){"use strict";var r=n(24246),i=n(78670);n(27378),t.Z=e=>{let{children:t,...n}=e;return(0,r.jsx)(i.Eq9,{py:2,alignItems:"center",position:"relative",width:"100%",gap:2,overflowX:"auto",...n,children:t})}},59104:function(e,t,n){"use strict";var r,i;n.d(t,{X:function(){return r}}),(i=r||(r={})).DATABASE="Database",i.SCHEMA="Schema",i.TABLE="Table",i.FIELD="Field",i.NONE="none"},52962:function(e,t,n){"use strict";n.d(t,{G:function(){return i}});var r=n(59104);let i=e=>{var t,n,i;return e?e.resource_type?e.resource_type:(null===(t=e.schemas)||void 0===t?void 0:t.length)?r.X.DATABASE:(null===(n=e.tables)||void 0===n?void 0:n.length)?r.X.SCHEMA:(null===(i=e.fields)||void 0===i?void 0:i.length)?r.X.TABLE:r.X.FIELD:r.X.NONE}},90049:function(e,t){"use strict";t.Z=e=>{let{name:t,urn:n,monitor_config_id:r,database_name:i,schema_name:a,table_name:s,top_level_field_name:o,top_level_field_urn:l}=e;if(!o)return t;let c=n.split(".");return l?n.replace("".concat(l).concat("."),""):([r,i,a,s,o].forEach(e=>{if(e){let t=c.indexOf(e);t>-1&&c.splice(t,1)}}),c.join("."))}},2053:function(e,t){"use strict";t.Z=e=>{var t;return!!e.parent_table_urn&&null!==(t=e.sub_field_urns)&&void 0!==t&&!!t.length&&!e.top_level_field_name}},6170:function(e,t,n){"use strict";var r=n(59104),i=n(52962),a=n(2053);t.Z=e=>(0,i.G)(e)!==r.X.FIELD||(0,a.Z)(e)},55372:function(e){e.exports={option:"TaxonomySelect_option__vY6v2"}}}]);