(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4154],{96539:function(e,t,n){var s=n(77400).Symbol;e.exports=s},99736:function(e,t,n){var s=n(96539),i=n(34840),a=n(21258),r=s?s.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r&&r in Object(e)?i(e):a(e)}},74833:function(e,t,n){var s=n(56127),i=/^\s+/;e.exports=function(e){return e?e.slice(0,s(e)+1).replace(i,""):e}},39120:function(e,t,n){var s="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=s},34840:function(e,t,n){var s=n(96539),i=Object.prototype,a=i.hasOwnProperty,r=i.toString,o=s?s.toStringTag:void 0;e.exports=function(e){var t=a.call(e,o),n=e[o];try{e[o]=void 0;var s=!0}catch(e){}var i=r.call(e);return s&&(t?e[o]=n:delete e[o]),i}},21258:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},77400:function(e,t,n){var s=n(39120),i="object"==typeof self&&self&&self.Object===Object&&self,a=s||i||Function("return this")();e.exports=a},56127:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},66726:function(e,t,n){var s=n(11611),i=n(82846),a=n(91936),r=Math.max,o=Math.min;e.exports=function(e,t,n){var l,d,c,u,m,h,v=0,g=!1,p=!1,x=!0;if("function"!=typeof e)throw TypeError("Expected a function");function f(t){var n=l,s=d;return l=d=void 0,v=t,u=e.apply(s,n)}function y(e){var n=e-h,s=e-v;return void 0===h||n>=t||n<0||p&&s>=c}function j(){var e,n,s,a=i();if(y(a))return b(a);m=setTimeout(j,(e=a-h,n=a-v,s=t-e,p?o(s,c-n):s))}function b(e){return(m=void 0,x&&l)?f(e):(l=d=void 0,u)}function C(){var e,n=i(),s=y(n);if(l=arguments,d=this,h=n,s){if(void 0===m)return v=e=h,m=setTimeout(j,t),g?f(e):u;if(p)return clearTimeout(m),m=setTimeout(j,t),f(h)}return void 0===m&&(m=setTimeout(j,t)),u}return t=a(t)||0,s(n)&&(g=!!n.leading,c=(p="maxWait"in n)?r(a(n.maxWait)||0,t):c,x="trailing"in n?!!n.trailing:x),C.cancel=function(){void 0!==m&&clearTimeout(m),v=0,l=h=d=m=void 0},C.flush=function(){return void 0===m?u:b(i())},C}},11611:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},92360:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},55193:function(e,t,n){var s=n(99736),i=n(92360);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==s(e)}},82846:function(e,t,n){var s=n(77400);e.exports=function(){return s.Date.now()}},91936:function(e,t,n){var s=n(74833),i=n(11611),a=n(55193),r=0/0,o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,d=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return r;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=s(e);var n=l.test(e);return n||d.test(e)?c(e.slice(2),n?2:8):o.test(e)?r:+e}},25654:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center/[monitorId]/[systemId]",function(){return n(53867)}])},65464:function(e,t,n){"use strict";var s=n(24246),i=n(78670),a=n(88038),r=n.n(a);n(27378),t.Z=e=>{let{children:t,title:n,mainProps:a}=e;return(0,s.jsxs)(i.kCb,{"data-testid":n,direction:"column",height:"calc(100vh - 48px)",width:"calc(100vw - 200px)",children:[(0,s.jsxs)(r(),{children:[(0,s.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,s.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsx)(i.kCb,{px:10,py:6,as:"main",overflow:"auto",direction:"column",flex:1,minWidth:0,...a,children:t})]})}},37541:function(e,t,n){"use strict";var s=n(24246),i=n(78670),a=n(18622);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:r=!0,children:o,rightContent:l,style:d,...c}=e;return(0,s.jsxs)("div",{...c,style:r?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...d}:{paddingBottom:"24px",...d},children:[(0,s.jsxs)(i.jqI,{justify:"space-between",children:["string"==typeof t?(0,s.jsx)(i.X6q,{className:n||o?"pb-4":void 0,fontSize:"2xl","data-testid":"page-heading",children:t}):t,l&&(0,s.jsx)("div",{"data-testid":"page-header-right-content",children:l})]}),!!n&&(0,s.jsx)(a.m,{className:o?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),o]})}},78973:function(e,t,n){"use strict";n.d(t,{d:function(){return d}});var s=n(24246),i=n(78670),a=n(34090),r=n(27378),o=n(39514),l=n(34803);let d=e=>{let{name:t,label:n,labelProps:d,tooltip:c,isRequired:u,layout:m="inline",...h}=e,[v,g,{setValue:p}]=(0,a.U$)(t),x=!!(g.touched&&g.error),[f,y]=(0,r.useState)("");v.value||"tags"!==h.mode&&"multiple"!==h.mode||(v.value=[]),"tags"===h.mode&&"string"==typeof v.value&&(v.value=[v.value]);let j="tags"===h.mode?(e,t)=>e?e.value!==f||v.value.includes(f)?h.optionRender?h.optionRender(e,t):e.label:'Create "'.concat(f,'"'):void 0:h.optionRender||void 0,b=e=>{y(e),h.onSearch&&h.onSearch(e)},C=(e,t)=>{p(e),h.onChange&&h.onChange(e,t)};return"inline"===m?(0,s.jsx)(i.NIc,{isInvalid:x,isRequired:u,children:(0,s.jsxs)(i.rjZ,{templateColumns:n?"1fr 3fr":"1fr",children:[n?(0,s.jsx)(l.__,{htmlFor:h.id||t,...d,children:n}):null,(0,s.jsxs)(i.jqI,{align:"center",children:[(0,s.jsxs)(i.jqI,{vertical:!0,flex:1,className:"mr-2",children:[(0,s.jsx)(i.WPr,{...v,id:h.id||t,"data-testid":"controlled-select-".concat(v.name),...h,optionRender:j,onSearch:"tags"===h.mode?b:void 0,onChange:C,value:v.value||void 0}),(0,s.jsx)(l.Bc,{isInvalid:x,message:g.error,fieldName:v.name})]}),c?(0,s.jsx)(o.Z,{label:c}):null]})]})}):(0,s.jsx)(i.NIc,{isInvalid:x,isRequired:u,children:(0,s.jsxs)(i.gCW,{alignItems:"start",children:[(0,s.jsxs)(i.jqI,{align:"center",children:[n?(0,s.jsx)(l.__,{htmlFor:h.id||t,fontSize:"xs",my:0,mr:1,...d,children:n}):null,c?(0,s.jsx)(o.Z,{label:c}):null]}),(0,s.jsx)(i.WPr,{...v,id:h.id||t,"data-testid":"controlled-select-".concat(v.name),...h,optionRender:j,onSearch:"tags"===h.mode?b:void 0,onChange:C,value:v.value||void 0}),(0,s.jsx)(l.Bc,{isInvalid:x,message:g.error,fieldName:v.name})]})})}},53359:function(e,t,n){"use strict";n.d(t,{H:function(){return a},V:function(){return s.V}});var s=n(75139),i=n(60136);let a=()=>{let{errorAlert:e}=(0,s.V)();return{handleError:t=>{let n="An unexpected error occurred. Please try again.";(0,i.Ot)(t)?n=t.data.detail:(0,i.tB)(t)&&(n=t.data.detail[0].msg),e(n)}}}},75139:function(e,t,n){"use strict";n.d(t,{V:function(){return a}});var s=n(24246),i=n(78670);let a=()=>{let e=(0,i.pmc)();return{errorAlert:(t,n,a)=>{let r={...a,position:(null==a?void 0:a.position)||"top",render:e=>{let{onClose:a}=e;return(0,s.jsxs)(i.bZj,{alignItems:"normal",status:"error","data-testid":"error-alert",children:[(0,s.jsx)(i.zMQ,{}),(0,s.jsxs)(i.xuv,{children:[n&&(0,s.jsx)(i.CdC,{children:n}),(0,s.jsx)(i.XaZ,{children:t})]}),(0,s.jsx)(i.PZ7,{onClick:a,position:"relative",right:0,size:"sm",top:-1})]})}};(null==a?void 0:a.id)&&e.isActive(a.id)?e.update(a.id,r):e(r)},successAlert:(t,n,a)=>{let r={...a,position:(null==a?void 0:a.position)||"top",render:e=>{let{onClose:a}=e;return(0,s.jsxs)(i.bZj,{alignItems:"normal",status:"success",variant:"subtle","data-testid":"success-alert",children:[(0,s.jsx)(i.zMQ,{}),(0,s.jsxs)(i.xuv,{children:[n&&(0,s.jsx)(i.CdC,{children:n}),(0,s.jsx)(i.XaZ,{children:t})]}),(0,s.jsx)(i.PZ7,{onClick:a,position:"relative",right:0,size:"sm",top:-1})]})}};(null==a?void 0:a.id)&&e.isActive(a.id)?e.update(a.id,r):e(r)}}}},73269:function(e,t,n){"use strict";n.d(t,{Gt:function(){return m},eB:function(){return h},oI:function(){return u}});var s=n(24246),i=n(34090),a=n(27378),r=n(44296),o=n(3073),l=n(77650);let d=(0,a.createRef)(),c=(0,a.createRef)(),u=()=>{let e=(0,r.T)(),t=(0,r.C)(o.DB),n=(0,a.useCallback)(()=>{c.current=void 0,d.current=void 0},[]),s=(0,a.useCallback)(()=>{e((0,o.Mr)()),c.current&&(c.current(!0),n())},[e,n]),i=(0,a.useCallback)(()=>{e((0,o.Mr)()),c.current&&(c.current(!1),n())},[e,n]);return{attemptAction:(0,a.useCallback)(()=>t?(e((0,o.h7)()),d.current||(d.current=new Promise(e=>{c.current=e})),d.current):Promise.resolve(!0),[t,e]),onConfirm:s,onClose:i}},m=e=>{let{id:t,name:n}=e,{dirty:s}=(0,i.u6)(),l=(0,r.T)();return(0,a.useEffect)(()=>(l((0,o.Zu)({id:t,name:n})),()=>{l((0,o.dz)({id:t}))}),[l,t,n]),(0,a.useEffect)(()=>{l((0,o.$p)({id:t,isDirty:s}))},[s,l,t]),null},h=()=>{let{onConfirm:e,onClose:t}=u(),n=(0,r.C)(o.uv);return(0,s.jsx)(l.Z,{isOpen:n,onClose:t,onConfirm:e,isCentered:!0,title:"Unsaved Changes",message:"You have unsaved changes"})}},98198:function(e,t,n){"use strict";var s=n(24246),i=n(78670);t.Z=e=>{let{title:t,children:n,isOpen:a,onClose:r,...o}=e;return(0,s.jsxs)(i.u_l,{isOpen:a,onClose:r,isCentered:!0,scrollBehavior:"inside",size:"xl",id:"add-modal",...o,children:[(0,s.jsx)(i.ZAr,{}),(0,s.jsxs)(i.hzk,{textAlign:"left",p:0,"data-testid":"add-modal-content",children:[(0,s.jsx)(i.xBx,{p:0,children:(0,s.jsx)(i.xuv,{backgroundColor:"gray.50",px:6,py:4,border:"1px",borderColor:"gray.200",borderTopRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,s.jsx)(i.X6q,{as:"h3",size:"sm",children:t})})}),(0,s.jsx)(i.fef,{pb:4,overflow:"auto",children:n})]})]})}},18622:function(e,t,n){"use strict";n.d(t,{m:function(){return d}});var s=n(24246),i=n(78670),a=n(79894),r=n.n(a),o=n(27378);let{Text:l}=i.AntTypography,d=e=>{let{items:t,...n}=e,a=(0,o.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let a=n===t.length-1,o={...e},d=o.onClick&&!o.href;return("string"==typeof o.title&&(o.title=(0,s.jsx)(l,{style:{color:"inherit",maxWidth:a?void 0:400},ellipsis:!a,children:o.title})),d)?o.title=(0,s.jsx)(i.wpx,{type:"text",size:"small",icon:o.icon,onClick:o.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:o.title}):(o.icon&&(o.title=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"anticon align-text-bottom",children:o.icon}),o.title]})),o.href&&o.title&&(o.title=(0,s.jsx)(r(),{href:o.href,className:"ant-breadcrumb-link",children:o.title}),delete o.href)),o}),[t]);return(0,s.jsx)(i.zrq,{items:a,...n})}},22770:function(e,t,n){"use strict";n.d(t,{M:function(){return l}});var s=n(24246),i=n(66726),a=n.n(i),r=n(27378),o=n(33312);let l=e=>{let{value:t,onChange:n}=e,[i,l]=(0,r.useState)(t),d=a()(n,500),c=(0,r.useCallback)(e=>{l(e),d(e)},[]);return(0,s.jsx)(o.Z,{search:i,onChange:c,onClear:()=>{l(""),n("")}})}},83543:function(e,t,n){"use strict";n.d(t,{CS:function(){return r},EY:function(){return l},Ud:function(){return s},WJ:function(){return a},nS:function(){return d},qr:function(){return o},sX:function(){return c},wi:function(){return i}});let{useGetAggregateMonitorResultsQuery:s,useGetDiscoveredSystemAggregateQuery:i,useGetDiscoveredAssetsQuery:a,useAddMonitorResultSystemMutation:r,useIgnoreMonitorResultSystemMutation:o,useAddMonitorResultAssetsMutation:l,useIgnoreMonitorResultAssetsMutation:d,useUpdateAssetsSystemMutation:c}=n(21618).u.injectEndpoints({endpoints:e=>({getAggregateMonitorResults:e.query({query:e=>{let{page:t=1,size:n=20,search:s}=e;return{url:"/plus/discovery-monitor/aggregate-results",params:{page:t,size:n,search:s,diff_status:"addition"}}},providesTags:["Discovery Monitor Results"]}),getDiscoveredSystemAggregate:e.query({query:e=>{let{key:t,page:n=1,size:s=20,search:i}=e;return{url:"/plus/discovery-monitor/system-aggregate-results",params:{monitor_config_id:t,page:n,size:s,search:i,diff_status:"addition"}}},providesTags:["Discovery Monitor Results"]}),getDiscoveredAssets:e.query({query:e=>{let{key:t,system:n,page:s=1,size:i=20,search:a}=e;return{url:"/plus/discovery-monitor/".concat(t,"/results"),params:{resolved_system_id:n,page:s,size:i,search:a,diff_status:"addition"}}},providesTags:()=>["Discovery Monitor Results"]}),addMonitorResultSystem:e.mutation({query:e=>({method:"POST",url:"/plus/discovery-monitor/".concat(e.monitor_config_key,"/promote"),params:{resolved_system_id:e.resolved_system_id}}),invalidatesTags:["Discovery Monitor Results"]}),ignoreMonitorResultSystem:e.mutation({query:e=>({method:"POST",url:"/plus/discovery-monitor/".concat(e.monitor_config_key,"/mute"),params:{resolved_system_id:e.resolved_system_id}}),invalidatesTags:["Discovery Monitor Results"]}),addMonitorResultAssets:e.mutation({query:e=>{var t;let n=new URLSearchParams;return null===(t=e.urnList)||void 0===t||t.forEach(e=>n.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/promote?".concat(n)}},invalidatesTags:["Discovery Monitor Results"]}),ignoreMonitorResultAssets:e.mutation({query:e=>{var t;let n=new URLSearchParams;return null===(t=e.urnList)||void 0===t||t.forEach(e=>n.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/mute?".concat(n)}},invalidatesTags:["Discovery Monitor Results"]}),updateAssetsSystem:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.urnList.map(t=>({urn:t,system_key:e.systemKey}))}),invalidatesTags:["Discovery Monitor Results"]})})})},55827:function(e,t,n){"use strict";n.d(t,{E:function(){return s}});let s=e=>e.toLowerCase().replace(/ /g,"_").replace(/[^a-zA-Z0-9._<>-]/g,"")},56048:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var s=n(24246),i=n(78670),a=n(34090),r=n(27378),o=n(44296),l=n(34803);let d=(0,i.IUT)({displayName:"CompassIcon",viewBox:"0 0 512 512",path:(0,s.jsx)("path",{fill:"currentColor",d:"M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm306.7 69.1L162.4 380.6c-19.4 7.5-38.5-11.6-31-31l55.5-144.3c3.3-8.5 9.9-15.1 18.4-18.4l144.3-55.5c19.4-7.5 38.5 11.6 31 31L325.1 306.7c-3.2 8.5-9.9 15.1-18.4 18.4zM288 256a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})});var c=n(39514),u=n(62711);let{Text:m}=i.AntTypography,h=e=>{let{searchText:t,suggestion:n,...i}=e;return t&&n?(0,s.jsxs)(m,{"aria-hidden":!0,style:{pointerEvents:"none",position:"absolute",zIndex:10,top:"var(--ant-line-width)",bottom:"var(--ant-line-width)",left:"var(--ant-padding-sm)",lineHeight:"calc(var(--ant-control-height) - var(--ant-line-width))"},...i,children:[(0,s.jsx)(m,{className:"text-transparent",children:t}),(0,s.jsx)(m,{type:"secondary",children:n.substring(t.length)})]}):null},v="Create new system",g=e=>{let{active:t,disabled:n,onRefreshSuggestions:a}=e,r={bg:t?"complimentary.500":"gray.100"};return(0,s.jsxs)(i.gCW,{children:[(0,s.jsx)(i.LZC,{minHeight:"18px"}),(0,s.jsxs)(i.v2r,{children:[(0,s.jsx)(i.j2t,{as:i.hU,size:"sm",isDisabled:n,icon:(0,s.jsx)(d,{color:t?"white":"gray.700",boxSize:4}),"aria-label":"Update information from Compass","data-testid":"refresh-suggestions-btn",_hover:{_disabled:r},...r}),(0,s.jsx)(i.qyq,{children:(0,s.jsx)(i.sNh,{onClick:a,children:(0,s.jsx)(i.xvT,{fontSize:"xs",lineHeight:4,children:"Reset to Compass defaults"})})})]})]})};var p=e=>{var t,n;let{label:d,isCreate:m,lockedForGVL:p,options:x,isLoading:f,onVendorSelected:y}=e,j=(0,o.C)(u.bN),[b,C,{setValue:w}]=(0,a.U$)("name"),S=!!(C.touched&&C.error),_={...b,value:null!==(t=b.value)&&void 0!==t?t:""},{touched:I,values:k,setTouched:R,setFieldValue:T,validateForm:N}=(0,a.u6)(),[A,z]=(0,r.useState)(!0),P=null!==(n=x.find(e=>e.value===_.value))&&void 0!==n?n:{label:_.value,value:_.value,description:""},q=(e,t)=>!!(null==t?void 0:t.label.toLowerCase().startsWith(e.toLowerCase())),[E,D]=(0,r.useState)(""),M=(0,r.useMemo)(()=>x.filter(e=>q(E,e)),[x,E]),Z=(0,r.useMemo)(()=>{let e=x;return m&&E&&(e=[...x,{label:"".concat(v,' "').concat(E,'"...'),value:E}]),e},[m,x,E]),L=!!E&&M.length>0,O=p&&!m;(0,r.useEffect)(()=>{z(!_.value&&!k.vendor_id)},[_.value,k.vendor_id,z]),(0,r.useEffect)(()=>{N()},[A,N]);let W=async()=>{D(""),T("vendor_id",void 0),await w(""),R({...I,vendor_id:!1,name:!1}),y(void 0)},U=async e=>{if(e){let t=x.some(t=>t.value===e.value)?e.value:void 0;T("vendor_id",t),await w(e.label.startsWith(v)?e.value:e.label),R({...I,vendor_id:!0,name:!0}),y(t)}},F=async e=>{_.onBlur(e),E&&await w(E),R({...I,name:!0})},B=async e=>{M.length>0&&E!==M[0].label?(e.preventDefault(),D(M[0].label),T("vendor_id",M[0].value),await w(M[0].label),y(M[0].value)):(T("vendor_id",void 0),await w(E)),R({...I,name:!0})},V=(0,s.jsx)(i.NIc,{isInvalid:S,isRequired:!0,width:"100%",children:(0,s.jsxs)(i.gCW,{alignItems:"start",position:"relative",width:"100%",children:[(0,s.jsxs)(i.Ugi,{spacing:1,children:[(0,s.jsx)(l.__,{htmlFor:"vendorName",fontSize:"xs",my:0,mr:1,children:d}),(0,s.jsx)(c.Z,{label:"Enter the system name"})]}),(0,s.jsxs)(i.xuv,{width:"100%",className:"relative",children:[(0,s.jsx)(i.WPr,{id:"vendorName",showSearch:!0,labelInValue:!0,autoFocus:!0,allowClear:!0,options:Z,loading:f,filterOption:(e,t)=>q(e,t)||!!(null==t?void 0:t.label.startsWith(v)),optionFilterProp:"label",value:P,placeholder:"Enter system name...",disabled:O,onChange:U,onSearch:D,onClear:W,onBlur:F,onInputKeyDown:e=>{E&&"Tab"===e.key&&B(e)},status:S?"error":void 0,"data-testid":"vendor-name-select"}),(0,s.jsx)(h,{searchText:E,suggestion:M.length?M[0].label:""})]}),(0,s.jsx)(l.Bc,{isInvalid:S,message:C.error,fieldName:"name"})]})});return(0,s.jsxs)(i.Ugi,{alignItems:"flex-start",width:"full",children:[A?V:(0,s.jsx)(l.j0,{autoFocus:!0,id:"name",name:"name",label:"System name",tooltip:"Enter the system name",variant:"stacked",disabled:O,isRequired:!0,inputRightElement:O?null:(0,s.jsx)(i.PZ7,{onClick:W,size:"sm","data-testid":"clear-btn"})}),(0,s.jsx)(g,{active:!!k.vendor_id||L,disabled:!k.vendor_id||"showing"===j,onRefreshSuggestions:()=>y(k.vendor_id)})]})}},43894:function(e,t,n){"use strict";n.d(t,{Sv:function(){return v},Yb:function(){return h},dQ:function(){return g},lm:function(){return p}});var s=n(24246),i=n(78670),a=n(34090),r=n(27378),o=n(44296),l=n(34803),d=n(39514),c=n(96878),u=n(62711);let m=(e,t,n)=>{var s,i;let[l,d,{setValue:m,setTouched:h}]=(0,a.U$)({name:e,type:n||void 0}),v=!!(d.touched&&d.error),{error:g}=d,p={...l,value:null!==(s=l.value)&&void 0!==s?s:""},[x,f]=(0,r.useState)(null!==(i=p.value)&&void 0!==i?i:""),{values:y}=(0,a.u6)(),{vendor_id:j}=y,b=(0,o.C)((0,c.$e)(j||"")),C=(0,o.C)(u.bN),w=(0,r.useRef)();return(0,r.useEffect)(()=>{"showing"===C&&f(p.value)},[C,f]),(0,r.useEffect)(()=>{if("showing"===C&&b){let n=t?t(b):b[e];p.value!==n&&(m(n),setTimeout(()=>{var e;h(!0),null===(e=w.current)||void 0===e||e.blur()},300))}},[C,m,b,w.current]),(0,r.useEffect)(()=>{"hiding"===C&&m(x)},[C,m,x]),{field:p,isInvalid:v,isShowingSuggestions:C,error:g,inputRef:w}},h=e=>{let{label:t,tooltip:n,disabled:a,isRequired:r=!1,dictField:o,name:c,placeholder:u,id:h}=e,{field:v,isInvalid:g,isShowingSuggestions:p,error:x,inputRef:f}=m(c,o);return(0,s.jsx)(i.NIc,{isInvalid:g,isRequired:r,children:(0,s.jsxs)(i.gCW,{alignItems:"start",children:[(0,s.jsxs)(i.kCb,{alignItems:"center",children:[(0,s.jsx)(l.__,{htmlFor:h||c,fontSize:"xs",my:0,mr:1,children:t}),n?(0,s.jsx)(d.Z,{label:n}):null]}),(0,s.jsx)(l.oi,{...v,ref:f,isRequired:r,isDisabled:a,"data-testid":"input-".concat(v.name),placeholder:u,isPassword:!1,color:"showing"===p?"complimentary.500":"gray.800"}),(0,s.jsx)(l.Bc,{isInvalid:g,message:x,fieldName:v.name})]})})},v=e=>{let{label:t,tooltip:n,disabled:a,isRequired:r=!1,dictField:o,name:c,id:u}=e,{field:h,isInvalid:v,isShowingSuggestions:g,error:p}=m(c,o);return(0,s.jsx)(i.NIc,{isInvalid:v,isRequired:r,children:(0,s.jsxs)(i.gCW,{alignItems:"start",children:[(0,s.jsxs)(i.kCb,{alignItems:"center",children:[(0,s.jsx)(l.__,{htmlFor:u||c,fontSize:"xs",my:0,mr:1,children:t}),n?(0,s.jsx)(d.Z,{label:n}):null]}),(0,s.jsx)(i.gxH,{...h,size:"sm","data-testid":"input-".concat(h.name),focusBorderColor:"primary.600",color:"showing"===g?"complimentary.500":"gray.800",isDisabled:a}),(0,s.jsx)(l.Bc,{isInvalid:v,message:p,fieldName:h.name})]})})},g=e=>{let{label:t,tooltip:n,dictField:r,name:o,id:c,disabled:u}=e,{field:h,isInvalid:v,error:g}=m(o,r,"checkbox");return(0,s.jsxs)(i.NIc,{isInvalid:v,width:"full",children:[(0,s.jsxs)(i.xuv,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,s.jsxs)(i.Ugi,{spacing:1,children:[(0,s.jsx)(l.__,{htmlFor:c||o,fontSize:"xs",my:0,mr:0,children:t}),n?(0,s.jsx)(d.Z,{label:n}):null]}),(0,s.jsx)(i.Ugi,{children:(0,s.jsx)(a.gN,{name:h.name,children:e=>{let{form:{setFieldValue:t}}=e;return(0,s.jsx)(i.rAg,{checked:h.checked,onChange:e=>{t(h.name,e)},disabled:u,className:"mr-2","data-testid":"input-".concat(h.name),size:"small"})}})})]}),(0,s.jsx)(l.Bc,{isInvalid:v,message:g,fieldName:h.name})]})},p=e=>{let{label:t,tooltip:n,dictField:r,name:o,id:c,disabled:u}=e,{field:h,isInvalid:v,error:g,isShowingSuggestions:p}=m(o,r,"numeric"),{setFieldValue:x}=(0,a.u6)();return(0,s.jsxs)(i.NIc,{isInvalid:v,width:"full",children:[(0,s.jsxs)(i.xuv,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,s.jsxs)(i.Ugi,{spacing:1,children:[(0,s.jsx)(l.__,{htmlFor:c||o,fontSize:"xs",my:0,mr:0,children:t}),n?(0,s.jsx)(d.Z,{label:n}):null]}),(0,s.jsx)(i.Ugi,{children:(0,s.jsxs)(i.Y2U,{value:h.value,name:h.name,size:"xs",onBlur:h.onBlur,onChange:e=>{x(h.name,e)},w:"100%",colorScheme:"terracotta",inputMode:"numeric","data-testid":"input-".concat(h.name),color:"showing"===p?"complimentary.500":"gray.800",focusBorderColor:"primary.600",isDisabled:u,children:[(0,s.jsx)(i.zuI,{}),(0,s.jsxs)(i.FiK,{children:[(0,s.jsx)(i.WQu,{}),(0,s.jsx)(i.Y_d,{})]})]})})]}),(0,s.jsx)(l.Bc,{isInvalid:v,message:g,fieldName:h.name})]})}},53867:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return G}});var s=n(24246),i=n(86677),a=n(27378),r=n(65464),o=n(11032),l=n(37541),d=n(59003),c=n(92222),u=n(78670),m=n(60136),h=n(53359),v=n(8540),g=n(83543),p=n(22770),x=n(31374);let f=e=>{let{children:t,className:n,style:i,...a}=e;return(0,s.jsx)(u.wpx,{...a,type:"text",className:"w-full justify-start ".concat(n),style:{fontWeight:600,padding:"var(--ant-select-option-padding)",backgroundColor:"var(--ant-select-option-selected-bg)",...i},children:t})};var y=n(21820);let j=(e,t)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f,{onClick:t,"data-testid":"add-new-system",id:"add-new-system",children:"Add new system +"}),e]}),b=e=>{var t;let{onAddSystem:n,...i}=e,[r,o]=(0,a.useState)(),{data:l,isFetching:d}=(0,x.xF)({page:1,size:25,search:r||void 0}),c=null==l?void 0:null===(t=l.items)||void 0===t?void 0:t.map(e=>({value:e.fides_key,label:e.name})),m=(0,a.useCallback)(e=>{(null==e?void 0:e.length)>1&&o(e),(null==e?void 0:e.length)===0&&o(void 0)},[o]),h=(0,a.useMemo)(()=>(0,y.Ds)(m,300),[m]);return(0,s.jsx)(u.WPr,{placeholder:"Search...","aria-label":"Search for a system to select",dropdownStyle:{minWidth:"500px"},dropdownRender:n?e=>j(e,n):void 0,"data-testid":"system-select",...i,showSearch:!0,filterOption:!1,options:c,onSearch:h,loading:i.loading||d})};var C=n(98198),w=n(34090),S=n(59389),_=n(44296),I=n(11596),k=n(78973),R=n(34803),T=n(73269),N=n(55827),A=n(96878),z=n(62711),P=n(43894),q=n(56048);let{Text:E}=u.AntTypography,D={name:"",vendor_id:void 0,description:"",tags:[]},M=e=>{let{onSuccessfulSubmit:t,toastOnSuccess:n,...i}=e,[r,o]=(0,a.useState)(!1),l=(0,_.T)(),{tcf:d,dictionaryService:c}=(0,I.hz)(),{isLoading:v}=(0,A.Rd)(void 0,{skip:!c}),g=(0,_.C)(A.o),p=(0,_.C)(z.gU),[f]=(0,x.in)(),[y]=(0,A.Qk)(),[j]=(0,x.f7)(),{successAlert:b,errorAlert:M}=(0,h.V)(),{setSuggestions:Z,setLockedForGVL:L}=z.dictSuggestionsSlice.actions,O=(0,a.useRef)(null),W=(0,a.useMemo)(()=>S.Ry().shape({name:S.Z_().required().label("System name").test("is-unique","",async(e,t)=>{let{data:n}=await f({page:1,size:10,search:e});return!((null==n?void 0:n.items)||[]).filter(t=>t.name===e).some(t=>t.name===e)||t.createError({message:'You already have a system called "'.concat(e,'". Please specify a unique name for this system.')})})}),[f]),U=e=>{if(c){if(!e){l(Z("hiding")),l(L(!1));return}l(Z("showing")),d&&(0,m.cj)(e)===m.c6.GVL?l(L(!0)):l(L(!1))}},F=()=>{i.onClose(),l(Z("initial")),l(L(!1))},B=async e=>{if(o(!0),e.vendor_id){let s=await y([e.vendor_id]);if((0,m.D4)(s))M((0,m.e$)(s.error));else{let{data:e}=s,i=e.systems[0];null==t||t(i.fides_key,i.name),n&&b("".concat(e.name," has been added to your system inventory."))}}else{let s={...e,fides_key:(0,N.E)(e.name),system_type:"",body:"",privacy_declarations:[]},i=await j(s);if((0,m.D4)(i))M((0,m.e$)(i.error));else{let{fides_key:s,name:a}=i.data;null==t||t(s,a),n&&b("".concat(e.name," has been added to your system inventory."))}F()}o(!1)};return(0,s.jsx)(C.Z,{title:"Add New System",...i,onClose:F,children:(0,s.jsx)(w.J9,{initialValues:D,onSubmit:B,validationSchema:W,innerRef:O,children:e=>{let{dirty:t,isValid:n}=e;return(0,s.jsxs)(w.l0,{children:[(0,s.jsx)(T.Gt,{id:"new-system-modal",name:"Add New System"}),(0,s.jsxs)(u.jqI,{vertical:!0,gap:20,className:"pb-6 pt-4",children:[(0,s.jsx)(E,{children:"Fides will add this system to your inventory and configure it for consent using the categories of consent listed below. Optionally, you can check if this system is listed within the Fides compass library by selecting the compass icon below."}),c?(0,s.jsx)(q.Z,{label:"System name",options:g,onVendorSelected:U,isCreate:!0,lockedForGVL:p,isLoading:v}):(0,s.jsx)(R.j0,{id:"name",name:"name",label:"System name",tooltip:"Give the system a unique, and relevant name for reporting purposes. e.g. “Email Data Warehouse”",variant:"stacked",isRequired:!0}),(0,s.jsx)(P.Sv,{id:"description",name:"description",label:"Description",tooltip:"What services does this system perform?",disabled:p}),(0,s.jsx)(k.d,{mode:"tags",id:"tags",name:"tags",label:"System Tags",options:[],layout:"stacked",tooltip:"Are there any tags to associate with this system?",disabled:p})]}),(0,s.jsxs)(u.jqI,{justify:"space-between",children:[(0,s.jsx)(u.wpx,{htmlType:"reset",onClick:F,disabled:v||!t||!n,"data-testid":"cancel-btn",children:"Cancel"}),(0,s.jsx)(u.wpx,{htmlType:"submit",type:"primary",disabled:v||!t||!n,loading:r,"data-testid":"save-btn",children:"Save"})]})]})}})})},{Text:Z}=u.AntTypography,L=e=>{let{onSave:t,isSaving:n,...i}=e,[r,o]=(0,a.useState)(),[l,d]=(0,a.useState)(!1),c=(0,a.useCallback)(e=>{e.preventDefault(),d(!0)},[]),m=()=>{d(!1)},h=()=>{o(void 0),i.onClose()};return(0,s.jsxs)(C.Z,{title:"Assign system",...i,onClose:h,children:[(0,s.jsxs)(u.jqI,{vertical:!0,gap:20,className:"pb-6 pt-4",children:[(0,s.jsx)(Z,{children:"Assign a system to the selected assets. If no system exists, select 'Add new system' to create one."}),(0,s.jsx)(b,{placeholder:"Search or select...",onSelect:(e,t)=>{o(t)},onAddSystem:c,value:r})]})," ",(0,s.jsxs)(u.jqI,{justify:"space-between",children:[(0,s.jsx)(u.wpx,{htmlType:"reset",onClick:h,"data-testid":"cancel-btn",children:"Cancel"}),(0,s.jsx)(u.wpx,{htmlType:"submit",type:"primary",disabled:!r,loading:n,onClick:()=>{t(r)},"data-testid":"save-btn",children:"Save"})]}),l&&(0,s.jsx)(M,{isOpen:!0,onClose:m,onSuccessfulSubmit:(e,t)=>{m(),o({label:t,value:e})},toastOnSuccess:!0})]})},O=e=>{let{asset:t}=e,[n,{isLoading:i}]=(0,g.EY)(),[a,{isLoading:r}]=(0,g.nS)(),{successAlert:o,errorAlert:l}=(0,h.V)(),d=i||r,{urn:c,name:v,resource_type:p}=t,x=async()=>{let e=await n({urnList:[c]});(0,m.D4)(e)?l((0,m.e$)(e.error)):o("".concat(p,' "').concat(v,'" has been added to the system inventory.'),"Confirmed")},f=async()=>{let e=await a({urnList:[c]});(0,m.D4)(e)?l((0,m.e$)(e.error)):o("".concat(p,' "').concat(v,'" has been ignored and will not appear in future scans.'),"Ignored")};return(0,s.jsxs)(u.vyj,{children:[(0,s.jsx)(u.esZ,{title:t.system?void 0:"This asset requires a system before you can add it to the inventory.",children:(0,s.jsx)(u.wpx,{"data-testid":"add-btn",size:"small",onClick:x,disabled:!t.system||d,loading:i,children:"Add"})}),(0,s.jsx)(u.wpx,{"data-testid":"ignore-btn",size:"small",onClick:f,disabled:d,loading:r,children:"Ignore"})]})};var W=n(71533),U=e=>{let{children:t,onClick:n,...i}=e;return(0,s.jsx)(u.Cts,{variant:"taxonomy",textTransform:"none",fontWeight:"normal",display:"flex",alignItems:"center",gap:1.5,as:n?"button":void 0,onClick:n,_hover:n?{borderColor:"primary.900"}:void 0,...i,children:t})},F=n(6111);let B=e=>{let{aggregateSystem:t,monitorConfigId:n}=e,{resource_type:i,name:r,urn:o,system:l}=t,[d,c]=(0,a.useState)(!1),[v,g]=(0,a.useState)(!1),[p,{isLoading:x}]=(0,F.NA)(),{successAlert:f,errorAlert:y}=(0,h.V)(),j=(0,a.useCallback)(e=>{e.preventDefault(),g(!0)},[]),C=async(e,t,s)=>{let a=await p({staged_resource_urn:o,monitor_config_id:n,system_key:e});(0,m.D4)(a)?y((0,m.e$)(a.error)):f(s?"".concat(t," has been added to your system inventory and the ").concat(i,' "').concat(r,'" has been assigned to that system.'):"".concat(i,' "').concat(r,'" has been assigned to ').concat(t,"."),"Confirmed"),c(!1)};return(0,s.jsxs)(s.Fragment,{children:[!d&&(0,s.jsx)("div",{style:(0,W.J9)(),children:l?(0,s.jsx)(U,{onClick:()=>c(!0),"data-testid":"system-badge",children:(0,s.jsxs)(s.Fragment,{children:[l,(0,s.jsx)(u.dY8,{})]})}):(0,s.jsx)(u.wpx,{size:"small",type:"text","aria-label":"add",icon:(0,s.jsx)(u.PJP.mm_,{}),onClick:()=>c(!0),"data-testid":"add-system-btn"})}),!!d&&(0,s.jsx)(b,{variant:"borderless",className:"w-full",autoFocus:!0,defaultOpen:!0,onBlur:e=>{var t;(null===(t=e.relatedTarget)||void 0===t?void 0:t.getAttribute("id"))!=="add-new-system"&&c(!1)},onAddSystem:j,onSelect:(e,t)=>C(e,t.label),loading:x}),v&&(0,s.jsx)(M,{isOpen:!0,onClose:()=>{g(!1)},onSuccessfulSubmit:(e,t)=>C(e,t,!0)})]})},V=()=>{let e=(0,c.Cl)();return{columns:[e.display({id:"select",cell:e=>{let{row:t}=e;return(0,s.jsx)(v.k,{isChecked:t.getIsSelected(),onChange:t.getToggleSelectedHandler(),dataTestId:"select-".concat(t.original.name||t.id)})},header:e=>{let{table:t}=e;return(0,s.jsx)(v.k,{isChecked:t.getIsAllPageRowsSelected(),isIndeterminate:t.getIsSomeRowsSelected(),onChange:t.getToggleAllRowsSelectedHandler(),dataTestId:"select-all-rows"})},maxSize:40}),e.accessor(e=>e.name,{id:"name",cell:e=>(0,s.jsx)(v.G3,{value:e.getValue()}),header:"Asset"}),e.accessor(e=>e.resource_type,{id:"resource_type",cell:e=>(0,s.jsx)(v.G3,{value:e.getValue()}),header:"Type"}),e.accessor(e=>e.system,{id:"system",cell:e=>!!e.row.original.monitor_config_id&&(0,s.jsx)(B,{aggregateSystem:e.row.original,monitorConfigId:e.row.original.monitor_config_id}),header:"System",meta:{noPadding:!0,width:"auto"}}),e.accessor(e=>e.locations,{id:"locations",cell:e=>(0,s.jsx)(v.G3,{value:e.getValue().length>1?"".concat(e.getValue().length," locations"):e.getValue()[0]}),header:"Locations"}),e.accessor(e=>e.domain,{id:"domain",cell:e=>(0,s.jsx)(v.G3,{value:e.getValue()}),header:"Domain"}),e.display({id:"actions",cell:e=>(0,s.jsx)(O,{asset:e.row.original}),header:"Actions",meta:{width:"auto",disableRowClick:!0}})]}},$=e=>{let{monitorId:t,systemId:n,onSystemName:r}=e,l=(0,i.useRouter)(),[x,f]=(0,a.useState)(n),[y,j]=(0,a.useState)({}),[b,C]=(0,a.useState)(!1),[w,{isLoading:S}]=(0,g.EY)(),[_,{isLoading:I}]=(0,g.nS)(),[k,{isLoading:R}]=(0,g.CS)(),[T,{isLoading:N}]=(0,g.sX)(),A=S||I||R||N,z=A||n===o.Kl,{PAGE_SIZES:P,pageSize:q,setPageSize:E,onPreviousPageClick:D,isPreviousPageDisabled:M,onNextPageClick:Z,isNextPageDisabled:O,startRange:W,endRange:U,pageIndex:F,setTotalPages:B,resetPageIndexToDefault:$}=(0,v.oi)(),[G,H]=(0,a.useState)(""),{successAlert:Y,errorAlert:K}=(0,h.V)();(0,a.useEffect)(()=>{$()},[t,G,$]);let{data:X,isLoading:J,isFetching:Q}=(0,g.WJ)({key:t,system:n,page:F,size:q,search:G});(0,a.useEffect)(()=>{if(X){var e;let t=(null===(e=X.items[0])||void 0===e?void 0:e.system)||n||"";B(X.pages||1),f(t),null==r||r(t)}},[X,n,r,B]);let{columns:ee}=V(),et=(0,d.b7)({getCoreRowModel:(0,c.sC)(),columns:ee,manualPagination:!0,data:(null==X?void 0:X.items)||[],columnResizeMode:"onChange",onRowSelectionChange:j,state:{rowSelection:y}}),en=et.getSelectedRowModel().rows.map(e=>e.original.urn),es=async()=>{let e=await w({urnList:en});(0,m.D4)(e)?K((0,m.e$)(e.error)):(et.resetRowSelection(),Y("".concat(en.length," assets from ").concat(x," have been added to the system inventory."),"Confirmed"))},ei=async e=>{if("string"==typeof(null==e?void 0:e.value)){let n=await T({monitorId:t,urnList:en,systemKey:e.value});(0,m.D4)(n)?K((0,m.e$)(n.error)):(et.resetRowSelection(),Y("".concat(en.length," assets have been assigned to ").concat(e.label,"."),"Confirmed"))}C(!1)},ea=async()=>{let e=await _({urnList:en});(0,m.D4)(e)?K((0,m.e$)(e.error)):(et.resetRowSelection(),Y("".concat(en.length," assets from ").concat(x," have been ignored and will not appear in future scans."),"Confirmed"))},er=async()=>{let e=(null==X?void 0:X.items.length)||0,s=await k({monitor_config_key:t,resolved_system_id:n});(0,m.D4)(s)?K((0,m.e$)(s.error)):(l.push("".concat(o.vi,"/").concat(t)),Y("".concat(e," assets from ").concat(x," have been added to the system inventory."),"Confirmed"))};return t&&n?J?(0,s.jsx)(v.I4,{rowHeight:36,numRows:36}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(v.Q$,{children:[(0,s.jsx)(p.M,{value:G,onChange:H}),(0,s.jsxs)(u.kCb,{alignItems:"center",children:[!!en.length&&(0,s.jsx)(u.xvT,{fontSize:"xs",fontWeight:"semibold",minW:16,mr:6,"data-testid":"selected-count",children:"".concat(en.length," selected")}),(0,s.jsxs)(u.Ugi,{children:[(0,s.jsxs)(u.v2r,{children:[(0,s.jsx)(u.j2t,{as:u.wpx,icon:(0,s.jsx)(u.PJP._ME,{}),iconPosition:"end",loading:A,"data-testid":"bulk-actions-menu",disabled:!en.length||A,type:"primary",children:"Actions"}),(0,s.jsxs)(u.qyq,{children:[(0,s.jsx)(u.sNh,{fontSize:"small",onClick:es,"data-testid":"bulk-add",children:"Add"}),(0,s.jsx)(u.sNh,{fontSize:"small",onClick:()=>{C(!0)},"data-testid":"bulk-assign-system",children:"Assign system"}),(0,s.jsx)(u.RaW,{}),(0,s.jsx)(u.sNh,{fontSize:"small",onClick:ea,"data-testid":"bulk-ignore",children:"Ignore"})]})]}),(0,s.jsx)(u.esZ,{title:z?"These assets require a system before you can add them to the inventory.":void 0,children:(0,s.jsx)(u.wpx,{onClick:er,disabled:z,loading:R,type:"primary",icon:(0,s.jsx)(u.PJP.MCw,{}),iconPosition:"end","data-testid":"add-all",children:"Add all"})})]})]})]}),(0,s.jsx)(v.ZK,{tableInstance:et,emptyTableNotice:(0,s.jsx)(u.oj8,{image:u.oj8.PRESENTED_IMAGE_SIMPLE,description:"All caught up!"})}),(0,s.jsx)(v.s8,{totalRows:(null==X?void 0:X.items.length)||0,pageSizes:P,setPageSize:E,onPreviousPageClick:D,isPreviousPageDisabled:M||Q,onNextPageClick:Z,isNextPageDisabled:O||Q,startRange:W,endRange:U}),(0,s.jsx)(L,{isOpen:b,onClose:()=>{C(!1)},onSave:ei,isSaving:N})]}):null};var G=()=>{let e=(0,i.useRouter)(),t=decodeURIComponent(e.query.monitorId),n=decodeURIComponent(e.query.systemId),[d,c]=(0,a.useState)(n===o.Kl?"Uncategorized assets":n);return(0,s.jsxs)(r.Z,{title:"Action center - Discovered assets",children:[(0,s.jsx)(l.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity",href:o.vi},{title:t,href:"".concat(o.vi,"/").concat(t)},{title:n===o.Kl?"Uncategorized assets":d}]}),(0,s.jsx)($,{monitorId:t,systemId:n,onSystemName:c})]})}}},function(e){e.O(0,[8033,5559,8540,2888,9774,179],function(){return e(e.s=25654)}),_N_E=e.O()}]);