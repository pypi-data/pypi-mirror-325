"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8001],{36848:function(e,t,s){s.d(t,{q:function(){return l}});var i=s(24246),a=s(78670);let l=e=>{let{label:t,isDisabled:s,...l}=e;return(0,i.jsx)(a.OK9,{"data-testid":"tab-".concat(t),_selected:{fontWeight:"600",color:"complimentary.500",borderColor:"complimentary.500"},fontSize:l.fontSize,fontWeight:"500",color:"gray.500",isDisabled:s||!1,children:t})};t.Z=e=>{let{data:t,border:s="partial",...r}=e;return(0,i.jsxs)(a.mQc,{colorScheme:"complimentary",...r,children:[(0,i.jsx)(a.tdY,{width:"partial"===s?"max-content":void 0,children:t.map(e=>(0,i.jsx)(l,{label:e.label,isDisabled:e.isDisabled,fontSize:r.fontSize},e.label))}),(0,i.jsx)(a.nPR,{children:t.map(e=>(0,i.jsx)(a.x45,{px:0,"data-testid":"tab-panel-".concat(e.label),children:e.content},e.label))})]})}},11574:function(e,t,s){var i=s(24246),a=s(78670),l=s(36848);t.Z=e=>{let{data:t,border:s="partial",borderWidth:r=2,...n}=e;return(0,i.jsx)(a.mQc,{colorScheme:"complimentary",...n,children:(0,i.jsx)(a.tdY,{width:"partial"===s?"max-content":void 0,borderBottomWidth:r,children:t.map(e=>(0,i.jsx)(l.q,{label:e.label,"data-testid":e.label,isDisabled:e.isDisabled,fontSize:n.fontSize},e.label))})})}},35682:function(e,t,s){var i=s(24246),a=s(78670);t.Z=e=>{let{title:t,icon:s,type:l,...r}=e;return(0,i.jsx)(a.wpx,{size:"small",type:l,"data-testid":"action-".concat(t),icon:s,iconPosition:"start",...r,children:t})}},76552:function(e,t,s){var i=s(24246),a=s(11574);t.Z=e=>{let{filterTabs:t,onChange:s,filterTabIndex:l}=e;return(0,i.jsx)(a.Z,{border:"full-width",mb:5,size:"sm",data:t,borderWidth:1,index:l,onChange:s})}},8339:function(e,t,s){s.d(t,{Y:function(){return r}});var i=s(24246),a=s(78670),l=s(18622);let r=[(0,i.jsx)(a.PJP.S9g,{},"layers"),(0,i.jsx)(a.PJP.ehp,{},"dataset"),(0,i.jsx)(a.PJP.iA_,{},"table"),(0,i.jsx)(a.PJP.$4y,{style:{transform:"rotate(-90deg)"}},"field")];t.Z=e=>{let{resourceUrn:t,parentLink:s,onPathClick:a=()=>{}}=e,n=[];if(t||n.push({title:"All activity"}),t){n.push({title:"All activity",href:s});let e=t.split(".");e.forEach((t,s)=>{0!==s&&n.push({title:t,icon:r[s-1],onClick:t=>{t.preventDefault(),a(e.slice(0,s+1).join("."))}})})}return(0,i.jsx)(l.m,{"data-testid":"results-breadcrumb",items:n})}},87573:function(e,t,s){var i=s(24246),a=s(78670),l=s(2686);t.Z=()=>(0,i.jsxs)(a.J2e,{isLazy:!0,trigger:"hover",children:[(0,i.jsx)(a.xol,{children:(0,i.jsx)(a.UOT,{color:"gray.400"})}),(0,i.jsxs)(a.yky,{bgColor:"gray.800",color:"white",fontSize:"sm",w:"auto",border:"none",children:[(0,i.jsx)(a.Ytg,{fontWeight:"semibold",border:"none",pb:0,children:"Activity legend:"}),(0,i.jsx)(a.QHN,{bgColor:"gray.800"}),(0,i.jsx)(a.baG,{border:"none",children:(0,i.jsxs)(a.MIq,{columns:2,spacing:2,children:[(0,i.jsxs)(a.xuv,{children:[(0,i.jsx)(l.Rv,{})," Change detected"]}),(0,i.jsxs)(a.xuv,{children:[(0,i.jsx)(l.$P,{})," Data labeled"]}),(0,i.jsxs)(a.xuv,{children:[(0,i.jsx)(l.zj,{})," Monitoring"]}),(0,i.jsxs)(a.xuv,{children:[(0,i.jsx)(l.dK,{})," Addition detected"]}),(0,i.jsxs)(a.xuv,{children:[(0,i.jsx)(l.Kr,{})," Unmonitored"]}),(0,i.jsxs)(a.xuv,{children:[(0,i.jsx)(l.q1,{})," Removal detected"]})]})})]})]})},38637:function(e,t,s){var i=s(86677),a=s(11032);t.Z=()=>{let e=(0,i.useRouter)();return{monitorId:e.query.monitorId,resourceUrn:e.query.resourceUrn,navigateToDetectionResults:t=>{let{resourceUrn:s,filterTabIndex:i}=t;e.push({pathname:a.dS,query:{resourceUrn:s,filterTabIndex:i}})},navigateToDiscoveryResults:t=>{let{resourceUrn:s,filterTabIndex:i}=t;e.push({pathname:a.Sj,query:{resourceUrn:s,filterTabIndex:i}})}}}},21917:function(e,t,s){s.d(t,{Z:function(){return P}});var i,a,l=s(24246),r=s(59003),n=s(92222),o=s(78670),d=s(86677),c=s(27378),u=s(8540),x=s(76552),g=s(6111),h=s(98320),j=s(61934),f=s(38575),m=s(51557),I=s(59104),v=s(15025),L=s(46042),p=s(33890),S=s(67690),C=s(62448),_=e=>{let{resourceType:t}=e,s=(0,n.Cl)();return t===I.X.SCHEMA?{columns:[s.accessor(e=>e.name,{id:"name",cell:e=>(0,l.jsx)(C.Z,{result:e.row.original,changeTypeOverride:m.E.CLASSIFICATION}),header:e=>(0,l.jsx)(u.Rr,{value:"Name",...e})}),s.accessor(e=>e.urn,{id:"project",cell:e=>(0,l.jsx)(u.G3,{value:(0,v.Z)(e.getValue())}),header:e=>(0,l.jsx)(u.Rr,{value:"Project",...e})}),s.display({id:"status",cell:e=>(0,l.jsx)(f.Z,{result:e.row.original}),header:e=>(0,l.jsx)(u.Rr,{value:"Status",...e})}),s.accessor(e=>e.system,{id:"system",cell:e=>(0,l.jsx)(u.G3,{value:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"System",...e})}),s.accessor(e=>e.monitor_config_id,{id:"monitor",cell:e=>(0,l.jsx)(u.G3,{value:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"Detected by",...e})}),s.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,l.jsx)(h.Cy,{time:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"When",...e})}),s.display({id:"action",cell:e=>e.row.original.diff_status!==L.LL.MUTED?(0,l.jsx)(p.Z,{resource:e.row.original}):(0,l.jsx)(u.G3,{value:"--"}),header:"Actions",meta:{width:"auto"}})]}:t===I.X.TABLE?{columns:[s.display({id:"select",cell:e=>{var t;let{row:s}=e;return(0,l.jsx)(h.k,{isChecked:s.getIsSelected(),onChange:s.getToggleSelectedHandler(),dataTestId:"select-".concat(null!==(t=s.original.name)&&void 0!==t?t:s.id)})},header:e=>{let{table:t}=e;return(0,l.jsx)(h.k,{isChecked:t.getIsAllPageRowsSelected(),isIndeterminate:t.getIsSomeRowsSelected(),onChange:t.getToggleAllRowsSelectedHandler(),dataTestId:"select-all-rows"})},maxSize:40}),s.accessor(e=>e.name,{id:"tables",cell:e=>(0,l.jsx)(C.Z,{result:e.row.original}),header:e=>(0,l.jsx)(u.Rr,{value:"Table name",...e})}),s.accessor(e=>e.description,{id:"description",cell:e=>(0,l.jsx)(u.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(u.Rr,{value:"Description",...e}),meta:{showHeaderMenu:!0}}),s.display({id:"status",cell:e=>(0,l.jsx)(f.Z,{result:e.row.original}),header:e=>(0,l.jsx)(u.Rr,{value:"Status",...e})}),s.display({id:"type",cell:()=>(0,l.jsx)(u.G3,{value:"Table"}),header:"Type"}),s.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,l.jsx)(h.Cy,{time:e.getValue()}),header:"Time"}),s.display({id:"actions",cell:e=>(0,l.jsx)(p.Z,{resource:e.row.original}),header:"Actions",meta:{width:"auto"}})]}:t===I.X.FIELD?{columns:[s.accessor(e=>e.name,{id:"name",cell:e=>(0,l.jsx)(C.Z,{result:e.row.original}),header:e=>(0,l.jsx)(u.Rr,{value:"Field name",...e})}),s.accessor(e=>e.source_data_type,{id:"data-type",cell:e=>(0,l.jsx)(j.Z,{type:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"Data type",...e})}),s.accessor(e=>e.description,{id:"description",cell:e=>(0,l.jsx)(u.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(u.Rr,{value:"Description",...e}),meta:{showHeaderMenu:!0}}),s.display({id:"status",cell:e=>(0,l.jsx)(f.Z,{result:e.row.original}),header:e=>(0,l.jsx)(u.Rr,{value:"Status",...e})}),s.display({id:"type",cell:()=>(0,l.jsx)(u.G3,{value:"Field"}),header:"Type"}),s.display({id:"classifications",cell:e=>{let{row:t}=e;return(0,l.jsx)(S.Z,{resource:t.original})},meta:{overflow:"visible",disableRowClick:!0},header:"Data category",minSize:280}),s.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,l.jsx)(h.Cy,{time:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"When",...e})}),s.display({id:"actions",cell:e=>(0,l.jsx)(p.Z,{resource:e.row.original}),header:"Actions",meta:{width:"auto"}})]}:{columns:[]}};(i=a||(a={}))[i.ACTION_REQUIRED=0]="ACTION_REQUIRED",i[i.UNMONITORED=1]="UNMONITORED";var b=e=>{let{initialFilterTabIndex:t=0}=e,[s,i]=(0,c.useState)(t),a=(0,c.useMemo)(()=>[{label:"Action Required",filters:[L.LL.CLASSIFICATION_ADDITION,L.LL.CLASSIFICATION_UPDATE],childFilters:[L.LL.CLASSIFICATION_ADDITION,L.LL.CLASSIFICATION_UPDATE]},{label:"In progress",filters:[L.LL.CLASSIFYING,L.LL.CLASSIFICATION_QUEUED],childFilters:[L.LL.CLASSIFYING,L.LL.CLASSIFICATION_QUEUED]},{label:"Unmonitored",filters:[L.LL.MUTED],childFilters:[]}],[]);return{filterTabs:a,filterTabIndex:s,setFilterTabIndex:i,activeDiffFilters:a[s].filters,activeChildDiffFilters:a[s].childFilters}},y=s(38637),A=s(87573),T=s(35682),E=e=>{let{resourceUrn:t}=e,[s,{isLoading:i}]=(0,g.Hf)(),[a,{isLoading:r}]=(0,g.zV)(),n=i||r,d=async e=>{await a({staged_resource_urns:e})},c=async e=>{await s({staged_resource_urns:e})};return(0,l.jsx)(o.jqI,{"data-testid":"bulk-actions-menu",children:(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(T.Z,{title:"Confirm all",icon:(0,l.jsx)(o.nQG,{}),onClick:()=>c([t]),disabled:n,loading:i,type:"primary",size:"middle"}),(0,l.jsx)(T.Z,{title:"Ignore all",icon:(0,l.jsx)(o.tpL,{}),onClick:()=>d([t]),disabled:n,loading:r,size:"middle"})]})})},N=e=>{let{selectedUrns:t}=e,[s,{isLoading:i}]=(0,g.Hf)(),[a,{isLoading:r}]=(0,g.zV)(),n=i||r,d=async e=>{await s({staged_resource_urns:e})},c=async e=>{await a({staged_resource_urns:e})};return t.length?(0,l.jsxs)(o.jqI,{className:"items-center","data-testid":"bulk-actions-menu",children:[(0,l.jsx)(o.xvT,{fontSize:"xs",fontWeight:"semibold",minW:16,mr:4,children:"".concat(t.length," selected")}),(0,l.jsxs)(o.jqI,{className:"gap-2",children:[(0,l.jsx)(T.Z,{title:"Confirm",icon:(0,l.jsx)(o.nQG,{}),onClick:()=>d(t),disabled:n,loading:i,type:"primary",size:"middle"}),(0,l.jsx)(T.Z,{title:"Ignore",icon:(0,l.jsx)(o.tpL,{}),disabled:n,loading:r,onClick:()=>c(t),size:"middle"})]})]}):null},D=s(52962),R=s(71329),w=s(2053),O=s(22770);let Z={items:[],total:0,page:1,size:50,pages:1},F=()=>(0,l.jsx)(o.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"empty-state",alignSelf:"center",margin:"auto",children:(0,l.jsxs)(o.gCW,{children:[(0,l.jsx)(o.xvT,{fontSize:"md",fontWeight:"600",children:"No activity found"}),(0,l.jsx)(o.xvT,{fontSize:"sm",children:"You're up to date!"})]})});var P=e=>{var t,s;let{resourceUrn:i}=e,h=(0,d.useRouter)(),[j,f]=(0,c.useState)(""),{filterTabs:m,setFilterTabIndex:v,filterTabIndex:L,activeDiffFilters:p,activeChildDiffFilters:S}=b({initialFilterTabIndex:(null===(t=h.query)||void 0===t?void 0:t.filterTabIndex)?Number(null===(s=h.query)||void 0===s?void 0:s.filterTabIndex):void 0}),[C,T]=(0,c.useState)({}),{PAGE_SIZES:P,pageSize:U,setPageSize:k,onPreviousPageClick:z,isPreviousPageDisabled:M,onNextPageClick:G,isNextPageDisabled:q,startRange:V,endRange:Q,pageIndex:W,setTotalPages:H,resetPageIndexToDefault:Y}=(0,u.oi)();(0,c.useEffect)(()=>{Y()},[i,j,Y,p,S]);let{isFetching:X,isLoading:J,data:K}=(0,g.z8)({staged_resource_urn:i,page:W,size:U,child_diff_status:S,diff_status:p,search:j}),B=(0,D.G)(null==K?void 0:K.items[0]),{items:$,total:ee,pages:et}=(0,c.useMemo)(()=>null!=K?K:Z,[K]);(0,c.useEffect)(()=>{H(et)},[et,H]);let{columns:es}=_({resourceType:B}),ei=(0,c.useMemo)(()=>es,[es]),{navigateToDiscoveryResults:ea}=(0,y.Z)(),el=(0,r.b7)({getCoreRowModel:(0,n.sC)(),getGroupedRowModel:(0,n.qe)(),getExpandedRowModel:(0,n.rV)(),columns:ei,manualPagination:!0,onRowSelectionChange:T,state:{rowSelection:C},getRowId:R.Z,data:$,columnResizeMode:"onChange"}),er=Object.keys(C).filter(e=>C[e]);return J?(0,l.jsx)(u.I4,{rowHeight:36,numRows:36}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.Z,{filterTabs:m,filterTabIndex:L,onChange:v}),(0,l.jsxs)(u.Q$,{children:[(0,l.jsxs)(o.kCb,{gap:6,align:"center",children:[(0,l.jsx)(o.xuv,{flexShrink:0,children:(0,l.jsx)(O.M,{value:j,onChange:f})}),(0,l.jsx)(A.Z,{})]}),B===I.X.TABLE&&!!er.length&&(0,l.jsx)(N,{selectedUrns:er}),B===I.X.FIELD&&L!==a.UNMONITORED&&(0,l.jsx)(E,{resourceUrn:i})]}),(0,l.jsx)(u.ZK,{tableInstance:el,onRowClick:e=>ea({resourceUrn:e.urn,filterTabIndex:L}),getRowIsClickable:e=>B!==I.X.FIELD||(0,w.Z)(e),emptyTableNotice:(0,l.jsx)(F,{})}),(0,l.jsx)(u.s8,{totalRows:ee||0,pageSizes:P,setPageSize:k,onPreviousPageClick:z,isPreviousPageDisabled:M||X,onNextPageClick:G,isNextPageDisabled:q||X,startRange:V,endRange:Q})]})}},33890:function(e,t,s){var i=s(24246),a=s(78670),l=s(53359),r=s(90049),n=s(46042),o=s(35682),d=s(6111);t.Z=e=>{let{resource:t}=e,[s,{isLoading:c}]=(0,d.v8)(),[u,{isLoading:x}]=(0,d.cM)(),[g,{isLoading:h}]=(0,d.vi)(),j=x||h||c,{diff_status:f,child_diff_statuses:m,top_level_field_name:I}=t,{successAlert:v}=(0,l.V)(),L=f===n.LL.CLASSIFICATION_ADDITION||f===n.LL.CLASSIFICATION_UPDATE,p=m&&(m[n.LL.CLASSIFICATION_ADDITION]||m[n.LL.CLASSIFICATION_UPDATE]),S=(L||p)&&!I,C=L||p,_=S&&C,b=async()=>{await u({staged_resource_urn:t.urn}),v('These changes have been added to a Fides dataset. To view, navigate to "Manage datasets".',"Table changes confirmed")},y=async()=>{await g({staged_resource_urn:t.urn}),v("Ignored changes will not be added to a Fides dataset.","".concat(t.name||"Changes"," ignored"))},A=async()=>{await s({staged_resource_urn:t.urn,monitor_config_id:t.monitor_config_id,start_classification:!0,classify_monitored_resources:!0}),v("Reclassification of ".concat((0,r.Z)(t)||"the resource"," has begun.  The results may take some time to appear in the â€œData discoveryâ€œ tab."),"Reclassification started")};return(0,i.jsxs)(a.Ugi,{onClick:e=>e.stopPropagation(),gap:2,children:[S&&(0,i.jsx)(o.Z,{title:"Confirm",icon:(0,i.jsx)(a.nQG,{}),onClick:b,disabled:j,loading:x}),C&&(0,i.jsx)(o.Z,{title:"Ignore",icon:(0,i.jsx)(a.tpL,{}),onClick:y,disabled:j,loading:h}),!_&&(0,i.jsx)(o.Z,{title:"Reclassify",icon:(0,i.jsx)(a.nyI,{}),onClick:A,disabled:j,loading:c}),(0,i.jsx)(a.LZC,{}),_&&(0,i.jsxs)(a.v2r,{children:[(0,i.jsx)(a.j2t,{as:a.wpx,size:"small",type:"text",icon:(0,i.jsx)(a.nXP,{transform:"rotate(90deg)"}),className:"w-6 gap-0","data-testid":"actions-overflow-btn"}),(0,i.jsx)(a.qyq,{children:(0,i.jsx)(a.sNh,{onClick:A,icon:(0,i.jsx)(a.nyI,{}),"data-testid":"action-reclassify",children:"Reclassify"})})]})]})}},62448:function(e,t,s){var i=s(24246),a=s(78670),l=s(2686),r=s(58525),n=s(90049),o=s(6170);t.Z=e=>{let{result:t,changeTypeOverride:s}=e,d=null!=s?s:(0,r.Z)(t);return(0,i.jsxs)(a.kCb,{alignItems:"center",height:"100%",children:[(0,i.jsx)(a.ua7,{label:d,children:(0,i.jsx)("span",{children:l.QL[d]})}),(0,i.jsx)(a.xvT,{fontSize:"xs",lineHeight:4,fontWeight:(0,o.Z)(t)?"semibold":"normal",overflow:"hidden",textOverflow:"ellipsis",children:(0,n.Z)(t)})]})}},38575:function(e,t,s){var i=s(24246),a=s(8540),l=s(51557),r=s(58525);let n={[l.E.MUTED]:{colorScheme:"gray",label:"Unmonitored"},[l.E.MONITORED]:{colorScheme:"green",label:"Monitoring"},[l.E.IN_PROGRESS]:{colorScheme:"blue",label:"Classifying"}};t.Z=e=>{var t,s,l,o,d;let{result:c,changeTypeOverride:u}=e;if(null===(t=c.user_assigned_data_categories)||void 0===t?void 0:t.length)return(0,i.jsx)(a.A4,{colorScheme:"green",value:"Reviewed"});let x=null!=u?u:(0,r.Z)(c);return(0,i.jsx)(a.A4,{colorScheme:null!==(o=null===(s=n[x])||void 0===s?void 0:s.colorScheme)&&void 0!==o?o:"orange",value:null!==(d=null===(l=n[x])||void 0===l?void 0:l.label)&&void 0!==d?d:"Pending review"})}},15025:function(e,t){t.Z=e=>{let t=e.split(".");return t.length>1?t[1]:""}},58525:function(e,t,s){var i=s(51557),a=s(46042);t.Z=e=>e.diff_status===a.LL.ADDITION?i.E.ADDITION:e.diff_status===a.LL.REMOVAL?i.E.REMOVAL:e.diff_status===a.LL.CLASSIFYING||e.diff_status===a.LL.CLASSIFICATION_QUEUED?i.E.IN_PROGRESS:e.diff_status===a.LL.CLASSIFICATION_ADDITION||e.diff_status===a.LL.CLASSIFICATION_UPDATE?i.E.CLASSIFICATION:e.child_diff_statuses?e.child_diff_statuses[a.LL.CLASSIFYING]||e.child_diff_statuses[a.LL.CLASSIFICATION_QUEUED]?i.E.IN_PROGRESS:e.child_diff_statuses[a.LL.CLASSIFICATION_ADDITION]||e.child_diff_statuses[a.LL.CLASSIFICATION_UPDATE]?i.E.CLASSIFICATION:e.child_diff_statuses[a.LL.ADDITION]||e.child_diff_statuses[a.LL.REMOVAL]?i.E.CHANGE:e.diff_status===a.LL.MONITORED?i.E.MONITORED:e.diff_status===a.LL.MUTED?i.E.MUTED:i.E.NONE:i.E.NONE},71329:function(e,t){t.Z=e=>e.urn}}]);