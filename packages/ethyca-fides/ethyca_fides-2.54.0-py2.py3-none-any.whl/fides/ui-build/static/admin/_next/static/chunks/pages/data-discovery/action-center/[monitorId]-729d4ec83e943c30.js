(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2423],{96539:function(e,t,s){var o=s(77400).Symbol;e.exports=o},99736:function(e,t,s){var o=s(96539),n=s(34840),i=s(21258),r=o?o.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r&&r in Object(e)?n(e):i(e)}},39120:function(e,t,s){var o="object"==typeof s.g&&s.g&&s.g.Object===Object&&s.g;e.exports=o},34840:function(e,t,s){var o=s(96539),n=Object.prototype,i=n.hasOwnProperty,r=n.toString,a=o?o.toStringTag:void 0;e.exports=function(e){var t=i.call(e,a),s=e[a];try{e[a]=void 0;var o=!0}catch(e){}var n=r.call(e);return o&&(t?e[a]=s:delete e[a]),n}},21258:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},77400:function(e,t,s){var o=s(39120),n="object"==typeof self&&self&&self.Object===Object&&self,i=o||n||Function("return this")();e.exports=i},11611:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},92360:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},55193:function(e,t,s){var o=s(99736),n=s(92360);e.exports=function(e){return"symbol"==typeof e||n(e)&&"[object Symbol]"==o(e)}},86850:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center/[monitorId]",function(){return s(154)}])},83543:function(e,t,s){"use strict";s.d(t,{CS:function(){return r},EY:function(){return l},Ud:function(){return o},WJ:function(){return i},nS:function(){return c},qr:function(){return a},sX:function(){return u},wi:function(){return n}});let{useGetAggregateMonitorResultsQuery:o,useGetDiscoveredSystemAggregateQuery:n,useGetDiscoveredAssetsQuery:i,useAddMonitorResultSystemMutation:r,useIgnoreMonitorResultSystemMutation:a,useAddMonitorResultAssetsMutation:l,useIgnoreMonitorResultAssetsMutation:c,useUpdateAssetsSystemMutation:u}=s(21618).u.injectEndpoints({endpoints:e=>({getAggregateMonitorResults:e.query({query:e=>{let{page:t=1,size:s=20,search:o}=e;return{url:"/plus/discovery-monitor/aggregate-results",params:{page:t,size:s,search:o,diff_status:"addition"}}},providesTags:["Discovery Monitor Results"]}),getDiscoveredSystemAggregate:e.query({query:e=>{let{key:t,page:s=1,size:o=20,search:n}=e;return{url:"/plus/discovery-monitor/system-aggregate-results",params:{monitor_config_id:t,page:s,size:o,search:n,diff_status:"addition"}}},providesTags:["Discovery Monitor Results"]}),getDiscoveredAssets:e.query({query:e=>{let{key:t,system:s,page:o=1,size:n=20,search:i}=e;return{url:"/plus/discovery-monitor/".concat(t,"/results"),params:{resolved_system_id:s,page:o,size:n,search:i,diff_status:"addition"}}},providesTags:()=>["Discovery Monitor Results"]}),addMonitorResultSystem:e.mutation({query:e=>({method:"POST",url:"/plus/discovery-monitor/".concat(e.monitor_config_key,"/promote"),params:{resolved_system_id:e.resolved_system_id}}),invalidatesTags:["Discovery Monitor Results"]}),ignoreMonitorResultSystem:e.mutation({query:e=>({method:"POST",url:"/plus/discovery-monitor/".concat(e.monitor_config_key,"/mute"),params:{resolved_system_id:e.resolved_system_id}}),invalidatesTags:["Discovery Monitor Results"]}),addMonitorResultAssets:e.mutation({query:e=>({method:"POST",url:"/plus/discovery-monitor/promote",params:{staged_resource_urns:e.urnList}}),invalidatesTags:["Discovery Monitor Results"]}),ignoreMonitorResultAssets:e.mutation({query:e=>({method:"POST",url:"/plus/discovery-monitor/mute",params:{staged_resource_urns:e.urnList}}),invalidatesTags:["Discovery Monitor Results"]}),updateAssetsSystem:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.urnList.map(t=>({urn:t,system_key:e.systemKey}))}),invalidatesTags:["Discovery Monitor Results"]})})})},154:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var o=s(24246),n=s(86677),i=s(65464),r=s(11032),a=s(37541),l=s(59003),c=s(92222),u=s(78670),d=s(27378),m=s(8540),g=s(83543),y=s(22770),v=s(60136),f=s(53359);let p=e=>{let{monitorId:t,system:s}=e,[n,{isLoading:i}]=(0,g.CS)(),[a,{isLoading:l}]=(0,g.qr)(),{successAlert:c,errorAlert:d}=(0,f.V)(),m=i||l,{id:y,name:p,system_key:h,total_updates:_}=s,b=async()=>{let e=await n({monitor_config_key:t,resolved_system_id:y});(0,v.D4)(e)?d((0,v.e$)(e.error)):c(h?"".concat(_," assets from ").concat(p," have been added to the system inventory."):"".concat(p," and ").concat(_,"assets have been added to the system inventory. ").concat(p," is now configured for consent."),"Confirmed")},j=async()=>{let e=await a({monitor_config_key:t,resolved_system_id:y||r.Kl});(0,v.D4)(e)?d((0,v.e$)(e.error)):c(p?"".concat(_," assets from ").concat(p," have been ignored and will not appear in future scans."):"".concat(_," uncategorized assets have been ignored and will not appear in future scans."),"Confirmed")};return(0,o.jsxs)(u.vyj,{children:[(0,o.jsx)(u.esZ,{title:s.id?void 0:"These assets must be categorized before you can add them to the inventory.",children:(0,o.jsx)(u.wpx,{"data-testid":"add-btn",size:"small",onClick:b,disabled:!s.id||m,loading:i,children:"Add"})}),(0,o.jsx)(u.wpx,{"data-testid":"ignore-btn",size:"small",onClick:j,disabled:m,loading:l,children:"Ignore"})]})};var h=s(2686);let _=e=>{let{system:t}=e;return(0,o.jsxs)(u.kCb,{alignItems:"center",height:"100%",children:[!(null==t?void 0:t.system_key)&&(0,o.jsx)(u.ua7,{label:"New system",children:(0,o.jsx)("span",{children:h.QL.Change})}),(0,o.jsx)(u.xvT,{fontSize:"xs",fontWeight:"semibold",lineHeight:4,overflow:"hidden",textOverflow:"ellipsis",children:(null==t?void 0:t.name)||"Uncategorized assets"})]})},b=e=>{let t=(0,c.Cl)();return{columns:[t.accessor(e=>e.name,{id:"system_name",cell:e=>(0,o.jsx)(_,{system:e.row.original}),header:"System",meta:{width:"auto"}}),t.accessor(e=>e.total_updates,{id:"total_updates",cell:e=>(0,o.jsx)(m.G3,{value:e.getValue()}),header:"Assets",size:80}),t.accessor(e=>e.locations,{id:"locations",cell:e=>(0,o.jsx)(m.G3,{value:e.getValue().length>1?"".concat(e.getValue().length," locations"):e.getValue()[0]}),header:"Locations"}),t.accessor(e=>e.domains,{id:"domains",cell:e=>(0,o.jsx)(m.G3,{value:e.getValue().length>1?"".concat(e.getValue().length," domains"):e.getValue()[0]}),header:"Domains"}),t.display({id:"actions",cell:t=>(0,o.jsx)(p,{system:t.row.original,monitorId:e}),header:"Actions",meta:{width:"auto",disableRowClick:!0}})]}},j=e=>{let{monitorId:t}=e,s=(0,n.useRouter)(),{PAGE_SIZES:i,pageSize:a,setPageSize:v,onPreviousPageClick:f,isPreviousPageDisabled:p,onNextPageClick:h,isNextPageDisabled:_,startRange:j,endRange:x,pageIndex:w,setTotalPages:R,resetPageIndexToDefault:S}=(0,m.oi)(),[C,k]=(0,d.useState)("");(0,d.useEffect)(()=>{S()},[t,C,S]);let{data:T,isLoading:M,isFetching:P}=(0,g.wi)({key:t,page:w,size:a,search:C});(0,d.useEffect)(()=>{T&&R(T.pages||1)},[T,R]);let{columns:D}=b(t),A=(0,l.b7)({getCoreRowModel:(0,c.sC)(),columns:D,manualPagination:!0,data:(null==T?void 0:T.items)||[],columnResizeMode:"onChange"});return M?(0,o.jsx)(m.I4,{rowHeight:36,numRows:36}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(m.Q$,{children:(0,o.jsx)(u.kCb,{direction:"row",alignItems:"center",justifyContent:"space-between",width:"full",children:(0,o.jsx)(u.kCb,{gap:6,align:"center",children:(0,o.jsx)(u.xuv,{flexShrink:0,children:(0,o.jsx)(y.M,{value:C,onChange:k})})})})}),(0,o.jsx)(m.ZK,{tableInstance:A,onRowClick:e=>{var o;s.push("".concat(r.vi,"/").concat(t,"/").concat(null!==(o=e.id)&&void 0!==o?o:r.Kl))},emptyTableNotice:(0,o.jsx)(u.oj8,{image:u.oj8.PRESENTED_IMAGE_SIMPLE,description:"All caught up!"})}),(0,o.jsx)(m.s8,{totalRows:(null==T?void 0:T.items.length)||0,pageSizes:i,setPageSize:v,onPreviousPageClick:f,isPreviousPageDisabled:p||P,onNextPageClick:h,isNextPageDisabled:_||P,startRange:j,endRange:x})]})};var x=()=>{let e=decodeURIComponent((0,n.useRouter)().query.monitorId);return(0,o.jsxs)(i.Z,{title:"Action center - Discovered assets by system",children:[(0,o.jsx)(a.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity",href:r.vi},{title:e}]}),(0,o.jsx)(j,{monitorId:e})]})}}},function(e){e.O(0,[8033,5559,8540,7080,2888,9774,179],function(){return e(e.s=86850)}),_N_E=e.O()}]);