(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2423],{96539:function(e,t,o){var s=o(77400).Symbol;e.exports=s},99736:function(e,t,o){var s=o(96539),n=o(34840),r=o(21258),i=s?s.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?n(e):r(e)}},39120:function(e,t,o){var s="object"==typeof o.g&&o.g&&o.g.Object===Object&&o.g;e.exports=s},34840:function(e,t,o){var s=o(96539),n=Object.prototype,r=n.hasOwnProperty,i=n.toString,a=s?s.toStringTag:void 0;e.exports=function(e){var t=r.call(e,a),o=e[a];try{e[a]=void 0;var s=!0}catch(e){}var n=i.call(e);return s&&(t?e[a]=o:delete e[a]),n}},21258:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},77400:function(e,t,o){var s=o(39120),n="object"==typeof self&&self&&self.Object===Object&&self,r=s||n||Function("return this")();e.exports=r},11611:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},92360:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},55193:function(e,t,o){var s=o(99736),n=o(92360);e.exports=function(e){return"symbol"==typeof e||n(e)&&"[object Symbol]"==s(e)}},86850:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center/[monitorId]",function(){return o(154)}])},83543:function(e,t,o){"use strict";o.d(t,{CS:function(){return i},EY:function(){return l},Ud:function(){return s},WJ:function(){return r},nS:function(){return c},qr:function(){return a},sX:function(){return u},wi:function(){return n}});let{useGetAggregateMonitorResultsQuery:s,useGetDiscoveredSystemAggregateQuery:n,useGetDiscoveredAssetsQuery:r,useAddMonitorResultSystemMutation:i,useIgnoreMonitorResultSystemMutation:a,useAddMonitorResultAssetsMutation:l,useIgnoreMonitorResultAssetsMutation:c,useUpdateAssetsSystemMutation:u}=o(21618).u.injectEndpoints({endpoints:e=>({getAggregateMonitorResults:e.query({query:e=>{let{page:t=1,size:o=20,search:s}=e;return{url:"/plus/discovery-monitor/aggregate-results",params:{page:t,size:o,search:s,diff_status:"addition"}}},providesTags:["Discovery Monitor Results"]}),getDiscoveredSystemAggregate:e.query({query:e=>{let{key:t,page:o=1,size:s=20,search:n}=e;return{url:"/plus/discovery-monitor/system-aggregate-results",params:{monitor_config_id:t,page:o,size:s,search:n,diff_status:"addition"}}},providesTags:["Discovery Monitor Results"]}),getDiscoveredAssets:e.query({query:e=>{let{key:t,system:o,page:s=1,size:n=20,search:r}=e;return{url:"/plus/discovery-monitor/".concat(t,"/results"),params:{resolved_system_id:o,page:s,size:n,search:r,diff_status:"addition"}}},providesTags:()=>["Discovery Monitor Results"]}),addMonitorResultSystem:e.mutation({query:e=>({method:"POST",url:"/plus/discovery-monitor/".concat(e.monitor_config_key,"/promote"),params:{resolved_system_id:e.resolved_system_id}}),invalidatesTags:["Discovery Monitor Results"]}),ignoreMonitorResultSystem:e.mutation({query:e=>({method:"POST",url:"/plus/discovery-monitor/".concat(e.monitor_config_key,"/mute"),params:{resolved_system_id:e.resolved_system_id}}),invalidatesTags:["Discovery Monitor Results"]}),addMonitorResultAssets:e.mutation({query:e=>{var t;let o=new URLSearchParams;return null===(t=e.urnList)||void 0===t||t.forEach(e=>o.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/promote?".concat(o)}},invalidatesTags:["Discovery Monitor Results"]}),ignoreMonitorResultAssets:e.mutation({query:e=>{var t;let o=new URLSearchParams;return null===(t=e.urnList)||void 0===t||t.forEach(e=>o.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/mute?".concat(o)}},invalidatesTags:["Discovery Monitor Results"]}),updateAssetsSystem:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.urnList.map(t=>({urn:t,system_key:e.systemKey}))}),invalidatesTags:["Discovery Monitor Results"]})})})},154:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return x}});var s=o(24246),n=o(86677),r=o(65464),i=o(11032),a=o(37541),l=o(59003),c=o(92222),u=o(78670),d=o(27378),m=o(8540),g=o(83543),y=o(22770),v=o(60136),f=o(53359);let p=e=>{let{monitorId:t,system:o}=e,[n,{isLoading:r}]=(0,g.CS)(),[a,{isLoading:l}]=(0,g.qr)(),{successAlert:c,errorAlert:d}=(0,f.V)(),m=r||l,{id:y,name:p,system_key:h,total_updates:_}=o,b=async()=>{let e=await n({monitor_config_key:t,resolved_system_id:y});(0,v.D4)(e)?d((0,v.e$)(e.error)):c(h?"".concat(_," assets from ").concat(p," have been added to the system inventory."):"".concat(p," and ").concat(_,"assets have been added to the system inventory. ").concat(p," is now configured for consent."),"Confirmed")},j=async()=>{let e=await a({monitor_config_key:t,resolved_system_id:y||i.Kl});(0,v.D4)(e)?d((0,v.e$)(e.error)):c(p?"".concat(_," assets from ").concat(p," have been ignored and will not appear in future scans."):"".concat(_," uncategorized assets have been ignored and will not appear in future scans."),"Confirmed")};return(0,s.jsxs)(u.vyj,{children:[(0,s.jsx)(u.esZ,{title:o.id?void 0:"These assets must be categorized before you can add them to the inventory.",children:(0,s.jsx)(u.wpx,{"data-testid":"add-btn",size:"small",onClick:b,disabled:!o.id||m,loading:r,children:"Add"})}),(0,s.jsx)(u.wpx,{"data-testid":"ignore-btn",size:"small",onClick:j,disabled:m,loading:l,children:"Ignore"})]})};var h=o(2686);let _=e=>{let{system:t}=e;return(0,s.jsxs)(u.kCb,{alignItems:"center",height:"100%",children:[!(null==t?void 0:t.system_key)&&(0,s.jsx)(u.ua7,{label:"New system",children:(0,s.jsx)("span",{children:h.QL.Change})}),(0,s.jsx)(u.xvT,{fontSize:"xs",fontWeight:"semibold",lineHeight:4,overflow:"hidden",textOverflow:"ellipsis",children:(null==t?void 0:t.name)||"Uncategorized assets"})]})},b=e=>{let t=(0,c.Cl)();return{columns:[t.accessor(e=>e.name,{id:"system_name",cell:e=>(0,s.jsx)(_,{system:e.row.original}),header:"System",meta:{width:"auto"}}),t.accessor(e=>e.total_updates,{id:"total_updates",cell:e=>(0,s.jsx)(m.G3,{value:e.getValue()}),header:"Assets",size:80}),t.accessor(e=>e.locations,{id:"locations",cell:e=>(0,s.jsx)(m.G3,{value:e.getValue().length>1?"".concat(e.getValue().length," locations"):e.getValue()[0]}),header:"Locations"}),t.accessor(e=>e.domains,{id:"domains",cell:e=>(0,s.jsx)(m.G3,{value:e.getValue().length>1?"".concat(e.getValue().length," domains"):e.getValue()[0]}),header:"Domains"}),t.display({id:"actions",cell:t=>(0,s.jsx)(p,{system:t.row.original,monitorId:e}),header:"Actions",meta:{width:"auto",disableRowClick:!0}})]}},j=e=>{let{monitorId:t}=e,o=(0,n.useRouter)(),{PAGE_SIZES:r,pageSize:a,setPageSize:v,onPreviousPageClick:f,isPreviousPageDisabled:p,onNextPageClick:h,isNextPageDisabled:_,startRange:j,endRange:x,pageIndex:w,setTotalPages:R,resetPageIndexToDefault:S}=(0,m.oi)(),[C,k]=(0,d.useState)("");(0,d.useEffect)(()=>{S()},[t,C,S]);let{data:T,isLoading:P,isFetching:M}=(0,g.wi)({key:t,page:w,size:a,search:C});(0,d.useEffect)(()=>{T&&R(T.pages||1)},[T,R]);let{columns:D}=b(t),E=(0,l.b7)({getCoreRowModel:(0,c.sC)(),columns:D,manualPagination:!0,data:(null==T?void 0:T.items)||[],columnResizeMode:"onChange"});return P?(0,s.jsx)(m.I4,{rowHeight:36,numRows:36}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Q$,{children:(0,s.jsx)(u.kCb,{direction:"row",alignItems:"center",justifyContent:"space-between",width:"full",children:(0,s.jsx)(u.kCb,{gap:6,align:"center",children:(0,s.jsx)(u.xuv,{flexShrink:0,children:(0,s.jsx)(y.M,{value:C,onChange:k})})})})}),(0,s.jsx)(m.ZK,{tableInstance:E,onRowClick:e=>{var s;o.push("".concat(i.vi,"/").concat(t,"/").concat(null!==(s=e.id)&&void 0!==s?s:i.Kl))},emptyTableNotice:(0,s.jsx)(u.oj8,{image:u.oj8.PRESENTED_IMAGE_SIMPLE,description:"All caught up!"})}),(0,s.jsx)(m.s8,{totalRows:(null==T?void 0:T.items.length)||0,pageSizes:r,setPageSize:v,onPreviousPageClick:f,isPreviousPageDisabled:p||M,onNextPageClick:h,isNextPageDisabled:_||M,startRange:j,endRange:x})]})};var x=()=>{let e=decodeURIComponent((0,n.useRouter)().query.monitorId);return(0,s.jsxs)(r.Z,{title:"Action center - Discovered assets by system",children:[(0,s.jsx)(a.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity",href:i.vi},{title:e}]}),(0,s.jsx)(j,{monitorId:e})]})}}},function(e){e.O(0,[8033,5559,8540,7080,2888,9774,179],function(){return e(e.s=86850)}),_N_E=e.O()}]);